(function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},n={},i=function(t,e){return{}.hasOwnProperty.call(t,e)},o=function(t,e){var n,i,o=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var s=0,r=n.length;r>s;s++)i=n[s],".."===i?o.pop():"."!==i&&""!==i&&o.push(i);return o.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},r=function(e){return function(n){var i=s(e),r=o(i,n);return t.require(r,e)}},a=function(t,e){var i={id:t,exports:{}};return n[t]=i,e(i.exports,r(t),i),i.exports},l=function(t,s){var r=o(t,".");if(null==s&&(s="/"),i(n,r))return n[r].exports;if(i(e,r))return a(r,e[r]);var l=o(r,"./index");if(i(n,l))return n[l].exports;if(i(e,l))return a(l,e[l]);throw Error('Cannot find module "'+t+'" from '+'"'+s+'"')},c=function(t,n){if("object"==typeof t)for(var o in t)i(t,o)&&(e[o]=t[o]);else e[t]=n},u=function(){var t=[];for(var n in e)i(e,n)&&t.push(n);return t};t.require=l,t.require.define=c,t.require.register=c,t.require.list=u,t.require.brunch=!0}})(),function(t,e){function n(t){var e=t.length,n=se.type(t);return se.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=fe[t]={};return se.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=se.expando+Math.random()}function s(t,n,i){var o;if(i===e&&1===t.nodeType)if(o="data-"+n.replace(ge,"-$1").toLowerCase(),i=t.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?JSON.parse(i):i}catch(s){}de.set(t,n,i)}else i=e;return i}function r(){return!0}function a(){return!1}function l(){try{return z.activeElement}catch(t){}}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t,e,n){if(se.isFunction(e))return se.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return se.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Ee.test(e))return se.filter(e,t,n);e=se.filter(e,t)}return se.grep(t,function(t){return ee.call(e,t)>=0!==n})}function h(t,e){return se.nodeName(t,"table")&&se.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function m(t){var e=Oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,i=0;n>i;i++)ye.set(t[i],"globalEval",!e||ye.get(e[i],"globalEval"))}function d(t,e){var n,i,o,s,r,a,l,c;if(1===e.nodeType){if(ye.hasData(t)&&(s=ye.access(t),r=ye.set(e,s),c=s.events)){delete r.handle,r.events={};for(o in c)for(n=0,i=c[o].length;i>n;n++)se.event.add(e,o,c[o][n])}de.hasData(t)&&(a=de.access(t),l=se.extend({},a),de.set(e,l))}}function y(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&se.nodeName(t,n)?se.merge([t],i):i}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ve.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function g(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=Ze.length;o--;)if(e=Ze[o]+n,e in t)return e;return i}function x(t,e){return t=e||t,"none"===se.css(t,"display")||!se.contains(t.ownerDocument,t)}function v(e){return t.getComputedStyle(e,null)}function b(t,e){for(var n,i,o,s=[],r=0,a=t.length;a>r;r++)i=t[r],i.style&&(s[r]=ye.get(i,"olddisplay"),n=i.style.display,e?(s[r]||"none"!==n||(i.style.display=""),""===i.style.display&&x(i)&&(s[r]=ye.access(i,"olddisplay",A(i.nodeName)))):s[r]||(o=x(i),(n&&"none"!==n||!o)&&ye.set(i,"olddisplay",o?n:se.css(i,"display"))));for(r=0;a>r;r++)i=t[r],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[r]||"":"none"));return t}function w(t,e,n){var i=Ue.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function C(t,e,n,i,o){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,r=0;4>s;s+=2)"margin"===n&&(r+=se.css(t,n+Ye[s],!0,o)),i?("content"===n&&(r-=se.css(t,"padding"+Ye[s],!0,o)),"margin"!==n&&(r-=se.css(t,"border"+Ye[s]+"Width",!0,o))):(r+=se.css(t,"padding"+Ye[s],!0,o),"padding"!==n&&(r+=se.css(t,"border"+Ye[s]+"Width",!0,o)));return r}function S(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=v(t),r=se.support.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,s);if(0>=o||null==o){if(o=Je(t,e,s),(0>o||null==o)&&(o=t.style[e]),$e.test(o))return o;i=r&&(se.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+C(t,e,n||(r?"border":"content"),i,s)+"px"}function A(t){var e=z,n=Xe[t];return n||(n=D(t,e),"none"!==n&&n||(qe=(qe||se("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(qe[0].contentWindow||qe[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=D(t,e),qe.detach()),Xe[t]=n),n}function D(t,e){var n=se(e.createElement(t)).appendTo(e.body),i=se.css(n[0],"display");return n.remove(),i}function B(t,e,n,i){var o;if(se.isArray(e))se.each(e,function(e,o){n||en.test(t)?i(t,o):B(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==se.type(e))i(t,e);else for(o in e)B(t+"["+o+"]",e[o],n,i)}function E(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,s=e.toLowerCase().match(ae)||[];if(se.isFunction(n))for(;i=s[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function k(t,n,i,o){function s(l){var c;return r[l]=!0,se.each(t[l]||[],function(t,l){var u=l(n,i,o);return"string"!=typeof u||a||r[u]?a?!(c=u):e:(n.dataTypes.unshift(u),s(u),!1)}),c}var r={},a=t===xn;return s(n.dataTypes[0])||!r["*"]&&s("*")}function T(t,n){var i,o,s=se.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((s[i]?t:o||(o={}))[i]=n[i]);return o&&se.extend(!0,t,o),t}function M(t,n,i){for(var o,s,r,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),o===e&&(o=t.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||t.converters[s+" "+c[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==c[0]&&c.unshift(r),i[r]):e}function L(t,e,n,i){var o,s,r,a,l,c={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=c[l+" "+s]||c["* "+s],!r)for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[o]:c[o]!==!0&&(s=a[0],u.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(h){return{state:"parsererror",error:r?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function I(){return setTimeout(function(){En=e}),En=se.now()}function j(t,e,n){for(var i,o=(jn[e]||[]).concat(jn["*"]),s=0,r=o.length;r>s;s++)if(i=o[s].call(n,e,t))return i}function P(t,e,n){var i,o,s=0,r=In.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=En||I(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,s=1-i,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return a.notifyWith(t,[c,s,n]),1>s&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:se.extend({},e),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:En||I(),duration:n.duration,tweens:[],createTween:function(e,n){var i=se.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(V(u,c.opts.specialEasing);r>s;s++)if(i=In[s].call(c,t,u,c.opts))return i;return se.map(u,j,c),se.isFunction(c.opts.start)&&c.opts.start.call(t,c),se.fx.timer(se.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function V(t,e){var n,i,o,s,r;for(n in t)if(i=se.camelCase(n),o=e[i],s=t[n],se.isArray(s)&&(o=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),r=se.cssHooks[i],r&&"expand"in r){s=r.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=o)}else e[i]=o}function R(t,n,i){var o,s,r,a,l,c,u=this,h={},p=t.style,m=t.nodeType&&x(t),f=ye.get(t,"fxshow");i.queue||(l=se._queueHooks(t,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,u.always(function(){u.always(function(){l.unqueued--,se.queue(t,"fx").length||l.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===se.css(t,"display")&&"none"===se.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(o in n)if(s=n[o],Tn.exec(s)){if(delete n[o],r=r||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!f||f[o]===e)continue;m=!0}h[o]=f&&f[o]||se.style(t,o)}if(!se.isEmptyObject(h)){f?"hidden"in f&&(m=f.hidden):f=ye.access(t,"fxshow",{}),r&&(f.hidden=!m),m?se(t).show():u.done(function(){se(t).hide()}),u.done(function(){var e;ye.remove(t,"fxshow");for(e in h)se.style(t,e,h[e])});for(o in h)a=j(m?f[o]:0,o,u),o in f||(f[o]=a.start,m&&(a.end=a.start,a.start="width"===o||"height"===o?1:0))}}function N(t,e,n,i,o){return new N.prototype.init(t,e,n,i,o)}function O(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Ye[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function F(t){return se.isWindow(t)?t:9===t.nodeType&&t.defaultView}var G,J,q=typeof e,H=t.location,z=t.document,U=z.documentElement,$=t.jQuery,W=t.$,X={},Q=[],K="2.0.3",Y=Q.concat,Z=Q.push,te=Q.slice,ee=Q.indexOf,ne=X.toString,ie=X.hasOwnProperty,oe=K.trim,se=function(t,e){return new se.fn.init(t,e,G)},re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^-ms-/,he=/-([\da-z])/gi,pe=function(t,e){return e.toUpperCase()},me=function(){z.removeEventListener("DOMContentLoaded",me,!1),t.removeEventListener("load",me,!1),se.ready()};se.fn=se.prototype={jquery:K,constructor:se,init:function(t,n,i){var o,s;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(o[1]){if(n=n instanceof se?n[0]:n,se.merge(this,se.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:z,!0)),ce.test(o[1])&&se.isPlainObject(n))for(o in n)se.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}return s=z.getElementById(o[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):se.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),se.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=se.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return se.each(this,t,e)},ready:function(t){return se.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(se.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},se.fn.init.prototype=se.fn,se.extend=se.fn.extend=function(){var t,n,i,o,s,r,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||se.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(n in t)i=a[n],o=t[n],a!==o&&(u&&o&&(se.isPlainObject(o)||(s=se.isArray(o)))?(s?(s=!1,r=i&&se.isArray(i)?i:[]):r=i&&se.isPlainObject(i)?i:{},a[n]=se.extend(u,r,o)):o!==e&&(a[n]=o));return a},se.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===se&&(t.$=W),e&&t.jQuery===se&&(t.jQuery=$),se},isReady:!1,readyWait:1,holdReady:function(t){t?se.readyWait++:se.ready(!0)},ready:function(t){(t===!0?--se.readyWait:se.isReady)||(se.isReady=!0,t!==!0&&--se.readyWait>0||(J.resolveWith(z,[se]),se.fn.trigger&&se(z).trigger("ready").off("ready")))},isFunction:function(t){return"function"===se.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==se.type(t)||t.nodeType||se.isWindow(t))return!1;try{if(t.constructor&&!ie.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||z;var i=ce.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=se.buildFragment([t],e,o),o&&se(o).remove(),se.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(o){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&se.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=se.trim(t),t&&(1===t.indexOf("use strict")?(e=z.createElement("script"),e.text=t,z.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ue,"ms-").replace(he,pe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,s=0,r=t.length,a=n(t);if(i){if(a)for(;r>s&&(o=e.apply(t[s],i),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],i),o===!1)break}else if(a)for(;r>s&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:function(t){return null==t?"":oe.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?se.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var i=n.length,o=t.length,s=0;if("number"==typeof i)for(;i>s;s++)t[o++]=n[s];else for(;n[s]!==e;)t[o++]=n[s++];return t.length=o,t},grep:function(t,e,n){var i,o=[],s=0,r=t.length;for(n=!!n;r>s;s++)i=!!e(t[s],s),n!==i&&o.push(t[s]);return o},map:function(t,e,i){var o,s=0,r=t.length,a=n(t),l=[];if(a)for(;r>s;s++)o=e(t[s],s,i),null!=o&&(l[l.length]=o);else for(s in t)o=e(t[s],s,i),null!=o&&(l[l.length]=o);return Y.apply([],l)},guid:1,proxy:function(t,n){var i,o,s;return"string"==typeof n&&(i=t[n],n=t,t=i),se.isFunction(t)?(o=te.call(arguments,2),s=function(){return t.apply(n||this,o.concat(te.call(arguments)))},s.guid=t.guid=t.guid||se.guid++,s):e},access:function(t,n,i,o,s,r,a){var l=0,c=t.length,u=null==i;if("object"===se.type(i)){s=!0;for(l in i)se.access(t,n,l,i[l],!0,r,a)}else if(o!==e&&(s=!0,se.isFunction(o)||(a=!0),u&&(a?(n.call(t,o),n=null):(u=n,n=function(t,e,n){return u.call(se(t),n)})),n))for(;c>l;l++)n(t[l],i,a?o:o.call(t[l],l,n(t[l],i)));return s?t:u?n.call(t):c?n(t[0],i):r},now:Date.now,swap:function(t,e,n,i){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=n.apply(t,i||[]);for(s in e)t.style[s]=r[s];return o}}),se.ready.promise=function(e){return J||(J=se.Deferred(),"complete"===z.readyState?setTimeout(se.ready):(z.addEventListener("DOMContentLoaded",me,!1),t.addEventListener("load",me,!1))),J.promise(e)},se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),G=se(z),function(t,e){function n(t,e,n,i){var o,s,r,a,l,c,u,h,f,d;if((e?e.ownerDocument||e:F)!==L&&M(e),e=e||L,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(j&&!i){if(o=xe.exec(t))if(r=o[1]){if(9===a){if(s=e.getElementById(r),!s||!s.parentNode)return n;if(s.id===r)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&N(e,s)&&s.id===r)return n.push(s),n}else{if(o[2])return te.apply(n,e.getElementsByTagName(t)),n;if((r=o[3])&&C.getElementsByClassName&&e.getElementsByClassName)return te.apply(n,e.getElementsByClassName(r)),n}if(C.qsa&&(!P||!P.test(t))){if(h=u=O,f=e,d=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=p(t),(u=e.getAttribute("id"))?h=u.replace(we,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+m(c[l]);f=me.test(t)&&e.parentNode||e,d=c.join(",")}if(d)try{return te.apply(n,f.querySelectorAll(d)),n}catch(y){}finally{u||e.removeAttribute("id")}}}return b(t.replace(ue,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>A.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function o(t){return t[O]=!0,t}function s(t){var e=L.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)A.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return o(function(e){return e=+e,o(function(n,i){for(var o,s=t([],n.length,e),r=s.length;r--;)n[o=s[r]]&&(n[o]=!(i[o]=n[o]))})})}function h(){}function p(t,e){var i,o,s,r,a,l,c,u=H[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=A.preFilter;a;){(!i||(o=he.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),i=!1,(o=pe.exec(a))&&(i=o.shift(),s.push({value:i,type:o[0].replace(ue," ")}),a=a.slice(i.length));for(r in A.filter)!(o=_e[r].exec(a))||c[r]&&!(o=c[r](o))||(i=o.shift(),s.push({value:i,type:r,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):H(t,l).slice(0)}function m(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,s=J++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,s)}:function(e,n,r){var a,l,c,u=G+" "+s;if(r){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,r))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(c=e[O]||(e[O]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===S)return a===!0}else if(l=c[i]=[u],l[1]=t(e,n,r)||S,l[1]===!0)return!0}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function y(t,e,n,i,o){for(var s,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(s=t[a])&&(!n||n(s,i,o))&&(r.push(s),c&&e.push(a));return r}function _(t,e,n,i,s,r){return i&&!i[O]&&(i=_(i)),s&&!s[O]&&(s=_(s,r)),o(function(o,r,a,l){var c,u,h,p=[],m=[],f=r.length,d=o||v(e||"*",a.nodeType?[a]:a,[]),_=!t||!o&&e?d:y(d,p,t,a,l),g=n?s||(o?t:f||i)?[]:r:_;if(n&&n(_,g,a,l),i)for(c=y(g,m),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(g[m[u]]=!(_[m[u]]=h));if(o){if(s||t){if(s){for(c=[],u=g.length;u--;)(h=g[u])&&c.push(_[u]=h);s(null,g=[],c,l)}for(u=g.length;u--;)(h=g[u])&&(c=s?ne.call(o,h):p[u])>-1&&(o[c]=!(r[c]=h))}}else g=y(g===r?g.splice(f,g.length):g),s?s(null,r,g,l):te.apply(r,g)})}function g(t){for(var e,n,i,o=t.length,s=A.relative[t[0].type],r=s||A.relative[" "],a=s?1:0,l=f(function(t){return t===e},r,!0),c=f(function(t){return ne.call(e,t)>-1},r,!0),u=[function(t,n,i){return!s&&(i||n!==k)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];o>a;a++)if(n=A.relative[t[a].type])u=[f(d(u),n)];else{if(n=A.filter[t[a].type].apply(null,t[a].matches),n[O]){for(i=++a;o>i&&!A.relative[t[i].type];i++);return _(a>1&&d(u),a>1&&m(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ue,"$1"),n,i>a&&g(t.slice(a,i)),o>i&&g(t=t.slice(i)),o>i&&m(t))}u.push(n)}return d(u)}function x(t,e){var i=0,s=e.length>0,r=t.length>0,a=function(o,a,l,c,u){var h,p,m,f=[],d=0,_="0",g=o&&[],x=null!=u,v=k,b=o||r&&A.find.TAG("*",u&&a.parentNode||a),w=G+=null==v?1:Math.random()||.1;for(x&&(k=a!==L&&a,S=i);null!=(h=b[_]);_++){if(r&&h){for(p=0;m=t[p++];)if(m(h,a,l)){c.push(h);break}x&&(G=w,S=++i)}s&&((h=!m&&h)&&d--,o&&g.push(h))}if(d+=_,s&&_!==d){for(p=0;m=e[p++];)m(g,f,a,l);if(o){if(d>0)for(;_--;)g[_]||f[_]||(f[_]=Y.call(c));f=y(f)}te.apply(c,f),x&&!o&&f.length>0&&d+e.length>1&&n.uniqueSort(c)}return x&&(G=w,k=v),g};return s?o(a):a}function v(t,e,i){for(var o=0,s=e.length;s>o;o++)n(t,e[o],i);return i}function b(t,e,n,i){var o,s,r,a,l,c=p(t);if(!i&&1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&C.getById&&9===e.nodeType&&j&&A.relative[s[1].type]){if(e=(A.find.ID(r.matches[0].replace(Ce,Se),e)||[])[0],!e)return n;t=t.slice(s.shift().value.length)}for(o=_e.needsContext.test(t)?0:s.length;o--&&(r=s[o],!A.relative[a=r.type]);)if((l=A.find[a])&&(i=l(r.matches[0].replace(Ce,Se),me.test(s[0].type)&&e.parentNode||e))){if(s.splice(o,1),t=i.length&&m(s),!t)return te.apply(n,i),n;break}}return E(t,c)(i,e,!j,n,me.test(t)),n}var w,C,S,A,D,B,E,k,T,M,L,I,j,P,V,R,N,O="sizzle"+-new Date,F=t.document,G=0,J=0,q=i(),H=i(),z=i(),U=!1,$=function(t,e){return t===e?(U=!0,0):0},W=typeof e,X=1<<31,Q={}.hasOwnProperty,K=[],Y=K.pop,Z=K.push,te=K.push,ee=K.slice,ne=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oe="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=re.replace("w","w#"),le="\\["+oe+"*("+re+")"+oe+"*(?:([*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+oe+"*\\]",ce=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+le.replace(3,8)+")*)|.*)\\)|)",ue=RegExp("^"+oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oe+"+$","g"),he=RegExp("^"+oe+"*,"+oe+"*"),pe=RegExp("^"+oe+"*([>+~]|"+oe+")"+oe+"*"),me=RegExp(oe+"*[+~]"),fe=RegExp("="+oe+"*([^\\]'\"]*)"+oe+"*\\]","g"),de=RegExp(ce),ye=RegExp("^"+ae+"$"),_e={ID:RegExp("^#("+re+")"),CLASS:RegExp("^\\.("+re+")"),TAG:RegExp("^("+re.replace("w","w*")+")"),ATTR:RegExp("^"+le),PSEUDO:RegExp("^"+ce),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oe+"*(even|odd|(([+-]|)(\\d*)n|)"+oe+"*(?:([+-]|)"+oe+"*(\\d+)|))"+oe+"*\\)|)","i"),bool:RegExp("^(?:"+ie+")$","i"),needsContext:RegExp("^"+oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oe+"*((?:-\\d)?\\d*)"+oe+"*\\)|)(?=[^-]|$)","i")},ge=/^[^{]+\{\s*\[native \w/,xe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/^(?:input|select|textarea|button)$/i,be=/^h\d$/i,we=/'|\\/g,Ce=RegExp("\\\\([\\da-f]{1,6}"+oe+"?|("+oe+")|.)","ig"),Se=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{te.apply(K=ee.call(F.childNodes),F.childNodes),K[F.childNodes.length].nodeType}catch(Ae){te={apply:K.length?function(t,e){Z.apply(t,ee.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}B=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},C=n.support={},M=n.setDocument=function(t){var n=t?t.ownerDocument||t:F,i=n.defaultView;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,I=n.documentElement,j=!B(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){M()}),C.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),C.getById=s(function(t){return I.appendChild(t).id=O,!n.getElementsByName||!n.getElementsByName(O).length}),C.getById?(A.find.ID=function(t,e){if(typeof e.getElementById!==W&&j){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},A.filter.ID=function(t){var e=t.replace(Ce,Se);return function(t){return t.getAttribute("id")===e}}):(delete A.find.ID,A.filter.ID=function(t){var e=t.replace(Ce,Se);return function(t){var n=typeof t.getAttributeNode!==W&&t.getAttributeNode("id");return n&&n.value===e}}),A.find.TAG=C.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==W?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[o++];)1===n.nodeType&&i.push(n);return i}return s},A.find.CLASS=C.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==W&&j?n.getElementsByClassName(t):e},V=[],P=[],(C.qsa=ge.test(n.querySelectorAll))&&(s(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||P.push("\\["+oe+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&P.push("[*^$]="+oe+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(C.matchesSelector=ge.test(R=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&s(function(t){C.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),V.push("!=",ce)}),P=P.length&&RegExp(P.join("|")),V=V.length&&RegExp(V.join("|")),N=ge.test(I.contains)||I.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=I.compareDocumentPosition?function(t,e){if(t===e)return U=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!C.sortDetached&&e.compareDocumentPosition(t)===i?t===n||N(F,t)?-1:e===n||N(F,e)?1:T?ne.call(T,t)-ne.call(T,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,o=0,s=t.parentNode,r=e.parentNode,l=[t],c=[e];if(t===e)return U=!0,0;if(!s||!r)return t===n?-1:e===n?1:s?-1:r?1:T?ne.call(T,t)-ne.call(T,e):0;if(s===r)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===F?-1:c[o]===F?1:0},n):L},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==L&&M(t),e=e.replace(fe,"='$1']"),!(!C.matchesSelector||!j||V&&V.test(e)||P&&P.test(e)))try{var i=R.call(t,e);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return n(e,L,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==L&&M(t),N(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==L&&M(t);var i=A.attrHandle[n.toLowerCase()],o=i&&Q.call(A.attrHandle,n.toLowerCase())?i(t,n,!j):e;return o===e?C.attributes||!j?t.getAttribute(n):(o=t.getAttributeNode(n))&&o.specified?o.value:null:o},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,o=0;if(U=!C.detectDuplicates,T=!C.sortStable&&t.slice(0),t.sort($),U){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return t},D=n.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=D(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i];i++)n+=D(e);return n},A=n.selectors={cacheLength:50,createPseudo:o,match:_e,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,Se),t[3]=(t[4]||t[5]||"").replace(Ce,Se),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return _e.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&de.test(i)&&(n=p(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,Se).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=RegExp("(^|"+oe+")"+t+"("+oe+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==W&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(o){var s=n.attr(o,t);return null==s?"!="===e:e?(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,p,m,f,d=s!==r?"nextSibling":"previousSibling",y=e.parentNode,_=a&&e.nodeName.toLowerCase(),g=!l&&!a;if(y){if(s){for(;d;){for(h=e;h=h[d];)if(a?h.nodeName.toLowerCase()===_:1===h.nodeType)return!1;f=d="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?y.firstChild:y.lastChild],r&&g){for(u=y[O]||(y[O]={}),c=u[t]||[],m=c[0]===G&&c[1],p=c[0]===G&&c[2],h=m&&y.childNodes[m];h=++m&&h&&h[d]||(p=m=0)||f.pop();)if(1===h.nodeType&&++p&&h===e){u[t]=[G,m,p];break}}else if(g&&(c=(e[O]||(e[O]={}))[t])&&c[0]===G)p=c[1];else for(;(h=++m&&h&&h[d]||(p=m=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==_:1!==h.nodeType)||!++p||(g&&((h[O]||(h[O]={}))[t]=[G,p]),h!==e)););return p-=o,p===i||0===p%i&&p/i>=0}}},PSEUDO:function(t,e){var i,s=A.pseudos[t]||A.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return s[O]?s(e):s.length>1?(i=[t,t,"",e],A.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,n){for(var i,o=s(t,e),r=o.length;r--;)i=ne.call(t,o[r]),t[i]=!(n[i]=o[r])}):function(t){return s(t,0,i)}):s}},pseudos:{not:o(function(t){var e=[],n=[],i=E(t.replace(ue,"$1"));return i[O]?o(function(t,e,n,o){for(var s,r=i(t,null,o,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,o,s){return e[0]=t,i(e,null,s,n),!n.pop()}}),has:o(function(t){return function(e){return n(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||D(e)).indexOf(t)>-1}}),lang:o(function(t){return ye.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(Ce,Se).toLowerCase(),function(e){var n;do if(n=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0
},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!A.pseudos.empty(t)},header:function(t){return be.test(t.nodeName)},input:function(t){return ve.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},A.pseudos.nth=A.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})A.pseudos[w]=l(w);for(w in{submit:!0,reset:!0})A.pseudos[w]=c(w);h.prototype=A.filters=A.pseudos,A.setFilters=new h,E=n.compile=function(t,e){var n,i=[],o=[],s=z[t+" "];if(!s){for(e||(e=p(t)),n=e.length;n--;)s=g(e[n]),s[O]?i.push(s):o.push(s);s=z(t,x(o,i))}return s},C.sortStable=O.split("").sort($).join("")===O,C.detectDuplicates=U,M(),C.sortDetached=s(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,n,i){return i?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),C.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,n,i){return i||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(ie,function(t,n,i){var o;return i?e:(o=t.getAttributeNode(n))&&o.specified?o.value:t[n]===!0?n.toLowerCase():null}),se.find=n,se.expr=n.selectors,se.expr[":"]=se.expr.pseudos,se.unique=n.uniqueSort,se.text=n.getText,se.isXMLDoc=n.isXML,se.contains=n.contains}(t);var fe={};se.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):se.extend({},t);var n,o,s,r,a,l,c=[],u=!t.once&&[],h=function(e){for(n=t.memory&&e,o=!0,l=r||0,r=0,a=c.length,s=!0;c&&a>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}s=!1,c&&(u?u.length&&h(u.shift()):n?c=[]:p.disable())},p={add:function(){if(c){var e=c.length;(function i(e){se.each(e,function(e,n){var o=se.type(n);"function"===o?t.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})})(arguments),s?a=c.length:n&&(r=e,h(n))}return this},remove:function(){return c&&se.each(arguments,function(t,e){for(var n;(n=se.inArray(e,c,n))>-1;)c.splice(n,1),s&&(a>=n&&a--,l>=n&&l--)}),this},has:function(t){return t?se.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=n=e,this},disabled:function(){return!c},lock:function(){return u=e,n||p.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||o&&!u||(e=e||[],e=[t,e.slice?e.slice():e],s?u.push(e):h(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},se.extend({Deferred:function(t){var e=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return se.Deferred(function(n){se.each(e,function(e,s){var r=s[0],a=se.isFunction(t[e])&&t[e];o[s[1]](function(){var t=a&&a.apply(this,arguments);t&&se.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?se.extend(t,i):i}},o={};return i.pipe=i.then,se.each(e,function(t,s){var r=s[2],a=s[3];i[s[1]]=r.add,a&&r.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?i:this,arguments),this},o[s[0]+"With"]=r.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,s=te.call(arguments),r=s.length,a=1!==r||t&&se.isFunction(t.promise)?r:0,l=1===a?t:se.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?te.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(r>1)for(e=Array(r),n=Array(r),i=Array(r);r>o;o++)s[o]&&se.isFunction(s[o].promise)?s[o].promise().done(c(o,i,s)).fail(l.reject).progress(c(o,n,e)):--a;return a||l.resolveWith(i,s),l.promise()}}),se.support=function(e){var n=z.createElement("input"),i=z.createDocumentFragment(),o=z.createElement("div"),s=z.createElement("select"),r=s.appendChild(z.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=r.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!r.disabled,n=z.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===o.style.backgroundClip,se(function(){var n,i,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r=z.getElementsByTagName("body")[0];r&&(n=z.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(n).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",se.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===o.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(o,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(o,null)||{width:"4px"}).width,i=o.appendChild(z.createElement("div")),i.style.cssText=o.style.cssText=s,i.style.marginRight=i.style.width="0",o.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),r.removeChild(n))}),e):e}({});var de,ye,_e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ge=/([A-Z])/g;o.uid=1,o.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=o.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,se.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,o=this.key(t),s=this.cache[o];if("string"==typeof e)s[e]=n;else if(se.isEmptyObject(s))se.extend(this.cache[o],e);else for(i in e)s[i]=e[i];return s},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var o;return n===e||n&&"string"==typeof n&&i===e?(o=this.get(t,n),o!==e?o:this.get(t,se.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,o,s,r=this.key(t),a=this.cache[r];if(n===e)this.cache[r]={};else{se.isArray(n)?o=n.concat(n.map(se.camelCase)):(s=se.camelCase(n),n in a?o=[n,s]:(o=s,o=o in a?[o]:o.match(ae)||[])),i=o.length;for(;i--;)delete a[o[i]]}},hasData:function(t){return!se.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},de=new o,ye=new o,se.extend({acceptData:o.accepts,hasData:function(t){return de.hasData(t)||ye.hasData(t)},data:function(t,e,n){return de.access(t,e,n)},removeData:function(t,e){de.remove(t,e)},_data:function(t,e,n){return ye.access(t,e,n)},_removeData:function(t,e){ye.remove(t,e)}}),se.fn.extend({data:function(t,n){var i,o,r=this[0],a=0,l=null;if(t===e){if(this.length&&(l=de.get(r),1===r.nodeType&&!ye.get(r,"hasDataAttrs"))){for(i=r.attributes;i.length>a;a++)o=i[a].name,0===o.indexOf("data-")&&(o=se.camelCase(o.slice(5)),s(r,o,l[o]));ye.set(r,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){de.set(this,t)}):se.access(this,function(n){var i,o=se.camelCase(t);if(r&&n===e){if(i=de.get(r,t),i!==e)return i;if(i=de.get(r,o),i!==e)return i;if(i=s(r,o,e),i!==e)return i}else this.each(function(){var i=de.get(this,o);de.set(this,o,n),-1!==t.indexOf("-")&&i!==e&&de.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){de.remove(this,t)})}}),se.extend({queue:function(t,n,i){var o;return t?(n=(n||"fx")+"queue",o=ye.get(t,n),i&&(!o||se.isArray(i)?o=ye.access(t,n,se.makeArray(i)):o.push(i)),o||[]):e},dequeue:function(t,e){e=e||"fx";var n=se.queue(t,e),i=n.length,o=n.shift(),s=se._queueHooks(t,e),r=function(){se.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ye.get(t,n)||ye.access(t,n,{empty:se.Callbacks("once memory").add(function(){ye.remove(t,[e+"queue",n])})})}}),se.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?se.queue(this[0],t):n===e?this:this.each(function(){var e=se.queue(this,t,n);se._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&se.dequeue(this,t)})},dequeue:function(t){return this.each(function(){se.dequeue(this,t)})},delay:function(t,e){return t=se.fx?se.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,o=1,s=se.Deferred(),r=this,a=this.length,l=function(){--o||s.resolveWith(r,[r])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=ye.get(r[a],t+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),s.promise(n)}});var xe,ve,be=/[\t\r\n\f]/g,we=/\r/g,Ce=/^(?:input|select|textarea|button)$/i;se.fn.extend({attr:function(t,e){return se.access(this,se.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){se.removeAttr(this,t)})},prop:function(t,e){return se.access(this,se.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[se.propFix[t]||t]})},addClass:function(t){var e,n,i,o,s,r=0,a=this.length,l="string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(be," "):" ")){for(s=0;o=e[s++];)0>i.indexOf(" "+o+" ")&&(i+=o+" ");n.className=se.trim(i)}return this},removeClass:function(t){var e,n,i,o,s,r=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(se.isFunction(t))return this.each(function(e){se(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(be," "):"")){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=t?se.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):se.isFunction(t)?this.each(function(n){se(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=se(this),s=t.match(ae)||[];e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===q||"boolean"===n)&&(this.className&&ye.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ye.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(be," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,o,s=this[0];{if(arguments.length)return o=se.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=o?t.call(this,i,se(this).val()):t,null==s?s="":"number"==typeof s?s+="":se.isArray(s)&&(s=se.map(s,function(t){return null==t?"":t+""})),n=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==e||(this.value=s))});if(s)return n=se.valHooks[s.type]||se.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==e?i:(i=s.value,"string"==typeof i?i.replace(we,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,s="select-one"===t.type||0>o,r=s?null:[],a=s?o+1:i.length,l=0>o?a:s?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(se.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&se.nodeName(n.parentNode,"optgroup"))){if(e=se(n).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,s=se.makeArray(e),r=o.length;r--;)i=o[r],(i.selected=se.inArray(se(i).val(),s)>=0)&&(n=!0);return n||(t.selectedIndex=-1),s}}},attr:function(t,n,i){var o,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===q?se.prop(t,n,i):(1===r&&se.isXMLDoc(t)||(n=n.toLowerCase(),o=se.attrHooks[n]||(se.expr.match.bool.test(n)?ve:xe)),i===e?o&&"get"in o&&null!==(s=o.get(t,n))?s:(s=se.find.attr(t,n),null==s?e:s):null!==i?o&&"set"in o&&(s=o.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(se.removeAttr(t,n),e))},removeAttr:function(t,e){var n,i,o=0,s=e&&e.match(ae);if(s&&1===t.nodeType)for(;n=s[o++];)i=se.propFix[n]||n,se.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!se.support.radioValue&&"radio"===e&&se.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var o,s,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!se.isXMLDoc(t),r&&(n=se.propFix[n]||n,s=se.propHooks[n]),i!==e?s&&"set"in s&&(o=s.set(t,i,n))!==e?o:t[n]=i:s&&"get"in s&&null!==(o=s.get(t,n))?o:t[n]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Ce.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),ve={set:function(t,e,n){return e===!1?se.removeAttr(t,n):t.setAttribute(n,n),n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(t,n){var i=se.expr.attrHandle[n]||se.find.attr;se.expr.attrHandle[n]=function(t,n,o){var s=se.expr.attrHandle[n],r=o?e:(se.expr.attrHandle[n]=e)!=i(t,n,o)?n.toLowerCase():null;return se.expr.attrHandle[n]=s,r}}),se.support.optSelected||(se.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(t,n){return se.isArray(n)?t.checked=se.inArray(se(t).val(),n)>=0:e}},se.support.checkOn||(se.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Se=/^key/,Ae=/^(?:mouse|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Be=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(t,n,i,o,s){var r,a,l,c,u,h,p,m,f,d,y,_=ye.get(t);if(_){for(i.handler&&(r=i,i=r.handler,s=r.selector),i.guid||(i.guid=se.guid++),(c=_.events)||(c=_.events={}),(a=_.handle)||(a=_.handle=function(t){return typeof se===q||t&&se.event.triggered===t.type?e:se.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],u=n.length;u--;)l=Be.exec(n[u])||[],f=y=l[1],d=(l[2]||"").split(".").sort(),f&&(p=se.event.special[f]||{},f=(s?p.delegateType:p.bindType)||f,p=se.event.special[f]||{},h=se.extend({type:f,origType:y,data:o,handler:i,guid:i.guid,selector:s,needsContext:s&&se.expr.match.needsContext.test(s),namespace:d.join(".")},r),(m=c[f])||(m=c[f]=[],m.delegateCount=0,p.setup&&p.setup.call(t,o,d,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),p.add&&(p.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),s?m.splice(m.delegateCount++,0,h):m.push(h),se.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var s,r,a,l,c,u,h,p,m,f,d,y=ye.hasData(t)&&ye.get(t);if(y&&(l=y.events)){for(e=(e||"").match(ae)||[""],c=e.length;c--;)if(a=Be.exec(e[c])||[],m=d=a[1],f=(a[2]||"").split(".").sort(),m){for(h=se.event.special[m]||{},m=(i?h.delegateType:h.bindType)||m,p=l[m]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=p.length;s--;)u=p[s],!o&&d!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(s,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(t,u));r&&!p.length&&(h.teardown&&h.teardown.call(t,f,y.handle)!==!1||se.removeEvent(t,m,y.handle),delete l[m])}else for(m in l)se.event.remove(t,m+e[c],n,i,!0);se.isEmptyObject(l)&&(delete y.handle,ye.remove(t,"events"))}},trigger:function(n,i,o,s){var r,a,l,c,u,h,p,m=[o||z],f=ie.call(n,"type")?n.type:n,d=ie.call(n,"namespace")?n.namespace.split("."):[];if(a=l=o=o||z,3!==o.nodeType&&8!==o.nodeType&&!De.test(f+se.event.triggered)&&(f.indexOf(".")>=0&&(d=f.split("."),f=d.shift(),d.sort()),u=0>f.indexOf(":")&&"on"+f,n=n[se.expando]?n:new se.Event(f,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=d.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=o),i=null==i?[n]:se.makeArray(i,[n]),p=se.event.special[f]||{},s||!p.trigger||p.trigger.apply(o,i)!==!1)){if(!s&&!p.noBubble&&!se.isWindow(o)){for(c=p.delegateType||f,De.test(c+f)||(a=a.parentNode);a;a=a.parentNode)m.push(a),l=a;l===(o.ownerDocument||z)&&m.push(l.defaultView||l.parentWindow||t)}for(r=0;(a=m[r++])&&!n.isPropagationStopped();)n.type=r>1?c:p.bindType||f,h=(ye.get(a,"events")||{})[n.type]&&ye.get(a,"handle"),h&&h.apply(a,i),h=u&&a[u],h&&se.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=f,s||n.isDefaultPrevented()||p._default&&p._default.apply(m.pop(),i)!==!1||!se.acceptData(o)||u&&se.isFunction(o[f])&&!se.isWindow(o)&&(l=o[u],l&&(o[u]=null),se.event.triggered=f,o[f](),se.event.triggered=e,l&&(o[u]=l)),n.result}},dispatch:function(t){t=se.event.fix(t);var n,i,o,s,r,a=[],l=te.call(arguments),c=(ye.get(this,"events")||{})[t.type]||[],u=se.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=se.event.handlers.call(this,t,c),n=0;(s=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,o=((se.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l),o!==e&&(t.result=o)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,o,s,r,a=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(o=[],i=0;l>i;i++)r=n[i],s=r.selector+" ",o[s]===e&&(o[s]=r.needsContext?se(s,this).index(c)>=0:se.find(s,this,null,[c]).length),o[s]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,o,s,r=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||z,o=i.documentElement,s=i.body,t.pageX=n.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),t.pageY=n.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)),t.which||r===e||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[se.expando])return t;var e,n,i,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Ae.test(o)?this.mouseHooks:Se.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,t=new se.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=z),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&se.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return se.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=se.extend(new se.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?se.event.trigger(o,null,e):se.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},se.Event=function(t,n){return this instanceof se.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?r:a):this.type=t,n&&se.extend(this,n),this.timeStamp=t&&t.timeStamp||se.now(),this[se.expando]=!0,e):new se.Event(t,n)},se.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=r,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=r,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){se.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==i&&!se.contains(i,o))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),se.support.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){se.event.simulate(e,t.target,se.event.fix(t),!0)};se.event.special[e]={setup:function(){0===n++&&z.addEventListener(t,i,!0)},teardown:function(){0===--n&&z.removeEventListener(t,i,!0)}}}),se.fn.extend({on:function(t,n,i,o,s){var r,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],s);return this}if(null==i&&null==o?(o=n,i=n=e):null==o&&("string"==typeof n?(o=i,i=e):(o=i,i=n,n=e)),o===!1)o=a;else if(!o)return this;return 1===s&&(r=o,o=function(t){return se().off(t),r.apply(this,arguments)},o.guid=r.guid||(r.guid=se.guid++)),this.each(function(){se.event.add(this,t,o,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var o,s;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,se(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(s in t)this.off(s,n,t[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=a),this.each(function(){se.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){se.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?se.event.trigger(t,n,i,!0):e}});var Ee=/^.[^:#\[\.,]*$/,ke=/^(?:parents|prev(?:Until|All))/,Te=se.expr.match.needsContext,Me={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(se(t).filter(function(){for(e=0;o>e;e++)if(se.contains(i[e],this))return!0}));for(e=0;o>e;e++)se.find(t,i[e],n);return n=this.pushStack(o>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=se(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(se.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(u(this,t||[],!0))},filter:function(t){return this.pushStack(u(this,t||[],!1))},is:function(t){return!!u(this,"string"==typeof t&&Te.test(t)?se(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,o=this.length,s=[],r=Te.test(t)||"string"!=typeof t?se(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(r?r.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,t))){n=s.push(n);break}return this.pushStack(s.length>1?se.unique(s):s)},index:function(t){return t?"string"==typeof t?ee.call(se(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?se(t,e):se.makeArray(t&&t.nodeType?[t]:t),i=se.merge(this.get(),n);return this.pushStack(se.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),se.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se.dir(t,"parentNode")},parentsUntil:function(t,e,n){return se.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return se.dir(t,"nextSibling")},prevAll:function(t){return se.dir(t,"previousSibling")},nextUntil:function(t,e,n){return se.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return se.dir(t,"previousSibling",n)},siblings:function(t){return se.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return se.sibling(t.firstChild)},contents:function(t){return t.contentDocument||se.merge([],t.childNodes)}},function(t,e){se.fn[t]=function(n,i){var o=se.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=se.filter(i,o)),this.length>1&&(Me[t]||se.unique(o),ke.test(t)&&o.reverse()),this.pushStack(o)}}),se.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?se.find.matchesSelector(i,t)?[i]:[]:se.find.matches(t,se.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var o=[],s=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&se(t).is(i))break;o.push(t)}return o},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie=/<([\w:]+)/,je=/<|&#?\w+;/,Pe=/<(?:script|style|link)/i,Ve=/^(?:checkbox|radio)$/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,se.fn.extend({text:function(t){return se.access(this,function(t){return t===e?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?se.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||se.cleanData(y(n)),n.parentNode&&(e&&se.contains(n.ownerDocument,n)&&f(y(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(se.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return se.clone(this,t,e)})},html:function(t){return se.access(this,function(t){var n=this[0]||{},i=0,o=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Pe.test(t)&&!Ge[(Ie.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Le,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(se.cleanData(y(n,!1)),n.innerHTML=t);n=0}catch(s){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=se.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],o=t[e++];o&&(i&&i.parentNode!==o&&(i=this.nextSibling),se(this).remove(),o.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=Y.apply([],t);var i,o,s,r,a,l,c=0,u=this.length,h=this,f=u-1,d=t[0],_=se.isFunction(d);if(_||!(1>=u||"string"!=typeof d||se.support.checkClone)&&Re.test(d))return this.each(function(i){var o=h.eq(i);_&&(t[0]=d.call(this,i,o.html())),o.domManip(t,e,n)});if(u&&(i=se.buildFragment(t,this[0].ownerDocument,!1,!n&&this),o=i.firstChild,1===i.childNodes.length&&(i=o),o)){for(s=se.map(y(i,"script"),p),r=s.length;u>c;c++)a=i,c!==f&&(a=se.clone(a,!0,!0),r&&se.merge(s,y(a,"script"))),e.call(this[c],a,c);if(r)for(l=s[s.length-1].ownerDocument,se.map(s,m),c=0;r>c;c++)a=s[c],Ne.test(a.type||"")&&!ye.access(a,"globalEval")&&se.contains(l,a)&&(a.src?se._evalUrl(a.src):se.globalEval(a.textContent.replace(Fe,"")))}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){se.fn[t]=function(t){for(var n,i=[],o=se(t),s=o.length-1,r=0;s>=r;r++)n=r===s?this:this.clone(!0),se(o[r])[e](n),Z.apply(i,n.get());return this.pushStack(i)}}),se.extend({clone:function(t,e,n){var i,o,s,r,a=t.cloneNode(!0),l=se.contains(t.ownerDocument,t);if(!(se.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||se.isXMLDoc(t)))for(r=y(a),s=y(t),i=0,o=s.length;o>i;i++)_(s[i],r[i]);if(e)if(n)for(s=s||y(t),r=r||y(a),i=0,o=s.length;o>i;i++)d(s[i],r[i]);else d(t,a);return r=y(a,"script"),r.length>0&&f(r,!l&&y(t,"script")),a},buildFragment:function(t,e,n,i){for(var o,s,r,a,l,c,u=0,h=t.length,p=e.createDocumentFragment(),m=[];h>u;u++)if(o=t[u],o||0===o)if("object"===se.type(o))se.merge(m,o.nodeType?[o]:o);else if(je.test(o)){for(s=s||p.appendChild(e.createElement("div")),r=(Ie.exec(o)||["",""])[1].toLowerCase(),a=Ge[r]||Ge._default,s.innerHTML=a[1]+o.replace(Le,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;se.merge(m,s.childNodes),s=p.firstChild,s.textContent=""}else m.push(e.createTextNode(o));for(p.textContent="",u=0;o=m[u++];)if((!i||-1===se.inArray(o,i))&&(l=se.contains(o.ownerDocument,o),s=y(p.appendChild(o),"script"),l&&f(s),n))for(c=0;o=s[c++];)Ne.test(o.type||"")&&n.push(o);return p},cleanData:function(t){for(var n,i,s,r,a,l,c=se.event.special,u=0;(i=t[u])!==e;u++){if(o.accepts(i)&&(a=i[ye.expando],a&&(n=ye.cache[a]))){if(s=Object.keys(n.events||{}),s.length)for(l=0;(r=s[l])!==e;l++)c[r]?se.event.remove(i,r):se.removeEvent(i,r,n.handle);ye.cache[a]&&delete ye.cache[a]}delete de.cache[i[de.expando]]}},_evalUrl:function(t){return se.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),se.fn.extend({wrapAll:function(t){var e;return se.isFunction(t)?this.each(function(e){se(this).wrapAll(t.call(this,e))}):(this[0]&&(e=se(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;
return t}).append(this)),this)},wrapInner:function(t){return se.isFunction(t)?this.each(function(e){se(this).wrapInner(t.call(this,e))}):this.each(function(){var e=se(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=se.isFunction(t);return this.each(function(n){se(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}});var Je,qe,He=/^(none|table(?!-c[ea]).+)/,ze=/^margin/,Ue=RegExp("^("+re+")(.*)$","i"),$e=RegExp("^("+re+")(?!px)[a-z%]+$","i"),We=RegExp("^([+-])=("+re+")","i"),Xe={BODY:"block"},Qe={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:0,fontWeight:400},Ye=["Top","Right","Bottom","Left"],Ze=["Webkit","O","Moz","ms"];se.fn.extend({css:function(t,n){return se.access(this,function(t,n,i){var o,s,r={},a=0;if(se.isArray(n)){for(o=v(t),s=n.length;s>a;a++)r[n[a]]=se.css(t,n[a],!1,o);return r}return i!==e?se.style(t,n,i):se.css(t,n)},t,n,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){x(this)?se(this).show():se(this).hide()})}}),se.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Je(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,a,l=se.camelCase(n),c=t.style;return n=se.cssProps[l]||(se.cssProps[l]=g(c,l)),a=se.cssHooks[n]||se.cssHooks[l],i===e?a&&"get"in a&&(s=a.get(t,!1,o))!==e?s:c[n]:(r=typeof i,"string"===r&&(s=We.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(se.css(t,n)),r="number"),null==i||"number"===r&&isNaN(i)||("number"!==r||se.cssNumber[l]||(i+="px"),se.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,o))===e||(c[n]=i)),e)}},css:function(t,n,i,o){var s,r,a,l=se.camelCase(n);return n=se.cssProps[l]||(se.cssProps[l]=g(t.style,l)),a=se.cssHooks[n]||se.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=Je(t,n,o)),"normal"===s&&n in Ke&&(s=Ke[n]),""===i||i?(r=parseFloat(s),i===!0||se.isNumeric(r)?r||0:s):s}}),Je=function(t,n,i){var o,s,r,a=i||v(t),l=a?a.getPropertyValue(n)||a[n]:e,c=t.style;return a&&(""!==l||se.contains(t.ownerDocument,t)||(l=se.style(t,n)),$e.test(l)&&ze.test(n)&&(o=c.width,s=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=s,c.maxWidth=r)),l},se.each(["height","width"],function(t,n){se.cssHooks[n]={get:function(t,i,o){return i?0===t.offsetWidth&&He.test(se.css(t,"display"))?se.swap(t,Qe,function(){return S(t,n,o)}):S(t,n,o):e},set:function(t,e,i){var o=i&&v(t);return w(t,e,i?C(t,n,i,se.support.boxSizing&&"border-box"===se.css(t,"boxSizing",!1,o),o):0)}}}),se(function(){se.support.reliableMarginRight||(se.cssHooks.marginRight={get:function(t,n){return n?se.swap(t,{display:"inline-block"},Je,[t,"marginRight"]):e}}),!se.support.pixelPosition&&se.fn.position&&se.each(["top","left"],function(t,n){se.cssHooks[n]={get:function(t,i){return i?(i=Je(t,n),$e.test(i)?se(t).position()[n]+"px":i):e}}})}),se.expr&&se.expr.filters&&(se.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},se.expr.filters.visible=function(t){return!se.expr.filters.hidden(t)}),se.each({margin:"",padding:"",border:"Width"},function(t,e){se.cssHooks[t+e]={expand:function(n){for(var i=0,o={},s="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Ye[i]+e]=s[i]||s[i-2]||s[0];return o}},ze.test(t)||(se.cssHooks[t+e].set=w)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,on=/^(?:submit|button|image|reset|file)$/i,sn=/^(?:input|select|textarea|keygen)/i;se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=se.prop(this,"elements");return t?se.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!se(this).is(":disabled")&&sn.test(this.nodeName)&&!on.test(t)&&(this.checked||!Ve.test(t))}).map(function(t,e){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),se.param=function(t,n){var i,o=[],s=function(t,e){e=se.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(t)||t.jquery&&!se.isPlainObject(t))se.each(t,function(){s(this.name,this.value)});else for(i in t)B(i,t[i],n,s);return o.join("&").replace(tn,"+")},se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){se.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),se.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var rn,an,ln=se.now(),cn=/\?/,un=/#.*$/,hn=/([?&])_=[^&]*/,pn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fn=/^(?:GET|HEAD)$/,dn=/^\/\//,yn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_n=se.fn.load,gn={},xn={},vn="*/".concat("*");try{an=H.href}catch(bn){an=z.createElement("a"),an.href="",an=an.href}rn=yn.exec(an.toLowerCase())||[],se.fn.load=function(t,n,i){if("string"!=typeof t&&_n)return _n.apply(this,arguments);var o,s,r,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l),t=t.slice(0,l)),se.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&se.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){r=arguments,a.html(o?se("<div>").append(se.parseHTML(t)).find(o):t)}).complete(i&&function(t,e){a.each(i,r||[t.responseText,e,t])}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){se.fn[e]=function(t){return this.on(e,t)}}),se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:mn.test(rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?T(T(t,se.ajaxSettings),e):T(se.ajaxSettings,t)},ajaxPrefilter:E(gn),ajaxTransport:E(xn),ajax:function(t,n){function i(t,n,i,a){var c,h,g,x,b,C=n;2!==v&&(v=2,l&&clearTimeout(l),o=e,r=a||"",w.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(x=M(p,w,i)),x=L(p,x,w,c),c?(p.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(se.lastModified[s]=b),b=w.getResponseHeader("etag"),b&&(se.etag[s]=b)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=x.state,h=x.data,g=x.error,c=!g)):(g=C,(t||!C)&&(C="error",0>t&&(t=0))),w.status=t,w.statusText=(n||C)+"",c?d.resolveWith(m,[h,C,w]):d.rejectWith(m,[w,C,g]),w.statusCode(_),_=e,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[w,p,c?h:g]),y.fireWith(m,[w,C]),u&&(f.trigger("ajaxComplete",[w,p]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var o,s,r,a,l,c,u,h,p=se.ajaxSetup({},n),m=p.context||p,f=p.context&&(m.nodeType||m.jquery)?se(m):se.event,d=se.Deferred(),y=se.Callbacks("once memory"),_=p.statusCode||{},g={},x={},v=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!a)for(a={};e=pn.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?r:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return v||(t=x[n]=x[n]||t,g[t]=e),this},overrideMimeType:function(t){return v||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>v)for(e in t)_[e]=[_[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return o&&o.abort(e),i(0,e),this}};if(d.promise(w).complete=y.add,w.success=w.done,w.error=w.fail,p.url=((t||p.url||an)+"").replace(un,"").replace(dn,rn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=se.trim(p.dataType||"*").toLowerCase().match(ae)||[""],null==p.crossDomain&&(c=yn.exec(p.url.toLowerCase()),p.crossDomain=!(!c||c[1]===rn[1]&&c[2]===rn[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(rn[3]||("http:"===rn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=se.param(p.data,p.traditional)),k(gn,p,n,w),2===v)return w;u=p.global,u&&0===se.active++&&se.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!fn.test(p.type),s=p.url,p.hasContent||(p.data&&(s=p.url+=(cn.test(s)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=hn.test(s)?s.replace(hn,"$1_="+ln++):s+(cn.test(s)?"&":"?")+"_="+ln++)),p.ifModified&&(se.lastModified[s]&&w.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&w.setRequestHeader("If-None-Match",se.etag[s])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+vn+"; q=0.01":""):p.accepts["*"]);for(h in p.headers)w.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(p.beforeSend.call(m,w,p)===!1||2===v))return w.abort();b="abort";for(h in{success:1,error:1,complete:1})w[h](p[h]);if(o=k(xn,p,n,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},p.timeout));try{v=1,o.send(g,i)}catch(C){if(!(2>v))throw C;i(-1,C)}}else i(-1,"No Transport");return w},getJSON:function(t,e,n){return se.get(t,e,n,"json")},getScript:function(t,n){return se.get(t,e,n,"script")}}),se.each(["get","post"],function(t,n){se[n]=function(t,i,o,s){return se.isFunction(i)&&(s=s||o,o=i,i=e),se.ajax({url:t,type:n,dataType:s,data:i,success:o})}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return se.globalEval(t),t}}}),se.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),se.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=se("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),z.head.appendChild(e[0])},abort:function(){n&&n()}}}});var wn=[],Cn=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=wn.pop()||se.expando+"_"+ln++;return this[t]=!0,t}}),se.ajaxPrefilter("json jsonp",function(n,i,o){var s,r,a,l=n.jsonp!==!1&&(Cn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Cn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=se.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Cn,"$1"+s):n.jsonp!==!1&&(n.url+=(cn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return a||se.error(s+" was not called"),a[0]},n.dataTypes[0]="json",r=t[s],t[s]=function(){a=arguments},o.always(function(){t[s]=r,n[s]&&(n.jsonpCallback=i.jsonpCallback,wn.push(s)),a&&se.isFunction(r)&&r(a[0]),a=r=e}),"script"):e}),se.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Sn=se.ajaxSettings.xhr(),An={0:200,1223:204},Dn=0,Bn={};t.ActiveXObject&&se(t).on("unload",function(){for(var t in Bn)Bn[t]();Bn=e}),se.support.cors=!!Sn&&"withCredentials"in Sn,se.support.ajax=Sn=!!Sn,se.ajaxTransport(function(t){var n;return se.support.cors||Sn&&!t.crossDomain?{send:function(i,o){var s,r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(t){return function(){n&&(delete Bn[r],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?o(a.status||404,a.statusText):o(An[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Bn[r=Dn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var En,kn,Tn=/^(?:toggle|show|hide)$/,Mn=RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),Ln=/queueHooks$/,In=[R],jn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=Mn.exec(e),s=o&&o[3]||(se.cssNumber[t]?"":"px"),r=(se.cssNumber[t]||"px"!==s&&+i)&&Mn.exec(se.css(n.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+i||1;do a=a||".5",r/=a,se.style(n.elem,t,r+s);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(r=n.start=+r||+i||0,n.unit=s,n.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),n}]};se.Animation=se.extend(P,{tweener:function(t,e){se.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],jn[n]=jn[n]||[],jn[n].unshift(e)},prefilter:function(t,e){e?In.unshift(t):In.push(t)}}),se.Tween=N,N.prototype={constructor:N,init:function(t,e,n,i,o,s){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(se.cssNumber[n]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,n=N.propHooks[this.prop];return this.pos=e=this.options.duration?se.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=se.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){se.fx.step[t.prop]?se.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[se.cssProps[t.prop]]||se.cssHooks[t.prop])?se.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},se.each(["toggle","show","hide"],function(t,e){var n=se.fn[e];se.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(O(e,!0),t,i,o)}}),se.fn.extend({fadeTo:function(t,e,n,i){return this.filter(x).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=se.isEmptyObject(t),s=se.speed(e,n,i),r=function(){var e=P(this,se.extend({},t),s);(o||ye.get(this,"finish"))&&e.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,n,i){var o=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",s=se.timers,r=ye.get(this);if(n)r[n]&&r[n].stop&&o(r[n]);else for(n in r)r[n]&&r[n].stop&&Ln.test(n)&&o(r[n]);for(n=s.length;n--;)s[n].elem!==this||null!=t&&s[n].queue!==t||(s[n].anim.stop(i),e=!1,s.splice(n,1));(e||!i)&&se.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ye.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],s=se.timers,r=i?i.length:0;for(n.finish=!0,se.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;r>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),se.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){se.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),se.speed=function(t,e,n){var i=t&&"object"==typeof t?se.extend({},t):{complete:n||!n&&e||se.isFunction(t)&&t,duration:t,easing:n&&e||e&&!se.isFunction(e)&&e};return i.duration=se.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in se.fx.speeds?se.fx.speeds[i.duration]:se.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){se.isFunction(i.old)&&i.old.call(this),i.queue&&se.dequeue(this,i.queue)},i},se.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},se.timers=[],se.fx=N.prototype.init,se.fx.tick=function(){var t,n=se.timers,i=0;for(En=se.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||se.fx.stop(),En=e},se.fx.timer=function(t){t()&&se.timers.push(t)&&se.fx.start()},se.fx.interval=13,se.fx.start=function(){kn||(kn=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(kn),kn=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fx.step={},se.expr&&se.expr.filters&&(se.expr.filters.animated=function(t){return se.grep(se.timers,function(e){return t===e.elem}).length}),se.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){se.offset.setOffset(this,t,e)});var n,i,o=this[0],s={top:0,left:0},r=o&&o.ownerDocument;if(r)return n=r.documentElement,se.contains(n,o)?(typeof o.getBoundingClientRect!==q&&(s=o.getBoundingClientRect()),i=F(r),{top:s.top+i.pageYOffset-n.clientTop,left:s.left+i.pageXOffset-n.clientLeft}):s},se.offset={setOffset:function(t,e,n){var i,o,s,r,a,l,c,u=se.css(t,"position"),h=se(t),p={};"static"===u&&(t.style.position="relative"),a=h.offset(),s=se.css(t,"top"),l=se.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,c?(i=h.position(),r=i.top,o=i.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),se.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(p.top=e.top-a.top+r),null!=e.left&&(p.left=e.left-a.left+o),"using"in e?e.using.call(t,p):h.css(p)}},se.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===se.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),se.nodeName(t[0],"html")||(i=t.offset()),i.top+=se.css(t[0],"borderTopWidth",!0),i.left+=se.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-se.css(n,"marginTop",!0),left:e.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||U;t&&!se.nodeName(t,"html")&&"static"===se.css(t,"position");)t=t.offsetParent;return t||U})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var o="pageYOffset"===i;se.fn[n]=function(s){return se.access(this,function(n,s,r){var a=F(n);return r===e?a?a[i]:n[s]:(a?a.scrollTo(o?t.pageXOffset:r,o?r:t.pageYOffset):n[s]=r,e)},n,s,arguments.length,null)}}),se.each({Height:"height",Width:"width"},function(t,n){se.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,o){se.fn[o]=function(o,s){var r=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||s===!0?"margin":"border");return se.access(this,function(n,i,o){var s;return se.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+t],s["scroll"+t],n.body["offset"+t],s["offset"+t],s["client"+t])):o===e?se.css(n,i,a):se.style(n,i,o,a)},n,r?o:e,r,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=se:"function"==typeof define&&define.amd&&define("jquery",[],function(){return se}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=se)}(window),function(){function t(t,e,n){for(var i=(n||0)-1,o=t?t.length:0;o>++i;)if(t[i]===e)return i;return-1}function e(e,n){var i=typeof n;if(e=e.cache,"boolean"==i||null==n)return e[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var o="number"==i?n:v+n;return e=(e=e[i])&&e[o],"object"==i?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?t:v+t,o=e[n]||(e[n]={});"object"==n?(o[i]||(o[i]=[])).push(t):o[i]=!0}}function i(t){return t.charCodeAt(0)}function o(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||n===d)return 1;if(i>n||i===d)return-1}return t.index-e.index}function s(t){var e=-1,i=t.length,o=t[0],s=t[i-1];if(o&&"object"==typeof o&&s&&"object"==typeof s)return!1;var r=l();r["false"]=r["null"]=r["true"]=r.undefined=!1;var a=l();for(a.array=t,a.cache=r,a.push=n;i>++e;)a.push(t[e]);return a}function r(t){return"\\"+K[t]}function a(){return y.pop()||[]}function l(){return _.pop()||{args:"",array:null,bottom:"",cache:null,configurable:!1,criteria:null,enumerable:!1,"false":!1,firstArg:"",index:0,init:"",keys:null,leading:!1,loop:"",maxWait:0,"null":!1,number:null,object:null,push:null,shadowedProps:null,string:null,top:"",trailing:!1,"true":!1,undefined:!1,useHas:!1,value:null,writable:!1}}function c(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function u(){}function h(t){t.length=0,w>y.length&&y.push(t)}function p(t){var e=t.cache;e&&p(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,w>_.length&&_.push(t)}function m(t,e,n){e||(e=0),n===d&&(n=t?t.length:0);for(var i=-1,o=n-e||0,s=Array(0>o?0:o);o>++i;)s[i]=t[e+i];return s}function f(n){function y(t){return t&&"object"==typeof t&&!oo(t)&&Mi.call(t,"__wrapped__")?t:new _(t)}function _(t,e){this.__chain__=!!e,this.__wrapped__=t}function w(t,e,n,i,o){var s=t;if(n){if(s=n(s),s!==d)return s;s=t}var r=Te(s);if(r){var l=Ri.call(s);if(!X[l]||!eo.nodeClass&&c(s))return s;var u=oo(s)}if(!r||!e)return r?u?m(s):yo({},s):s;var p=Zi[l];switch(l){case G:case J:return new p(+s);case z:case W:return new p(s);case $:return p(s.source,E.exec(s))}var f=!i;i||(i=a()),o||(o=a());for(var y=i.length;y--;)if(i[y]==t)return o[y];return s=u?p(s.length):{},u&&(Mi.call(t,"index")&&(s.index=t.index),Mi.call(t,"input")&&(s.input=t.input)),i.push(t),o.push(s),(u?fo:xo)(t,function(t,r){s[r]=w(t,e,n,i,o)}),f&&(h(i),h(o)),s}function K(t,e,n){if("function"!=typeof t)return Xn;if(e===d)return t;var i=t.__bindData__||eo.funcNames&&!t.name;if(i===d){var o=j&&ki.call(t);eo.funcNames||!o||T.test(o)||(i=!0),(eo.funcNames||!i)&&(i=!j||j.test(o),io(t,i))}if(i!==!0&&i&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,s){return t.call(e,n,i,o,s)}}return In(t,e)}function Z(t,e,n,i){for(var o=(i||0)-1,s=t?t.length:0,r=[];s>++o;){var a=t[o];a&&"object"==typeof a&&(oo(a)||me(a))?Li.apply(r,e?a:Z(a,e,n)):n||r.push(a)}return r}function ee(t,e,n,i,o,s){if(n){var r=n(t,e);if(r!==d)return!!r}if(t===e)return 0!==t||1/t==1/e;var l=typeof t,u=typeof e;if(!(t!==t||t&&Q[l]||e&&Q[u]))return!1;if(null==t||null==e)return t===e;var p=Ri.call(t),m=Ri.call(e);if(p==O&&(p=U),m==O&&(m=U),p!=m)return!1;switch(p){case G:case J:return+t==+e;case z:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case $:case W:return t==gi(e)}var f=p==F;if(!f){if(Mi.call(t,"__wrapped__ ")||Mi.call(e,"__wrapped__"))return ee(t.__wrapped__||t,e.__wrapped__||e,n,i,o,s);if(p!=U||!eo.nodeClass&&(c(t)||c(e)))return!1;var y=!eo.argsObject&&me(t)?yi:t.constructor,_=!eo.argsObject&&me(e)?yi:e.constructor;if(y!=_&&!(ke(y)&&y instanceof y&&ke(_)&&_ instanceof _))return!1}var g=!o;o||(o=a()),s||(s=a());for(var x=o.length;x--;)if(o[x]==t)return s[x]==e;var v=0;if(r=!0,o.push(t),s.push(e),f){if(x=t.length,v=e.length,r=v==t.length,!r&&!i)return r;for(;v--;){var b=x,w=e[v];if(i)for(;b--&&!(r=ee(t[b],w,n,i,o,s)););else if(!(r=ee(t[v],w,n,i,o,s)))break}return r}return go(e,function(e,a,l){return Mi.call(l,a)?(v++,r=Mi.call(t,a)&&ee(t[a],e,n,i,o,s)):d}),r&&!i&&go(t,function(t,e,n){return Mi.call(n,e)?r=--v>-1:d}),g&&(h(o),h(s)),r}function ie(t,e,n,i,o){(oo(e)?Xe:xo)(e,function(e,s){var r,a,l=e,c=t[s];if(e&&((a=oo(e))||vo(e))){for(var u=i.length;u--;)if(r=i[u]==e){c=o[u];break}if(!r){var h;n&&(l=n(c,e),(h=l!==d)&&(c=l)),h||(c=a?oo(c)?c:[]:vo(c)?c:{}),i.push(e),o.push(c),h||ie(c,e,n,i,o)}}else n&&(l=n(c,e),l===d&&(l=e)),l!==d&&(c=l);t[s]=c})}function oe(n,i,o){var r=-1,l=ue(),c=n?n.length:0,u=[],m=!i&&c>=b&&l===t,f=o||m?a():u;if(m){var d=s(f);d?(l=e,f=d):(m=!1,f=o?f:(h(f),u))}for(;c>++r;){var y=n[r],_=o?o(y,r,n):y;(i?!r||f[f.length-1]!==_:0>l(f,_))&&((o||m)&&f.push(_),u.push(y))}return m?(h(f.array),p(f)):o&&h(f),u}function se(t){return function(e,n,i){var o={};if(n=y.createCallback(n,i,3),oo(e))for(var s=-1,r=e.length;r>++s;){var a=e[s];t(o,a,n(a,s,e),e)}else fo(e,function(e,i,s){t(o,e,n(e,i,s),s)});return o}}function re(t,e,n,i,o,s){var r=1&e,a=2&e,l=4&e,c=8&e,u=16&e,h=32&e,p=t;if(!a&&!ke(t))throw new xi;u&&!n.length&&(e&=-17,u=n=!1),h&&!i.length&&(e&=-33,h=i=!1);var m=t&&t.__bindData__;if(m)return!r||1&m[1]||(m[4]=o),!r&&1&m[1]&&(e|=8),!l||4&m[1]||(m[5]=s),u&&Li.apply(m[2]||(m[2]=[]),n),h&&Li.apply(m[3]||(m[3]=[]),i),m[1]|=e,re.apply(null,m);if(!r||a||l||h||!(eo.fastBind||Fi&&u))d=function(){var m=arguments,f=r?o:this;if((l||u||h)&&(m=Qi.call(m),u&&Ni.apply(m,n),h&&Li.apply(m,i),l&&s>m.length))return e|=16,re(t,c?e:-4&e,m,null,o,s);if(a&&(t=f[p]),this instanceof d){f=le(t.prototype);var y=t.apply(f,m);return Te(y)?y:f}return t.apply(f,m)};else{if(u){var f=[o];Li.apply(f,n)}var d=u?Fi.apply(t,f):Fi.call(t,o)}return io(d,Qi.call(arguments)),d}function ae(){var t=l();t.shadowedProps=R,t.array=t.bottom=t.loop=t.top="",t.init="iterable",t.useHas=!0;for(var e,n=0;e=arguments[n];n++)for(var i in e)t[i]=e[i];var o=t.args;t.firstArg=/^[^,]+/.exec(o)[0];var s=mi("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+o+") {\n"+no(t)+"\n}");return p(t),s(K,q,bi,Mi,x,me,oo,Pe,t.keys,wi,Q,to,W,Ci,Ri)}function le(t){return Te(t)?Gi(t):{}}function ce(t){return uo[t]}function ue(){var e=(e=y.indexOf)===_n?t:e;return e}function he(t){var e,n;return!t||Ri.call(t)!=U||(e=t.constructor,ke(e)&&!(e instanceof e))||!eo.argsClass&&me(t)||!eo.nodeClass&&c(t)?!1:eo.ownLast?(go(t,function(t,e,i){return n=Mi.call(i,e),!1}),n!==!1):(go(t,function(t,e){n=e}),n===d||Mi.call(t,n))}function pe(t){return ho[t]}function me(t){return t&&"object"==typeof t?Ri.call(t)==O:!1}function fe(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=e,e=!1),w(t,e,"function"==typeof n&&K(n,i,1))}function de(t,e,n){return w(t,!0,"function"==typeof e&&K(e,n,1))}function ye(t,e,n){var i;return e=y.createCallback(e,n,3),xo(t,function(t,n,o){return e(t,n,o)?(i=n,!1):d}),i}function _e(t,e,n){var i;return e=y.createCallback(e,n,3),xe(t,function(t,n,o){return e(t,n,o)?(i=n,!1):d}),i}function ge(t,e,n){var i=[];go(t,function(t,e){i.push(e,t)});var o=i.length;for(e=K(e,n,3);o--&&e(i[o--],i[o],t)!==!1;);return t}function xe(t,e,n){var i=ro(t),o=i.length;for(e=K(e,n,3);o--;){var s=i[o];if(e(t[s],s,t)===!1)break}return t}function ve(t){var e=[];return go(t,function(t,n){ke(t)&&e.push(n)}),e.sort()}function be(t,e){return t?Mi.call(t,e):!1}function we(t){for(var e=-1,n=ro(t),i=n.length,o={};i>++e;){var s=n[e];o[t[s]]=s}return o}function Ce(t){return t===!0||t===!1||Ri.call(t)==G}function Se(t){return t?"object"==typeof t&&Ri.call(t)==J:!1}function Ae(t){return t?1===t.nodeType:!1}function De(t){var e=!0;if(!t)return e;var n=Ri.call(t),i=t.length;return n==F||n==W||(eo.argsClass?n==O:me(t))||n==U&&"number"==typeof i&&ke(t.splice)?!i:(xo(t,function(){return e=!1}),e)}function Be(t,e,n,i){return ee(t,e,"function"==typeof n&&K(n,i,2))}function Ee(t){return qi(t)&&!Hi(parseFloat(t))}function ke(t){return"function"==typeof t}function Te(t){return!(!t||!Q[typeof t])}function Me(t){return Ie(t)&&t!=+t}function Le(t){return null===t}function Ie(t){return"number"==typeof t||Ri.call(t)==z}function je(t){return t&&Q[typeof t]?Ri.call(t)==$:!1}function Pe(t){return"string"==typeof t||Ri.call(t)==W}function Ve(t){return t===d}function Re(t){var e=arguments,n=2;if(!Te(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var i=K(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(i=e[--n]);for(var o=Qi.call(arguments,1,n),s=-1,r=a(),l=a();n>++s;)ie(t,o[s],i,r,l);return h(r),h(l),t}function Ne(t,e,n){var i=ue(),o="function"==typeof e,s={};if(o)e=y.createCallback(e,n,3);else var r=Z(arguments,!0,!1,1);return go(t,function(t,n,a){(o?!e(t,n,a):0>i(r,n))&&(s[n]=t)}),s}function Oe(t){for(var e=-1,n=ro(t),i=n.length,o=ci(i);i>++e;){var s=n[e];o[e]=[s,t[s]]}return o}function Fe(t,e,n){var i={};if("function"!=typeof e)for(var o=-1,s=Z(arguments,!0,!1,1),r=Te(t)?s.length:0;r>++o;){var a=s[o];a in t&&(i[a]=t[a])}else e=y.createCallback(e,n,3),go(t,function(t,n,o){e(t,n,o)&&(i[n]=t)});return i}function Ge(t,e,n,i){var o=oo(t);if(e=K(e,i,4),null==n)if(o)n=[];else{var s=t&&t.constructor,r=s&&s.prototype;n=le(r)}return(o?fo:xo)(t,function(t,i,o){return e(n,t,i,o)}),n}function Je(t){for(var e=-1,n=ro(t),i=n.length,o=ci(i);i>++e;)o[e]=t[n[e]];return o}function qe(t){var e=arguments,n=-1,i=Z(e,!0,!1,1),o=e[2]&&e[2][e[1]]===t?1:i.length,s=ci(o);for(eo.unindexedChars&&Pe(t)&&(t=t.split(""));o>++n;)s[n]=t[i[n]];return s}function He(t,e,n){var i=-1,o=ue(),s=t?t.length:0,r=!1;return n=(0>n?Ui(0,s+n):n)||0,oo(t)?r=o(t,e,n)>-1:"number"==typeof s?r=(Pe(t)?t.indexOf(e,n):o(t,e,n))>-1:fo(t,function(t){return++i>=n?!(r=t===e):d}),r}function ze(t,e,n){var i=!0;if(e=y.createCallback(e,n,3),oo(t))for(var o=-1,s=t.length;s>++o&&(i=!!e(t[o],o,t)););else fo(t,function(t,n,o){return i=!!e(t,n,o)});return i}function Ue(t,e,n){var i=[];if(e=y.createCallback(e,n,3),oo(t))for(var o=-1,s=t.length;s>++o;){var r=t[o];e(r,o,t)&&i.push(r)}else fo(t,function(t,n,o){e(t,n,o)&&i.push(t)});return i}function $e(t,e,n){if(e=y.createCallback(e,n,3),!oo(t)){var i;return fo(t,function(t,n,o){return e(t,n,o)?(i=t,!1):d}),i}for(var o=-1,s=t.length;s>++o;){var r=t[o];if(e(r,o,t))return r}}function We(t,e,n){var i;return e=y.createCallback(e,n,3),Qe(t,function(t,n,o){return e(t,n,o)?(i=t,!1):d}),i}function Xe(t,e,n){if(e&&n===d&&oo(t))for(var i=-1,o=t.length;o>++i&&e(t[i],i,t)!==!1;);else fo(t,e,n);return t}function Qe(t,e,n){var i=t,o=t?t.length:0;if(e=e&&n===d?e:K(e,n,3),oo(t))for(;o--&&e(t[o],o,t)!==!1;);else{if("number"!=typeof o){var s=ro(t);o=s.length}else eo.unindexedChars&&Pe(t)&&(i=t.split(""));fo(t,function(t,n,r){return n=s?s[--o]:--o,e(i[n],n,r)})}return t}function Ke(t,e){var n=Qi.call(arguments,2),i=-1,o="function"==typeof e,s=t?t.length:0,r=ci("number"==typeof s?s:0);return Xe(t,function(t){r[++i]=(o?e:t[e]).apply(t,n)}),r}function Ye(t,e,n){var i=-1,o=t?t.length:0,s=ci("number"==typeof o?o:0);if(e=y.createCallback(e,n,3),oo(t))for(;o>++i;)s[i]=e(t[i],i,t);else fo(t,function(t,n,o){s[++i]=e(t,n,o)});return s}function Ze(t,e,n){var o=-1/0,s=o;if(!e&&oo(t))for(var r=-1,a=t.length;a>++r;){var l=t[r];l>s&&(s=l)}else e=!e&&Pe(t)?i:y.createCallback(e,n,3),fo(t,function(t,n,i){var r=e(t,n,i);r>o&&(o=r,s=t)});return s}function tn(t,e,n){var o=1/0,s=o;if(!e&&oo(t))for(var r=-1,a=t.length;a>++r;){var l=t[r];s>l&&(s=l)}else e=!e&&Pe(t)?i:y.createCallback(e,n,3),fo(t,function(t,n,i){var r=e(t,n,i);o>r&&(o=r,s=t)});return s}function en(t,e,n,i){var o=3>arguments.length;if(e=K(e,i,4),oo(t)){var s=-1,r=t.length;for(o&&(n=t[++s]);r>++s;)n=e(n,t[s],s,t)}else fo(t,function(t,i,s){n=o?(o=!1,t):e(n,t,i,s)});return n}function nn(t,e,n,i){var o=3>arguments.length;return e=K(e,i,4),Qe(t,function(t,i,s){n=o?(o=!1,t):e(n,t,i,s)
}),n}function on(t,e,n){return e=y.createCallback(e,n,3),Ue(t,function(t,n,i){return!e(t,n,i)})}function sn(t,e,n){var i=t?t.length:0;if("number"!=typeof i?t=Je(t):eo.unindexedChars&&Pe(t)&&(t=t.split("")),null==e||n)return t?t[Yn(i-1)]:d;var o=rn(t);return o.length=$i(Ui(0,e),o.length),o}function rn(t){var e=-1,n=t?t.length:0,i=ci("number"==typeof n?n:0);return Xe(t,function(t){var n=Yn(++e);i[e]=i[n],i[n]=t}),i}function an(t){var e=t?t.length:0;return"number"==typeof e?e:ro(t).length}function ln(t,e,n){var i;if(e=y.createCallback(e,n,3),oo(t))for(var o=-1,s=t.length;s>++o&&!(i=e(t[o],o,t)););else fo(t,function(t,n,o){return!(i=e(t,n,o))});return!!i}function cn(t,e,n){var i=-1,s=t?t.length:0,r=ci("number"==typeof s?s:0);for(e=y.createCallback(e,n,3),Xe(t,function(t,n,o){var s=r[++i]=l();s.criteria=e(t,n,o),s.index=i,s.value=t}),s=r.length,r.sort(o);s--;){var a=r[s];r[s]=a.value,p(a)}return r}function un(t){return t&&"number"==typeof t.length?eo.unindexedChars&&Pe(t)?t.split(""):m(t):Je(t)}function hn(t){for(var e=-1,n=t?t.length:0,i=[];n>++e;){var o=t[e];o&&i.push(o)}return i}function pn(n){var i=-1,o=ue(),r=n?n.length:0,a=Z(arguments,!0,!0,1),l=[],c=r>=b&&o===t;if(c){var u=s(a);u?(o=e,a=u):c=!1}for(;r>++i;){var h=n[i];0>o(a,h)&&l.push(h)}return c&&p(a),l}function mn(t,e,n){var i=-1,o=t?t.length:0;for(e=y.createCallback(e,n,3);o>++i;)if(e(t[i],i,t))return i;return-1}function fn(t,e,n){var i=t?t.length:0;for(e=y.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1}function dn(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=-1;for(e=y.createCallback(e,n,3);o>++s&&e(t[s],s,t);)i++}else if(i=e,null==i||n)return t?t[0]:d;return m(t,0,$i(Ui(0,i),o))}function yn(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=i&&i[e]===t?null:e,e=!1),null!=n&&(t=Ye(t,n,i)),Z(t,e)}function _n(e,n,i){if("number"==typeof i){var o=e?e.length:0;i=0>i?Ui(0,o+i):i||0}else if(i){var s=Dn(e,n);return e[s]===n?s:-1}return t(e,n,i)}function gn(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=y.createCallback(e,n,3);s--&&e(t[s],s,t);)i++}else i=null==e||n?1:e||i;return m(t,0,$i(Ui(0,o-i),o))}function xn(n){for(var i=arguments,o=i.length,r=-1,l=a(),c=-1,u=ue(),m=n?n.length:0,f=[],d=a();o>++r;){var y=i[r];l[r]=u===t&&(y?y.length:0)>=b&&s(r?i[r]:d)}t:for(;m>++c;){var _=l[0];if(y=n[c],0>(_?e(_,y):u(d,y))){for(r=o,(_||d).push(y);--r;)if(_=l[r],0>(_?e(_,y):u(i[r],y)))continue t;f.push(y)}}for(;o--;)_=l[o],_&&p(_);return h(l),h(d),f}function vn(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=y.createCallback(e,n,3);s--&&e(t[s],s,t);)i++}else if(i=e,null==i||n)return t?t[o-1]:d;return m(t,Ui(0,o-i))}function bn(t,e,n){var i=t?t.length:0;for("number"==typeof n&&(i=(0>n?Ui(0,i+n):$i(n,i-1))+1);i--;)if(t[i]===e)return i;return-1}function wn(t){for(var e=arguments,n=0,i=e.length,o=t?t.length:0;i>++n;)for(var s=-1,r=e[n];o>++s;)t[s]===r&&(Vi.call(t,s--,1),o--);return t}function Cn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var i=-1,o=Ui(0,Di((e-t)/(n||1))),s=ci(o);o>++i;)s[i]=t,t+=n;return s}function Sn(t,e,n){var i=-1,o=t?t.length:0,s=[];for(e=y.createCallback(e,n,3);o>++i;){var r=t[i];e(r,i,t)&&(s.push(r),Vi.call(t,i--,1),o--)}return s}function An(t,e,n){if("number"!=typeof e&&null!=e){var i=0,o=-1,s=t?t.length:0;for(e=y.createCallback(e,n,3);s>++o&&e(t[o],o,t);)i++}else i=null==e||n?1:Ui(0,e);return m(t,i)}function Dn(t,e,n,i){var o=0,s=t?t.length:o;for(n=n?y.createCallback(n,i,1):Xn,e=n(e);s>o;){var r=o+s>>>1;e>n(t[r])?o=r+1:s=r}return o}function Bn(){return oe(Z(arguments,!0,!0))}function En(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=i&&i[e]===t?null:e,e=!1),null!=n&&(n=y.createCallback(n,i,3)),oe(t,e,n)}function kn(t){return pn(t,Qi.call(arguments,1))}function Tn(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?Ze(So(t,"length")):0,i=ci(0>n?0:n);n>++e;)i[e]=So(t,e);return i}function Mn(t,e){for(var n=-1,i=t?t.length:0,o={};i>++n;){var s=t[n];e?o[s]=e[n]:s&&(o[s[0]]=s[1])}return o}function Ln(t,e){if(!ke(e))throw new xi;return function(){return 1>--t?e.apply(this,arguments):d}}function In(t,e){return arguments.length>2?re(t,17,Qi.call(arguments,2),null,e):re(t,1,null,null,e)}function jn(t){for(var e=arguments.length>1?Z(arguments,!0,!1,1):ve(t),n=-1,i=e.length;i>++n;){var o=e[n];t[o]=re(t[o],1,null,null,t)}return t}function Pn(t,e){return arguments.length>2?re(e,19,Qi.call(arguments,2),null,t):re(e,3,null,null,t)}function Vn(){for(var t=arguments,e=t.length||1;e--;)if(!ke(t[e]))throw new xi;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Rn(t,e,n){var i=typeof t;if(null==t||"function"==i)return K(t,e,n);if("object"!=i)return function(e){return e[t]};var o=ro(t),s=o[0],r=t[s];return 1!=o.length||r!==r||Te(r)?function(e){for(var n=o.length,i=!1;n--&&(i=ee(e[o[n]],t[o[n]],null,!0)););return i}:function(t){var e=t[s];return r===e&&(0!==r||1/r==1/e)}}function Nn(t,e){return e="number"==typeof e?e:+e||t.length,re(t,4,null,null,null,e)}function On(t,e,n){var i,o,s,r,a,l,c,u=0,h=!1,p=!0;if(!ke(t))throw new xi;if(e=Ui(0,e)||0,n===!0){var m=!0;p=!1}else Te(n)&&(m=n.leading,h="maxWait"in n&&(Ui(e,n.maxWait)||0),p="trailing"in n?n.trailing:p);var f=function(){var n=e-(new hi-r);if(0>=n){o&&Bi(o);var h=c;o=l=c=d,h&&(u=+new hi,s=t.apply(a,i))}else l=Pi(f,n)},y=function(){l&&Bi(l),o=l=c=d,(p||h!==e)&&(u=+new hi,s=t.apply(a,i))};return function(){if(i=arguments,r=+new hi,a=this,c=p&&(l||!m),h===!1)var n=m&&!l;else{o||m||(u=r);var d=h-(r-u);0>=d?(o&&(o=Bi(o)),u=r,s=t.apply(a,i)):o||(o=Pi(y,d))}return l||e===h||(l=Pi(f,e)),n&&(s=t.apply(a,i)),s}}function Fn(t){if(!ke(t))throw new xi;var e=Qi.call(arguments,1);return Pi(function(){t.apply(d,e)},1)}function Gn(t,e){if(!ke(t))throw new xi;var n=Qi.call(arguments,2);return Pi(function(){t.apply(d,n)},e)}function Jn(t,e){if(!ke(t))throw new xi;var n=function(){var i=n.cache,o=e?e.apply(this,arguments):v+arguments[0];return Mi.call(i,o)?i[o]:i[o]=t.apply(this,arguments)};return n.cache={},n}function qn(t){var e,n;if(!ke(t))throw new xi;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Hn(t){return re(t,16,Qi.call(arguments,1))}function zn(t){return re(t,32,null,Qi.call(arguments,1))}function Un(t,e,n){var i=!0,o=!0;if(!ke(t))throw new xi;n===!1?i=!1:Te(n)&&(i="leading"in n?n.leading:i,o="trailing"in n?n.trailing:o),n=l(),n.leading=i,n.maxWait=e,n.trailing=o;var s=On(t,e,n);return p(n),s}function $n(t,e){if(!ke(e))throw new xi;return function(){var n=[t];return Li.apply(n,arguments),e.apply(this,n)}}function Wn(t){return null==t?"":gi(t).replace(mo,ce)}function Xn(t){return t}function Qn(t,e){var n=t,i=!e||ke(n);e||(n=_,e=t,t=y),Xe(ve(e),function(o){var s=t[o]=e[o];i&&(n.prototype[o]=function(){var e=this.__wrapped__,i=[e];Li.apply(i,arguments);var o=s.apply(t,i);return e&&"object"==typeof e&&e===o?this:new n(o)})})}function Kn(){return n._=Si,this}function Yn(t,e){null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0;var n=Xi();return t%1||e%1?t+$i(n*(e-t+parseFloat("1e-"+((n+"").length-1))),e):t+Ei(n*(e-t+1))}function Zn(t,e){if(t){var n=t[e];return ke(n)?t[e]():n}}function ti(t,e,n){var i=y.templateSettings;t||(t=""),n=_o({},n,i);var o,s=_o({},n.imports,i.imports),a=ro(s),l=Je(s),c=0,u=n.interpolate||I,h="__p += '",p=_i((n.escape||I).source+"|"+u.source+"|"+(u===M?B:I).source+"|"+(n.evaluate||I).source+"|$","g");t.replace(p,function(e,n,i,s,a,l){return i||(i=s),h+=t.slice(c,l).replace(P,r),n&&(h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),h+="';\n";var m=n.variable,f=m;f||(m="obj",h="with ("+m+") {\n"+h+"\n}\n"),h=(o?h.replace(S,""):h).replace(A,"$1").replace(D,"$1;"),h="function("+m+") {\n"+(f?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+N++ +"]")+"\n*/";try{var g=mi(a,"return "+h+_).apply(d,l)}catch(x){throw x.source=h,x}return e?g(e):(g.source=h,g)}function ei(t,e,n){t=(t=+t)>-1?t:0;var i=-1,o=ci(t);for(e=K(e,n,1);t>++i;)o[i]=e(i);return o}function ni(t){return null==t?"":gi(t).replace(po,pe)}function ii(t){var e=++g;return gi(null==t?"":t)+e}function oi(t){return t=new _(t),t.__chain__=!0,t}function si(t,e){return e(t),t}function ri(){return this.__chain__=!0,this}function ai(){return gi(this.__wrapped__)}function li(){return this.__wrapped__}n=n?ne.defaults(Y.Object(),n,ne.pick(Y,V)):Y;var ci=n.Array,ui=n.Boolean,hi=n.Date,pi=n.Error,mi=n.Function,fi=n.Math,di=n.Number,yi=n.Object,_i=n.RegExp,gi=n.String,xi=n.TypeError,vi=[],bi=pi.prototype,wi=yi.prototype,Ci=gi.prototype,Si=n._,Ai=_i("^"+gi(wi.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Di=fi.ceil,Bi=n.clearTimeout,Ei=fi.floor,ki=mi.prototype.toString,Ti=Ai.test(Ti=yi.getPrototypeOf)&&Ti,Mi=wi.hasOwnProperty,Li=vi.push,Ii=wi.propertyIsEnumerable,ji=n.setImmediate,Pi=n.setTimeout,Vi=vi.splice,Ri=wi.toString,Ni=vi.unshift,Oi=function(){try{var t={},e=Ai.test(e=yi.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),Fi=Ai.test(Fi=Ri.bind)&&Fi,Gi=Ai.test(Gi=yi.create)&&Gi,Ji=Ai.test(Ji=ci.isArray)&&Ji,qi=n.isFinite,Hi=n.isNaN,zi=Ai.test(zi=yi.keys)&&zi,Ui=fi.max,$i=fi.min,Wi=n.parseInt,Xi=fi.random,Qi=vi.slice,Ki=Ai.test(n.attachEvent),Yi=Fi&&!/\n|true/.test(Fi+Ki),Zi={};Zi[F]=ci,Zi[G]=ui,Zi[J]=hi,Zi[H]=mi,Zi[U]=yi,Zi[z]=di,Zi[$]=_i,Zi[W]=gi;var to={};to[F]=to[J]=to[z]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},to[G]=to[W]={constructor:!0,toString:!0,valueOf:!0},to[q]=to[H]=to[$]={constructor:!0,toString:!0},to[U]={constructor:!0},function(){for(var t=R.length;t--;){var e=R[t];for(var n in to)Mi.call(to,n)&&!Mi.call(to[n],e)&&(to[n][e]=!1)}}(),_.prototype=y.prototype;var eo=y.support={};(function(){var t=function(){this.x=1},e={0:1,length:1},n=[];t.prototype={valueOf:1,y:1};for(var i in new t)n.push(i);for(i in arguments);eo.argsObject=arguments.constructor==yi&&!(arguments instanceof ci),eo.argsClass=Ri.call(arguments)==O,eo.enumErrorProps=Ii.call(bi,"message")||Ii.call(bi,"name"),eo.enumPrototypes=Ii.call(t,"prototype"),eo.fastBind=Fi&&!Yi,eo.funcNames="string"==typeof mi.name,eo.ownLast="x"!=n[0],eo.nonEnumArgs=0!=i,eo.nonEnumShadows=!/valueOf/.test(n),eo.spliceObjects=(vi.splice.call(e,0,1),!e[0]),eo.unindexedChars="xx"!="x"[0]+yi("x")[0];try{eo.nodeClass=!(Ri.call(document)==U&&!({toString:0}+""))}catch(o){eo.nodeClass=!0}})(1),y.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:M,variable:"",imports:{_:y}};var no=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",eo.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):eo.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),eo.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),eo.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(eo.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),eo.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }    ",eo.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||eo.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};Gi||(le=function(t){if(Te(t)){u.prototype=t;var e=new u;u.prototype=null}return e||{}});var io=Oi?function(t,e){var n=l();n.value=e,Oi(t,"__bindData__",n),p(n)}:u;eo.argsClass||(me=function(t){return t&&"object"==typeof t?Mi.call(t,"callee"):!1});var oo=Ji||function(t){return t&&"object"==typeof t?Ri.call(t)==F:!1},so=ae({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ro=zi?function(t){return Te(t)?eo.enumPrototypes&&"function"==typeof t||eo.nonEnumArgs&&t.length&&me(t)?so(t):zi(t):[]}:so,ao={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:ro,loop:"if (callback(iterable[index], index, collection) === false) return result"},lo={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:ro,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},co={top:"if (!objectTypes[typeof iterable]) return result;\n"+ao.top,array:!1},uo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ho=we(uo),po=_i("("+ro(ho).join("|")+")","g"),mo=_i("["+ro(uo).join("")+"]","g"),fo=ae(ao),yo=ae(lo,{top:lo.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),_o=ae(lo),go=ae(ao,co,{useHas:!1}),xo=ae(ao,co);ke(/x/)&&(ke=function(t){return"function"==typeof t&&Ri.call(t)==H});var vo=Ti?function(t){if(!t||Ri.call(t)!=U||!eo.argsClass&&me(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=Ti(e))&&Ti(n);return n?t==n||Ti(t)==n:he(t)}:he,bo=se(function(t,e,n){Mi.call(t,n)?t[n]++:t[n]=1}),wo=se(function(t,e,n){(Mi.call(t,n)?t[n]:t[n]=[]).push(e)}),Co=se(function(t,e,n){t[n]=e}),So=Ye,Ao=Ue;Yi&&te&&"function"==typeof ji&&(Fn=function(t){if(!ke(t))throw new xi;return ji.apply(n,arguments)});var Do=8==Wi(C+"08")?Wi:function(t,e){return Wi(Pe(t)?t.replace(L,""):t,e||0)};return y.after=Ln,y.assign=yo,y.at=qe,y.bind=In,y.bindAll=jn,y.bindKey=Pn,y.chain=oi,y.compact=hn,y.compose=Vn,y.countBy=bo,y.createCallback=Rn,y.curry=Nn,y.debounce=On,y.defaults=_o,y.defer=Fn,y.delay=Gn,y.difference=pn,y.filter=Ue,y.flatten=yn,y.forEach=Xe,y.forEachRight=Qe,y.forIn=go,y.forInRight=ge,y.forOwn=xo,y.forOwnRight=xe,y.functions=ve,y.groupBy=wo,y.indexBy=Co,y.initial=gn,y.intersection=xn,y.invert=we,y.invoke=Ke,y.keys=ro,y.map=Ye,y.max=Ze,y.memoize=Jn,y.merge=Re,y.min=tn,y.omit=Ne,y.once=qn,y.pairs=Oe,y.partial=Hn,y.partialRight=zn,y.pick=Fe,y.pluck=So,y.pull=wn,y.range=Cn,y.reject=on,y.remove=Sn,y.rest=An,y.shuffle=rn,y.sortBy=cn,y.tap=si,y.throttle=Un,y.times=ei,y.toArray=un,y.transform=Ge,y.union=Bn,y.uniq=En,y.values=Je,y.where=Ao,y.without=kn,y.wrap=$n,y.zip=Tn,y.zipObject=Mn,y.collect=Ye,y.drop=An,y.each=Xe,y.eachRight=Qe,y.extend=yo,y.methods=ve,y.object=Mn,y.select=Ue,y.tail=An,y.unique=En,y.unzip=Tn,Qn(y),y.clone=fe,y.cloneDeep=de,y.contains=He,y.escape=Wn,y.every=ze,y.find=$e,y.findIndex=mn,y.findKey=ye,y.findLast=We,y.findLastIndex=fn,y.findLastKey=_e,y.has=be,y.identity=Xn,y.indexOf=_n,y.isArguments=me,y.isArray=oo,y.isBoolean=Ce,y.isDate=Se,y.isElement=Ae,y.isEmpty=De,y.isEqual=Be,y.isFinite=Ee,y.isFunction=ke,y.isNaN=Me,y.isNull=Le,y.isNumber=Ie,y.isObject=Te,y.isPlainObject=vo,y.isRegExp=je,y.isString=Pe,y.isUndefined=Ve,y.lastIndexOf=bn,y.mixin=Qn,y.noConflict=Kn,y.parseInt=Do,y.random=Yn,y.reduce=en,y.reduceRight=nn,y.result=Zn,y.runInContext=f,y.size=an,y.some=ln,y.sortedIndex=Dn,y.template=ti,y.unescape=ni,y.uniqueId=ii,y.all=ze,y.any=ln,y.detect=$e,y.findWhere=$e,y.foldl=en,y.foldr=nn,y.include=He,y.inject=en,xo(y,function(t,e){y.prototype[e]||(y.prototype[e]=function(){var e=[this.__wrapped__],n=this.__chain__;Li.apply(e,arguments);var i=t.apply(y,e);return n?new _(i,n):i})}),y.first=dn,y.last=vn,y.sample=sn,y.take=dn,y.head=dn,xo(y,function(t,e){var n="sample"!==e;y.prototype[e]||(y.prototype[e]=function(e,i){var o=this.__chain__,s=t(this.__wrapped__,e,i);return o||null!=e&&(!i||n&&"function"==typeof e)?new _(s,o):s})}),y.VERSION="2.0.0",y.prototype.chain=ri,y.prototype.toString=ai,y.prototype.value=li,y.prototype.valueOf=li,fo(["join","pop","shift"],function(t){var e=vi[t];y.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new _(n,t):n}}),fo(["push","reverse","sort","unshift"],function(t){var e=vi[t];y.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),fo(["concat","slice","splice"],function(t){var e=vi[t];y.prototype[t]=function(){return new _(e.apply(this.__wrapped__,arguments),this.__chain__)}}),eo.spliceObjects||fo(["pop","shift","splice"],function(t){var e=vi[t],n="splice"==t;y.prototype[t]=function(){var t=this.__chain__,i=this.__wrapped__,o=e.apply(i,arguments);return 0===i.length&&delete i[0],t||n?new _(o,t):o}}),y}var d,y=[],_=[],g=0,x={},v=+new Date+"",b=75,w=40,C=" 	\f\n\r\u2028\u2029",S=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,T=/^function[ \n\r\t]+\w/,M=/<%=([\s\S]+?)%>/g,L=RegExp("^["+C+"]*0+(?=.$)"),I=/($^)/,j=(j=/\bthis\b/)&&j.test(f)&&j,P=/['\n\r\t\u2028\u2029\\]/g,V=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],R=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],N=0,O="[object Arguments]",F="[object Array]",G="[object Boolean]",J="[object Date]",q="[object Error]",H="[object Function]",z="[object Number]",U="[object Object]",$="[object RegExp]",W="[object String]",X={};X[H]=!1,X[O]=X[F]=X[G]=X[J]=X[z]=X[U]=X[$]=X[W]=!0;var Q={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},K={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Y=Q[typeof window]&&window||this,Z=Q[typeof exports]&&exports,te=Q[typeof module]&&module&&module.exports==Z&&module,ee=Q[typeof global]&&global;!ee||ee.global!==ee&&ee.window!==ee||(Y=ee);var ne=f();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Y._=ne,define(function(){return ne})):Z&&!Z.nodeType?te?(te.exports=ne)._=ne:Z._=ne:Y._=ne}.call(this),function(){var t=this,e=t.Backbone,n=[];n.push;var i=n.slice;n.splice;var o;o="undefined"!=typeof exports?exports:t.Backbone={},o.VERSION="1.1.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),o.$=t.jQuery||t.Zepto||t.ender||t.$,o.noConflict=function(){return t.Backbone=e,this},o.emulateHTTP=!1,o.emulateJSON=!1;var r=o.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var i=this,o=s.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,r,a,c,u,h,p;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:s.keys(this._events),c=0,u=a.length;u>c;c++)if(t=a[c],r=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,p=r.length;p>h;h++)o=r[h],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&c(n,e),o&&c(o,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var r in i)t=i[r],t.off(e,n,this),(o||s.isEmpty(t._events))&&delete this._listeningTo[r];return this}},a=/\s+/,l=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(a.test(n)){for(var s=n.split(a),r=0,l=s.length;l>r;r++)t[e].apply(t,[s[r]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;o>++i;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;o>++i;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;o>++i;)(n=t[i]).callback.call(n.ctx,s,r);return;case 3:for(;o>++i;)(n=t[i]).callback.call(n.ctx,s,r,a);return;default:for(;o>++i;)(n=t[i]).callback.apply(n.ctx,e)}},u={listenTo:"on",listenToOnce:"once"};s.each(u,function(t,e){r[e]=function(e,n,i){var o=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=s.uniqueId("l"));return o[r]=e,i||"object"!=typeof n||(i=this),e[t](n,i,this),this}}),r.bind=r.on,r.unbind=r.off,s.extend(o,r);var h=o.Model=function(t,e){var n=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=s.defaults({},n,s.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};s.extend(h.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,o,r,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;r=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],s.isEqual(h[i],e)||a.push(i),s.isEqual(u[i],e)?delete this.changed[i]:this.changed[i]=e,r?delete h[i]:h[i]=e;if(!l){a.length&&(this._pending=!0);for(var p=0,m=a.length;m>p;p++)this.trigger("change:"+a[p],this,h[a[p]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)s.isEqual(i[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},V(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,o,r,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=s.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=s.extend(i||{},e)),s.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),l.trigger("sync",l,t,n),void 0)},V(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=i),r=this.sync(o,this,n),i&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?s.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&i(),n&&n(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;V(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||P();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];s.each(p,function(t){h.prototype[t]=function(){var e=i.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var m=o.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},d={add:!0,remove:!1};s.extend(m.prototype,r,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return o.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.extend({merge:!1},e,d))},remove:function(t,e){var n=!s.isArray(t);t=n?[t]:s.clone(t),e||(e={});var i,o,r,a;for(i=0,o=t.length;o>i;i++)a=t[i]=this.get(t[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a));return n?t[0]:t},set:function(t,e){e=s.defaults({},e,f),e.parse&&(t=this.parse(t,e));var n=!s.isArray(t);t=n?t?[t]:[]:s.clone(t);var i,o,r,a,l,c,u,p=e.at,m=this.model,d=this.comparator&&null==p&&e.sort!==!1,y=s.isString(this.comparator)?this.comparator:null,_=[],g=[],x={},v=e.add,b=e.merge,w=e.remove,C=!d&&v&&w?[]:!1;for(i=0,o=t.length;o>i;i++){if(l=t[i],r=l instanceof h?a=l:l[m.prototype.idAttribute],c=this.get(r))w&&(x[c.cid]=!0),b&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),d&&!u&&c.hasChanged(y)&&(u=!0)),t[i]=c;else if(v){if(a=t[i]=this._prepareModel(l,e),!a)continue;_.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}C&&C.push(c||a)}if(w){for(i=0,o=this.length;o>i;++i)x[(a=this.models[i]).cid]||g.push(a);g.length&&this.remove(g,e)}if(_.length||C&&C.length)if(d&&(u=!0),this.length+=_.length,null!=p)for(i=0,o=_.length;o>i;i++)this.models.splice(p+i,0,_[i]);else{C&&(this.models.length=0);var S=C||_;for(i=0,o=S.length;o>i;i++)this.models.push(S[i])}if(u&&this.sort({silent:!0}),!e.silent){for(i=0,o=_.length;o>i;i++)(a=_[i]).trigger("add",a,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,s.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,s.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return i.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},V(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(t,e,o){o.wait&&n.add(t,o),i&&i(t,e,o)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e=e?s.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(y,function(t){m.prototype[t]=function(){var e=i.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var _=["groupBy","countBy","sortBy"];s.each(_,function(t){m.prototype[t]=function(e,n){var i=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,i,n)}});var g=o.View=function(t){this.cid=s.uniqueId("view"),t||(t={}),s.extend(this,s.pick(t,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];s.extend(g.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof o.$?t:o.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(s.isFunction(n)||(n=this[t[e]]),n){var i=e.match(x),o=i[1],r=i[2];
n=s.bind(n,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,n):this.$el.on(o,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t["class"]=s.result(this,"className"));var e=o.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),o.sync=function(t,e,n){var i=w[t];s.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var r={type:i,dataType:"json"};if(n.url||(r.url=s.result(e,"url")||P()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){r.type="POST",n.emulateJSON&&(r.data._method=i);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),a?a.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&b&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=o.ajax(s.extend(r,n));return e.trigger("request",e,l,n),l};var b=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var C=o.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,D=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(C.prototype,r,{initialize:function(){},route:function(t,e,n){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(e)&&(n=e,e=""),n||(n=this[e]);var i=this;return o.history.route(t,function(s){var r=i._extractParameters(t,s);n&&n.apply(i,r),i.trigger.apply(i,["route:"+e].concat(r)),i.trigger("route",e,r),o.history.trigger("route",i,e,r)}),this},navigate:function(t,e){return o.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(B,"\\$&").replace(S,"(?:$1)?").replace(A,function(t,e){return e?t:"([^/]+)"}).replace(D,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return s.map(n,function(t){return t?decodeURIComponent(t):null})}});var E=o.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,M=/msie [\w.]+/,L=/\/$/,I=/[?#].*$/;E.started=!1,s.extend(E.prototype,r,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(L,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(k,"")},start:function(t){if(E.started)throw Error("Backbone.history has already been started");E.started=!0,this.options=s.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,i=M.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(T,"/"),i&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(k,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),s.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!E.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),o.history=new E;var j=function(t,e){var n,i=this;n=t&&s.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,e);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&s.extend(n.prototype,t),n.__super__=i.prototype,n};h.extend=m.extend=C.extend=g.extend=E.extend=j;var P=function(){throw Error('A "url" property or function must be specified')},V=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),function(t){"use strict";for(var e,n,i={},o=function(){},s="memory".split(","),r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");e=s.pop();)t[e]=t[e]||i;for(;n=r.pop();)t[n]=t[n]||o}(window.console=window.console||{}),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.4.0",t.buildDate="Wed, 25 Sep 2013 17:09:35 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,n){this.initialize(t,e,n)},e=t.prototype;e.type=null,e.target=null,e.currentTarget=null,e.eventPhase=0,e.bubbles=!1,e.cancelable=!1,e.timeStamp=0,e.defaultPrevented=!1,e.propagationStopped=!1,e.immediatePropagationStopped=!1,e.removed=!1,e.initialize=function(t,e,n){this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=(new Date).getTime()},e.preventDefault=function(){this.defaultPrevented=!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent},e._listeners=null,e._captureListeners=null,e.initialize=function(){},e.addEventListener=function(t,e,n){var i;i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var o=i[t];return o&&this.removeEventListener(t,e,n),o=i[t],o?o.push(e):i[t]=[e],e},e.on=function(t,e,n,i,o,s){return e.handleEvent&&(n=n||e,e=e.handleEvent),n=n||this,this.addEventListener(t,function(t){e.call(n,t,o),i&&t.remove()},s)},e.removeEventListener=function(t,e,n){var i=n?this._captureListeners:this._listeners;if(i){var o=i[t];if(o)for(var s=0,r=o.length;r>s;s++)if(o[s]==e){1==r?delete i[t]:o.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e){if("string"==typeof t){var n=this._listeners;if(!n||!n[t])return!1;t=new createjs.Event(t)}if(t.target=e||this,t.bubbles&&this.parent){for(var i=this,o=[i];i.parent;)o.push(i=i.parent);var s,r=o.length;for(s=r-1;s>=0&&!t.propagationStopped;s--)o[s]._dispatchEvent(t,1+(0==s));for(s=1;r>s&&!t.propagationStopped;s++)o[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,n=this._captureListeners;return!!(e&&e[t]||n&&n[t])},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var n,i=1==e?this._captureListeners:this._listeners;if(t&&i){var o=i[t.type];if(!o||!(n=o.length))return;t.currentTarget=this,t.eventPhase=e,t.removed=!1,o=o.slice();for(var s=0;n>s&&!t.immediatePropagationStopped;s++){var r=o[s];r.handleEvent?r.handleEvent(t):r(t),t.removed&&(this.off(t.type,r,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(t,e){for(var n=0,i=t.length;i>n;n++)if(e===t[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.init()};t.prototype={};var e=t.prototype,n=t;n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.loaded=!1,e.canceled=!1,e.progress=0,e._item=null,e._basePath=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e.getItem=function(){return this._item},e.init=function(){},e.load=function(){},e.close=function(){},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.Event("progress"),e.loaded=this.progress,e.total=1):(e=t,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),e.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.Event("error")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e._parseURI=function(t){return t?t.match(n.FILE_PATTERN):null},e._formatQueryString=function(t,e){if(null==t)throw Error("You must specify data.");var n=[];for(var i in t)n.push(i+"="+escape(t[i]));return e&&(n=n.concat(e)),n.join("&")},e.buildPath=function(t,e,n){if(null!=e){var i=this._parseURI(t);(null==i||null==i[1]||""==i[1])&&(t=e+t)}if(null==n)return t;var o=[],s=t.indexOf("?");if(-1!=s){var r=t.slice(s+1);o=o.concat(r.split("&"))}return-1!=s?t.slice(0,s)+"?"+this._formatQueryString(n,o):t+"?"+this._formatQueryString(n,o)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader,n=t;n.LOAD_TIMEOUT=8e3,n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.SOUND="sound",n.SVG="svg",n.TEXT="text",n.XML="xml",n.POST="POST",n.GET="GET",e.useXHR=!0,e.stopOnError=!1,e.maintainScriptOrder=!0,e.next=null,e._typeCallbacks=null,e._extensionCallbacks=null,e._loadStartWasDispatched=!1,e._maxConnections=1,e._currentlyLoadingScript=null,e._currentLoads=null,e._loadQueue=null,e._loadQueueBackup=null,e._loadItemsById=null,e._loadItemsBySrc=null,e._loadedResults=null,e._loadedRawResults=null,e._numItems=0,e._numItemsLoaded=0,e._scriptOrder=null,e._loadedScripts=null,e.init=function(t,e){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=e,this.setUseXHR(t)},e.setUseXHR=function(t){return this.useXHR=0!=t&&null!=window.XMLHttpRequest,this.useXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var n=!1;if(e){for(;e.length;){var i=e.pop(),o=this.getResult(i);for(s=this._loadQueue.length-1;s>=0;s--)if(r=this._loadQueue[s].getItem(),r.id==i||r.src==i){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(r=this._loadQueueBackup[s].getItem(),r.id==i||r.src==i){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(o)delete this._loadItemsById[o.id],delete this._loadItemsBySrc[o.src],this._disposeItem(o);else for(var s=this._currentLoads.length-1;s>=0;s--){var r=this._currentLoads[s].getItem();if(r.id==i||r.src==i){this._currentLoads.splice(s,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.useXHR)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);var e=[];for(i=0,l=this._loadQueueBackup.length;l>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},n.isBinary=function(t){switch(t){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(null!=e.types)for(var n=0,i=e.types.length;i>n;n++)this._typeCallbacks[e.types[n]]=e.callback;if(null!=e.extensions)for(n=0,i=e.extensions.length;i>n;n++)this._extensionCallbacks[e.extensions[n]]=e.callback}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,n){if(null==t){var i=new createjs.Event("error");return i.text="PRELOAD_NO_FILE",this._sendError(i),void 0}this._addItem(t,n),e!==!1?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(t,e,n){var i=null;if(t instanceof Array){if(0==t.length){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_EMPTY",this._sendError(o),void 0}i=t}else{if(null==t){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_NULL",this._sendError(o),void 0}i=[t]}for(var s=0,r=i.length;r>s;s++)this._addItem(i[s],n);e!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var n=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==n)return null;var i=n.id;return e&&this._loadedRawResults[i]?this._loadedRawResults[i]:this._loadedResults[i]},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},e._addItem=function(t,e){var n=this._createLoadItem(t);if(null!=n){var i=this._createLoader(n,e);null!=i&&(this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT&&i instanceof createjs.XHRLoader&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t){var e=null;switch(typeof t){case"string":e={src:t};break;case"object":e=window.HTMLAudioElement&&t instanceof HTMLAudioElement?{tag:t,src:e.tag.src,type:createjs.LoadQueue.SOUND}:t;break;default:return null}var n=this._parseURI(e.src);if(null!=n&&(e.ext=n[5]),null==e.type&&(e.type=this._getTypeByExtension(e.ext)),e.type==createjs.LoadQueue.JSON&&null!=e.callback&&(e.type=createjs.LoadQueue.JSONP),e.type==createjs.LoadQueue.JSONP&&null==e.callback)throw Error("callback is required for loading JSONP requests.");null==e.tag&&(e.tag=this._createTag(e.type)),(null==e.id||""==e.id)&&(e.id=e.src);var i=this._typeCallbacks[e.type]||this._extensionCallbacks[e.ext];if(i){var o=i(e.src,e.type,e.id,e.data);if(o===!1)return null;o===!0||(null!=o.src&&(e.src=o.src),null!=o.id&&(e.id=o.id),null!=o.tag&&o.tag.load instanceof Function&&(e.tag=o.tag),null!=o.completeHandler&&(e.completeHandler=o.completeHandler)),o.type&&(e.type=o.type),n=this._parseURI(e.src),null!=n&&null!=n[5]&&(e.ext=n[5].toLowerCase())}return this._loadItemsById[e.id]=e,this._loadItemsBySrc[e.src]=e,e},e._createLoader=function(t,e){var n=this.useXHR;switch(t.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:n=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:n=!1;break;case null:return null}return null==e&&(e=this._basePath),n?new createjs.XHRLoader(t,e):new createjs.TagLoader(t,e)},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;this._loadQueue.length>t&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];if(this.maintainScriptOrder&&e instanceof createjs.TagLoader&&e.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(t,1),t--,this._loadItem(e)}}},e._loadItem=function(t){t.addEventListener("progress",createjs.proxy(this._handleProgress,this)),t.addEventListener("complete",createjs.proxy(this._handleFileComplete,this)),t.addEventListener("error",createjs.proxy(this._handleFileError,this)),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileError=function(t){var e=t.target;this._numItemsLoaded++,this._updateProgress();var t=new createjs.Event("error");t.text="FILE_LOAD_ERROR",t.item=e.getItem(),this._sendError(t),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,n=e.getItem();if(this._loadedResults[n.id]=e.getResult(),e instanceof createjs.XHRLoader&&(this._loadedRawResults[n.id]=e.getResult(!0)),this._removeLoadItem(e),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT){if(!(e instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,n)]=n,this._checkScriptLoadOrder(e),void 0;this._currentlyLoadingScript=!1}this._processFinishedLoad(n,e)},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var n=this._loadedScripts[e];if(null===n)break;n!==!0&&(this._processFinishedLoad(n),this._loadedScripts[e]=!0,e--,t--)}},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,n=0;e>n;n++)if(this._currentLoads[n]==t){this._currentLoads.splice(n,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var n=0,i=0,o=this._currentLoads.length;o>i;i++)n+=this._currentLoads[i].progress;t+=n/e*(e/this._numItems)}this._sendProgress(t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._createTag=function(t){var e=null;switch(t){case createjs.LoadQueue.IMAGE:return document.createElement("img");case createjs.LoadQueue.SOUND:return e=document.createElement("audio"),e.autoplay=!1,e;case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.type="text/javascript",e;case createjs.LoadQueue.CSS:return e=this.useXHR?document.createElement("style"):document.createElement("link"),e.rel="stylesheet",e.type="text/css",e;case createjs.LoadQueue.SVG:return this.useXHR?e=document.createElement("svg"):(e=document.createElement("object"),e.type="image/svg+xml"),e}return null},e._getTypeByExtension=function(t){if(null==t)return createjs.LoadQueue.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},e._sendFileProgress=function(t,e){if(this._isCanceled())return this._cleanUp(),void 0;if(this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=e,n.loaded=e,n.total=1,n.item=t,this.dispatchEvent(n)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var n=new createjs.Event("fileload");n.loader=e,n.item=t,n.result=this._loadedResults[t.id],n.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=t;var o=function(){};o.init=function(){var t=navigator.userAgent;o.isFirefox=t.indexOf("Firefox")>-1,o.isOpera=null!=window.opera,o.isChrome=t.indexOf("Chrome")>-1,o.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1},o.init(),createjs.LoadQueue.BrowserDetect=o}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._loadTimeout=null,e._tagCompleteProxy=null,e._isAudio=!1,e._tag=null,e._jsonResult=null,e.init=function(t,e){this._item=t,this._basePath=e,this._tag=t.tag,this._isAudio=window.HTMLAudioElement&&t.tag instanceof HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},e.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP?this._jsonResult:this._tag},e.cancel=function(){this.canceled=!0,this._clean(),this.getItem()},e.load=function(){var t=this._item,e=this._tag;clearTimeout(this._loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT),this._isAudio&&(e.src=null,e.preload="auto"),e.onerror=createjs.proxy(this._handleError,this),this._isAudio?(e.onstalled=createjs.proxy(this._handleStalled,this),e.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(e.onload=createjs.proxy(this._handleLoad,this),e.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var n=this.buildPath(t.src,this._basePath,t.values);switch(t.type){case createjs.LoadQueue.CSS:e.href=n;break;case createjs.LoadQueue.SVG:e.data=n;break;default:e.src=n}if(t.type==createjs.LoadQueue.JSONP){if(null==t.callback)throw Error("callback is required for loading JSONP requests.");if(null!=window[t.callback])throw Error('JSONP callback "'+t.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[t.callback]=createjs.proxy(this._handleJSONPLoad,this)}(t.type==createjs.LoadQueue.SVG||t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.JAVASCRIPT||t.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=e.style.visibility,e.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(e)),null!=e.load&&e.load()},e._handleJSONPLoad=function(t){this._jsonResult=t},e._handleTimeout=function(){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(t)},e._handleStalled=function(){},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleLoad()},e._handleLoad=function(){if(!this._isCanceled()){var t=this.getItem(),e=t.tag;if(!(this.loaded||this.isAudio&&4!==e.readyState)){switch(this.loaded=!0,t.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSONP:e.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(e)}this._clean(),this._sendComplete()}}},e._clean=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;t.onload=null,t.removeEventListener&&t.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),t.onstalled=null,t.onprogress=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t);var e=this.getItem();e.type==createjs.LoadQueue.JSONP&&(window[e.callback]=null)},e.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._request=null,e._loadTimeout=null,e._xhrLevel=1,e._response=null,e._rawResponse=null,e.init=function(t,e){this._item=t,this._basePath=e,!this._createXHR(t)},e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return this._handleError(),void 0;this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT)),this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(t){var e=new createjs.Event("error");e.error=t,this._sendError(e)}},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.Event("progress");e.loaded=t.loaded,e.total=t.total,this._sendProgress(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},e._handleAbort=function(t){this._clean();var t=new createjs.Event("error");t.text="XHR_ABORTED",this._sendError(t)},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return this._handleError(),void 0;this._response=this._getResponse(),this._clean();var t=this._generateTag();t&&this._sendComplete()}},e._handleTimeout=function(t){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(t)},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return!1}return!0},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=document.createElement("a");e.href=this.buildPath(t.src,this._basePath);var n=document.createElement("a");n.href=location.href;var i=""!=e.hostname&&(e.port!=n.port||e.protocol!=n.protocol||e.hostname!=n.hostname),o=null;if(i&&window.XDomainRequest)o=new XDomainRequest;else if(window.XMLHttpRequest)o=new XMLHttpRequest;else try{o=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(s){try{o=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(s){try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(s){return!1}}}t.type==createjs.LoadQueue.TEXT&&o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),this._xhrLevel="string"==typeof o.responseType?2:1;var r=null;return r=t.method==createjs.LoadQueue.GET?this.buildPath(t.src,this._basePath,t.values):this.buildPath(t.src,this._basePath),o.open(t.method||createjs.LoadQueue.GET,r,!0),i&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&o.setRequestHeader("Origin",location.origin),t.values&&t.method==createjs.LoadQueue.POST&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(t.type)&&(o.responseType="arraybuffer"),this._request=o,!0},e._clean=function(){clearTimeout(this._loadTimeout);var t=this._request;t.onloadstart=null,t.onprogress=null,t.onabort=null,t.onerror=null,t.onload=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null},e._generateTag=function(){var t=this._item.type,e=this._item.tag;switch(t){case createjs.LoadQueue.IMAGE:return e.onload=createjs.proxy(this._handleTagReady,this),e.src=this.buildPath(this._item.src,this._basePath,this._item.values),this._rawResponse=this._response,this._response=e,!1;case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.text=this._response,this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.CSS:var n=document.getElementsByTagName("head")[0];if(n.appendChild(e),e.styleSheet)e.styleSheet.cssText=this._response;else{var i=document.createTextNode(this._response);e.appendChild(i)}return this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.XML:var o=this._parseXML(this._response,"text/xml");return this._response=o,!0;case createjs.LoadQueue.SVG:var o=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=o.documentElement?(e.appendChild(o.documentElement),this._response=e):this._response=o,!0;case createjs.LoadQueue.JSON:var s={};try{s=JSON.parse(this._response)}catch(r){s=r}return this._rawResponse=this._response,this._response=s,!0}return!0},e._parseXML=function(t,e){var n=null;if(window.DOMParser){var i=new DOMParser;n=i.parseFromString(t,e)}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t);return n},e._handleTagReady=function(){this._sendComplete()
},e.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=t}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,s,r,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;s>n;n+=1)r[n]=str(n,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&r.push(quote(i)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Handlebars={};(function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,i="[object Function]",o="[object Object]";t.registerHelper=function(e,i,s){if(n.call(e)===o){if(s||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else s&&(i.not=s),this.helpers[e]=i},t.registerPartial=function(e,i){n.call(e)===o?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,o){var s=o.inverse||function(){},r=o.fn,a=n.call(e);return a===i&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?s(this):"[object Array]"===a?e.length>0?t.helpers.each(e,o):s(this):r(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(e>=t.logger.level){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,o){var s,r=o.fn,a=o.inverse,l=0,c="",u=n.call(e);if(u===i&&(e=e.call(this)),o.data&&(s=t.createFrame(o.data)),e&&"object"==typeof e)if(e instanceof Array)for(var h=e.length;h>l;l++)s&&(s.index=l),c+=r(e[l],{data:s});else for(var p in e)e.hasOwnProperty(p)&&(s&&(s.key=p),c+=r(e[p],{data:s}),l++);return 0===l&&(c=a(this)),c}),t.registerHelper("if",function(e,o){var s=n.call(e);return s===i&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?o.inverse(this):o.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(o,s){var r=n.call(o);return r===i&&(o=o.call(this)),t.Utils.isEmpty(o)?e:s.fn(o)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var s=function(){function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,n,i,o,s){var r=s.length-1;switch(o){case 1:return s[r-1];case 2:this.$=new i.ProgramNode([],s[r]);break;case 3:this.$=new i.ProgramNode(s[r-2],s[r]);break;case 4:this.$=new i.ProgramNode(s[r-1],[]);break;case 5:this.$=new i.ProgramNode(s[r]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[s[r]];break;case 9:s[r-1].push(s[r]),this.$=s[r-1];break;case 10:this.$=new i.BlockNode(s[r-2],s[r-1].inverse,s[r-1],s[r]);break;case 11:this.$=new i.BlockNode(s[r-2],s[r-1],s[r-1].inverse,s[r]);break;case 12:this.$=s[r];break;case 13:this.$=s[r];break;case 14:this.$=new i.ContentNode(s[r]);break;case 15:this.$=new i.CommentNode(s[r]);break;case 16:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 17:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 18:this.$=s[r-1];break;case 19:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1],"&"===s[r-2][2]);break;case 20:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1],!0);break;case 21:this.$=new i.PartialNode(s[r-1]);break;case 22:this.$=new i.PartialNode(s[r-2],s[r-1]);break;case 23:break;case 24:this.$=[[s[r-2]].concat(s[r-1]),s[r]];break;case 25:this.$=[[s[r-1]].concat(s[r]),null];break;case 26:this.$=[[s[r-1]],s[r]];break;case 27:this.$=[[s[r]],null];break;case 28:this.$=[[s[r]],null];break;case 29:s[r-1].push(s[r]),this.$=s[r-1];break;case 30:this.$=[s[r]];break;case 31:this.$=s[r];break;case 32:this.$=new i.StringNode(s[r]);break;case 33:this.$=new i.IntegerNode(s[r]);break;case 34:this.$=new i.BooleanNode(s[r]);break;case 35:this.$=s[r];break;case 36:this.$=new i.HashNode(s[r]);break;case 37:s[r-1].push(s[r]),this.$=s[r-1];break;case 38:this.$=[s[r]];break;case 39:this.$=[s[r-2],s[r]];break;case 40:this.$=[s[r-2],new i.StringNode(s[r])];break;case 41:this.$=[s[r-2],new i.IntegerNode(s[r])];break;case 42:this.$=[s[r-2],new i.BooleanNode(s[r])];break;case 43:this.$=[s[r-2],s[r]];break;case 44:this.$=new i.PartialNameNode(s[r]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(s[r]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(s[r]));break;case 47:this.$=new i.DataNode(s[r]);break;case 48:this.$=new i.IdNode(s[r]);break;case 49:s[r-2].push({part:s[r],separator:s[r-1]}),this.$=s[r-2];break;case 50:this.$=[{part:s[r]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t){throw Error(t)},parse:function(t){function n(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,o=[0],s=[null],r=[],a=this.table,l="",c=0,u=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===e&&(this.lexer.yylloc={});var p=this.lexer.yylloc;r.push(p);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,y,_,g,x,v,b,w,C={};;){if(y=o[o.length-1],this.defaultActions[y]?_=this.defaultActions[y]:((null===f||f===e)&&(f=n()),_=a[y]&&a[y][f]),_===e||!_.length||!_[0]){var S="";if(!h){w=[];for(x in a[y])this.terminals_[x]&&x>2&&w.push("'"+this.terminals_[x]+"'");S=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:w})}}if(_[0]instanceof Array&&_.length>1)throw Error("Parse Error: multiple actions possible at state: "+y+", token: "+f);switch(_[0]){case 1:o.push(f),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),o.push(_[1]),f=null,d?(f=d,d=null):(u=this.lexer.yyleng,l=this.lexer.yytext,c=this.lexer.yylineno,p=this.lexer.yylloc,h>0&&h--);break;case 2:if(v=this.productions_[_[1]][1],C.$=s[s.length-v],C._$={first_line:r[r.length-(v||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(v||1)].first_column,last_column:r[r.length-1].last_column},m&&(C._$.range=[r[r.length-(v||1)].range[0],r[r.length-1].range[1]]),g=this.performAction.call(C,l,u,c,this.yy,_[1],s,r),g!==e)return g;v&&(o=o.slice(0,2*-1*v),s=s.slice(0,-1*v),r=r.slice(0,-1*v)),o.push(this.productions_[_[1]][0]),s.push(C.$),r.push(C._$),b=a[o[o.length-2]][o[o.length-1]],o.push(b);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,n,i,o,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;r.length>a&&(i=this._input.match(this.rules[r[a]]),!i||n&&!(i[0].length>n[0].length)||(n=i,o=a,this.options.flex));a++);return n?(s=n[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],t=this.performAction.call(this,this.yy,this,r[o],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==e?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},t.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},t}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();t.Parser=s,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,n){this.type="program",this.statements=e,n&&(this.inverse=new t.AST.ProgramNode(n))},t.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],o=this.params=t.slice(1),s=this.eligibleHelper=i.isSimple;this.isHelper=s&&(o.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,n,i,o){var s=function(e,n){if(e.original!==n.original)throw new t.Exception(e.original+" doesn't match "+n.original)};s(e.id,o),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var n="",i=[],o=0,s=0,r=e.length;r>s;s++){var a=e[s].part;if(n+=(e[s].separator||"")+a,".."===a||"."===a||"this"===a){if(i.length>0)throw new t.Exception("Invalid path: "+n);".."===a?o++:this.isScoped=!0}else i.push(a)}this.original=n,this.parts=i,this.string=i.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var r=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;r.length>e;e++)this[r[e]]=t[r[e]]},t.Exception.prototype=Error(),t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return""+this.string};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/,u=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?""+e:null==e||e===!1?"":(e=""+e,c.test(e)?e.replace(l,u):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}};var h=t.Compiler=function(){},p=t.JavaScriptCompiler=function(){};h.prototype={compiler:h,disassemble:function(){for(var t,e,n,i=this.opcodes,o=[],s=0,r=i.length;r>s;s++)if(t=i[s],"DECLARE"===t.opcode)o.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);o.push(t.opcode+" "+e.join(" "))}return o.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],o=t.opcodes[n];if(i.opcode!==o.opcode||i.args.length!==o.args.length)return!1;for(var s=0;i.args.length>s;s++)if(i.args[s]!==o.args[s])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,o=n.length;o>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===o,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var o=0,s=n.depths.list.length;s>o;o++)e=n.depths.list[o],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var o=this.classifyMustache(e);"helper"===o?this.helperMustache(e,n,i):"simple"===o?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var o=0,s=i.length;s>o;o++)e=i[o],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,o=i.parts[0],s=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",o,s)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+o);this.opcode("invokeHelper",i.length,o)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var n=e.id.parts,i=0,o=n.length;o>i;i++)this.opcode("lookup",n[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var o=t.id.parts[0];i.knownHelpers[o]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var m=function(t){this.value=t};p.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":p.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,n,i,o){this.environment=e,this.options=n||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,n);var s,r=e.opcodes;for(this.i=0,_=r.length;_>this.i;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(o)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var o=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)o.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(!this.isChild){var l=t.COMPILER_REVISION,c=t.REVISION_CHANGES[l];a="this.compilerInfo = ["+l+",'"+c+"'];\n"+a}if(e)return o.push(a),Function.apply(this,o);var u="function "+(this.name||"")+"("+o.join(",")+") {\n  "+a+"}";return t.log(t.logger.DEBUG,u+"\n\n"),u},mergeSource:function(){for(var t,n="",i=0,o=this.source.length;o>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(n+="buffer += "+t+";\n  ",t=e),n+=s+"\n  ")}return n},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();
var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+i+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+o+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var o=this.hash;e&&o.contexts.push("'"+t+"': "+e),n&&o.types.push("'"+t+"': "+n),o.values.push("'"+t+"': ("+i+")")},compiler:p,compileChildren:function(t,e){for(var n,i,o=t.children,s=0,r=o.length;r>s;s++){n=o[s],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,o=[n.index,n.name,"data"],s=0,r=i.length;r>s;s++)e=i[s],1===e?o.push("depth0"):o.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+o.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new m(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n="",i=this.isInline();if(i){var o=this.popStack(!0);if(o instanceof m)e=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(s)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var r=t.call(this,e);return i?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+r+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+n+r+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var i=t[e];i instanceof m?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();return!t&&n instanceof m?n.value:(e||this.stackSlot--,n)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof m?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var o=this.nameLookup("helpers",e,"helper");return{params:i,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,o,s,r=[],a=[],l=[];r.push("hash:"+this.popStack()),o=this.popStack(),s=this.popStack(),(s||o)&&(s||(this.context.aliases.self="this",s="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),r.push("inverse:"+o),r.push("fn:"+s));for(var c=0;t>c;c++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+a.join(",")+"]"),r.push("types:["+l.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),e.push("options")):e.push(r),e.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),d=p.RESERVED_WORDS={},y=0,_=f.length;_>y;y++)d[f[y]]=!0;p.isValidJavaScriptVariableName=function(t){return!p.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},t.precompile=function(e,n){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);n=n||{},"data"in n||(n.data=!0);var i=t.parse(e),o=(new h).compile(i,n);return(new p).compile(o,n)},t.compile=function(n,i){function o(){var o=t.parse(n),s=(new h).compile(o,i),r=(new p).compile(s,i,e,!0);return t.template(r)}if(null==n||"string"!=typeof n&&n.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);i=i||{},"data"in i||(i.data=!0);var s;return function(t,e){return s||(s=o()),s.call(this,t,e)}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var o=this.programs[e];return i?o=t.VM.program(e,n,i):o||(o=this.programs[e]=t.VM.program(e,n)),o},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,o){o=o||{};var s=e.call(n,t,i,o.helpers,o.partials,o.data),r=n.compilerInfo||[],a=r[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var c=t.REVISION_CHANGES[l],u=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+r[1]+")."}return s}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),o=function(t,o){return o=o||{},e.apply(this,[t,o.data||n].concat(i))};return o.program=t,o.depth=i.length,o},program:function(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,o,s,r,a){var l={helpers:s,partials:r,data:a};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(o,l);if(t.compile)return r[i]=t.compile(n,{data:a!==e}),r[i](o,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template})(Handlebars),function(){var t=function(){var t={},e={},n=function(){return function(){}},i=function(t,i){var o={id:t,exports:{}};i(o.exports,n(),o);var s=e[t]=o.exports;return s},o=function(n){if(e.hasOwnProperty(n))return e[n];if(t.hasOwnProperty(n))return i(n,t[n]);throw Error('Cannot find module "'+n+'"')};return o.register=function(e,n){t[e]=n},o}();t.register("chaplin/application",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h,p;p=t("underscore"),s=t("backbone"),h=t("chaplin/mediator"),a=t("chaplin/dispatcher"),c=t("chaplin/views/layout"),r=t("chaplin/composer"),u=t("chaplin/lib/router"),l=t("chaplin/lib/event_broker"),i.exports=o=function(){function t(t){null==t&&(t={}),this.initialize(t)}return t.extend=s.Model.extend,p.extend(t.prototype,l),t.prototype.title="",t.prototype.dispatcher=null,t.prototype.layout=null,t.prototype.router=null,t.prototype.composer=null,t.prototype.started=!1,t.prototype.initialize=function(t){if(null==t&&(t={}),this.started)throw Error("Application#initialize: App was already started");return this.initRouter(t.routes,t),this.initDispatcher(t),this.initLayout(t),this.initComposer(t),this.initMediator(),this.start()},t.prototype.initDispatcher=function(t){return this.dispatcher=new a(t)},t.prototype.initLayout=function(t){var e;return null==t&&(t={}),null==(e=t.title)&&(t.title=this.title),this.layout=new c(t)},t.prototype.initComposer=function(t){return null==t&&(t={}),this.composer=new r(t)},t.prototype.initMediator=function(){return h.seal()},t.prototype.initRouter=function(t,e){return this.router=new u(e),"function"==typeof t?t(this.router.match):void 0},t.prototype.start=function(){return this.router.startHistory(),this.started=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,n,i,o;if(!this.disposed){for(t="function"==typeof Object.isFrozen?Object.isFrozen(this):void 0,n=["dispatcher","layout","router","composer"],i=0,o=n.length;o>i;i++)e=n[i],null!=this[e]&&(this[e].dispose(),t||delete this[e]);return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/mediator",function(e,n,i){"use strict";var o,s,r,a,l,c,u=[].slice;o=t("backbone"),c=t("underscore"),a=t("chaplin/lib/support"),l=t("chaplin/lib/utils"),r={},r.subscribe=o.Events.on,r.unsubscribe=o.Events.off,r.publish=o.Events.trigger,r._callbacks=null,s=r._handlers={},r.setHandler=function(t,e,n){return s[t]={instance:n,method:e}},r.execute=function(){var t,e,n,i,o;if(i=arguments[0],t=arguments.length>=2?u.call(arguments,1):[],o=!1,"object"==typeof i?(o=i.silent,n=i.name):n=i,e=s[n])return e.method.apply(e.instance,t);if(!o)throw Error("mediator.execute: "+n+" handler is not defined")},r.removeHandlers=function(t){var e,n,i,o;if(t||(r._handlers={}),l.isArray(t))for(i=0,o=t.length;o>i;i++)n=t[i],delete s[n];else for(n in s)e=s[n],e.instance===t&&delete s[n]},l.readonly(r,"subscribe","unsubscribe","publish","setHandler","execute","removeHandlers"),r.seal=function(){return a.propertyDescriptors&&Object.seal?Object.seal(r):void 0},l.readonly(r,"seal"),i.exports=r}),t.register("chaplin/dispatcher",function(e,n,i){"use strict";var o,s,r,a,l,c;c=t("underscore"),o=t("backbone"),a=t("chaplin/mediator"),l=t("chaplin/lib/utils"),r=t("chaplin/lib/event_broker"),i.exports=s=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=o.Model.extend,c.extend(t.prototype,r),t.prototype.previousRoute=null,t.prototype.currentController=null,t.prototype.currentRoute=null,t.prototype.currentParams=null,t.prototype.currentQuery=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.settings=c.defaults(t,{controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("router:match",this.dispatch)},t.prototype.dispatch=function(t,e,n){var i,o,s=this;return e=e?c.extend({},e):{},n=n?c.extend({},n):{},null==n.query&&(n.query={}),n.changeURL!==!1&&(n.changeURL=!0),n.forceStartup!==!0&&(n.forceStartup=!1),!n.forceStartup&&(null!=(i=this.currentRoute)?i.controller:void 0)===t.controller&&(null!=(o=this.currentRoute)?o.action:void 0)===t.action&&c.isEqual(this.currentParams,e)&&c.isEqual(this.currentQuery,n.query)?void 0:this.loadController(t.controller,function(i){return s.controllerLoaded(t,e,n,i)})},t.prototype.loadController=function(t,e){var n,i;return n=t+this.settings.controllerSuffix,i=this.settings.controllerPath+n,("undefined"!=typeof define&&null!==define?define.amd:void 0)?require([i],e):e(require(i))},t.prototype.controllerLoaded=function(t,e,n,i){var o;return this.previousRoute=this.currentRoute,this.currentRoute=c.extend({},t,{previous:l.beget(this.previousRoute)}),o=new i(e,this.currentRoute,n),this.executeBeforeAction(o,this.currentRoute,e,n)},t.prototype.executeAction=function(t,e,n,i){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(n,e,i)),this.currentController=t,this.currentParams=n,this.currentQuery=i.query,t[e.action](n,e,i),t.redirected?void 0:(this.adjustURL(e,n,i),this.publishEvent("dispatcher:dispatch",this.currentController,n,e,i))},t.prototype.executeBeforeAction=function(t,e,n,i){var o,s,r,a=this;if(o=t.beforeAction,s=function(){return t.redirected||a.currentRoute&&e!==a.currentRoute?(t.dispose(),void 0):a.executeAction(t,e,n,i)},!o)return s(),void 0;if("function"!=typeof o)throw new TypeError("Controller#beforeAction: function expected. Old object-like form is not supported.");return r=t.beforeAction(n,e,i),r&&r.then?r.then(s):s()},t.prototype.adjustURL=function(t,e,n){var i;if(null!=t.path)return i=t.path+(t.query?"?"+t.query:""),n.changeURL?a.execute("router:changeURL",i,n):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/composer",function(e,n,i){"use strict";var o,s,r,a,l,c,u;u=t("underscore"),o=t("backbone"),l=t("chaplin/mediator"),c=t("chaplin/lib/utils"),r=t("chaplin/lib/composition"),a=t("chaplin/lib/event_broker"),i.exports=s=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=o.Model.extend,u.extend(t.prototype,a),t.prototype.compositions=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.compositions={},l.setHandler("composer:compose",this.compose,this),l.setHandler("composer:retrieve",this.retrieve,this),this.subscribeEvent("dispatcher:dispatch",this.cleanup)},t.prototype.compose=function(t,e,n){return"function"==typeof e?n||e.prototype.dispose?e.prototype instanceof r?this._compose(t,{composition:e,options:n}):this._compose(t,{options:n,compose:function(){var t,n;return this.item=new e(this.options),t=this.item.autoRender,n=void 0===t||!t,n&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(t,{compose:e}):"function"==typeof n?this._compose(t,{compose:n,options:e}):this._compose(t,e)},t.prototype._compose=function(t,e){var n,i,o,s;if("function"!=typeof e.compose&&null==e.composition)throw Error("Composer#compose was used incorrectly");return null!=e.composition?n=new e.composition(e.options):(n=new r(e.options),n.compose=e.compose,e.check&&(n.check=e.check)),i=this.compositions[t],o=!1,i&&i.check(n.options)?i.stale(!1):(i&&i.dispose(),s=n.compose(n.options),o="function"==typeof(null!=s?s.then:void 0),n.stale(!1),this.compositions[t]=n),o?s:this.compositions[t].item},t.prototype.retrieve=function(t){var e;return e=this.compositions[t],e&&!e.stale()?e.item:void 0},t.prototype.cleanup=function(){var t,e,n;n=this.compositions;for(e in n)t=n[e],t.stale()?(t.dispose(),delete this.compositions[e]):t.stale(!0)},t.prototype.dispose=function(){var t,e,n;if(!this.disposed){this.unsubscribeAllEvents(),l.removeHandlers(this),n=this.compositions;for(e in n)t=n[e],t.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/controllers/controller",function(e,n,i){"use strict";var o,s,r,a,l,c,u=[].slice,h={}.hasOwnProperty;c=t("underscore"),o=t("backbone"),r=t("chaplin/lib/event_broker"),a=t("chaplin/lib/helpers"),l=t("chaplin/mediator"),i.exports=s=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=o.Model.extend,c.extend(t.prototype,o.Events),c.extend(t.prototype,r),t.prototype.view=null,t.prototype.redirected=!1,t.prototype.initialize=function(){},t.prototype.beforeAction=function(){},t.prototype.adjustTitle=function(t){return l.execute("adjustTitle",t)},t.prototype.compose=function(){var t;return t=1===arguments.length?"retrieve":"compose",l.execute.apply(l,["composer:"+t].concat(u.call(arguments)))},t.prototype.redirectTo=function(t,e,n){return this.redirected=!0,a.redirectTo(t,e,n)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e;if(!this.disposed){for(e in this)h.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&(t.dispose(),delete this[e]));return this.unsubscribeAllEvents(),this.stopListening(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/models/collection",function(e,n,i){"use strict";var o,s,r,a,l,c,u={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=t("underscore"),o=t("backbone"),r=t("chaplin/lib/event_broker"),a=t("chaplin/models/model"),l=t("chaplin/lib/utils"),i.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),c.extend(e.prototype,r),e.prototype.model=a,e.prototype.serialize=function(){return this.map(l.serialize)},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,n,i;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["model","models","_byId","_byCid","_callbacks"],n=0,i=e.length;i>n;n++)t=e[n],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(o.Collection)}),t.register("chaplin/models/model",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=t("underscore"),o=t("backbone"),c=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),a=function(t,e,n){var i,s,r,a,u,h,p,m;i=c.beget(e),null==n&&(n={}),n[t.cid]=!0;for(s in e)if(u=e[s],u instanceof o.Model)i[s]=l(u,t,n);else if(u instanceof o.Collection){for(a=[],m=u.models,h=0,p=m.length;p>h;h++)r=m[h],a.push(l(r,t,n));i[s]=a}return delete n[t.cid],i},l=function(t,e,n){var i;return t===e||t.cid in n?null:(i="function"==typeof t.getAttributes?t.getAttributes():t.attributes,a(t,i,n))},i.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),u.extend(e.prototype,s),e.prototype.getAttributes=function(){return this.attributes},e.prototype.serialize=function(){return a(this,this.getAttributes())},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,n,i;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],n=0,i=e.length;i>n;n++)t=e[n],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(o.Model)}),t.register("chaplin/views/layout",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h,p,m=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};p=t("underscore"),s=t("backbone"),u=t("chaplin/mediator"),c=t("chaplin/lib/helpers"),h=t("chaplin/lib/utils"),r=t("chaplin/lib/event_broker"),l=t("chaplin/views/view"),o=s.$,i.exports=a=function(t){function e(t){null==t&&(t={}),this.openLink=m(this.openLink,this),this.globalRegions=[],this.title=t.title,t.regions&&(this.regions=t.regions),this.settings=p.defaults(t,{titleTemplate:function(t){var e;return e=t.subtitle?""+t.subtitle+"  ":"",e+t.title},openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),u.setHandler("region:show",this.showRegion,this),u.setHandler("region:register",this.registerRegionHandler,this),u.setHandler("region:unregister",this.unregisterRegionHandler,this),u.setHandler("region:find",this.regionByName,this),u.setHandler("adjustTitle",this.adjustTitle,this),e.__super__.constructor.apply(this,arguments),this.settings.routeLinks&&this.startLinkRouting()}return d(e,t),e.prototype.el="body",e.prototype.keepElement=!0,e.prototype.title="",e.prototype.globalRegions=null,e.prototype.listen={"beforeControllerDispose mediator":"scroll"},e.prototype.scroll=function(){var t;return t=this.settings.scrollTo,t?window.scrollTo(t[0],t[1]):void 0},e.prototype.adjustTitle=function(t){var e,n=this;return null==t&&(t=""),e=this.settings.titleTemplate({title:this.title,subtitle:t}),setTimeout(function(){return document.title=e,n.publishEvent("adjustTitle",t,e)},50),e},e.prototype.startLinkRouting=function(){var t;return(t=this.settings.routeLinks)?o?this.$el.on("click",t,this.openLink):this.delegate("click",t,this.openLink):void 0},e.prototype.stopLinkRouting=function(){var t;return t=this.settings.routeLinks,o?t?this.$el.off("click",t):void 0:this.undelegate("click",t,this.openLink)},e.prototype.isExternalLink=function(t){var e,n;return"_blank"===t.target||"external"===t.rel||"http:"!==(e=t.protocol)&&"https:"!==e&&"file:"!==e||(n=t.hostname)!==location.hostname&&""!==n},e.prototype.openLink=function(t){var e,n,i,r,a,l;if(!(h.modifierKeyPressed(t)||(e=o?t.currentTarget:t.delegateTarget,r="A"===e.nodeName,i=e.getAttribute("href")||e.getAttribute("data-href")||null,null==i||""===i||"#"===i.charAt(0)||(a=this.settings.skipRouting,l=typeof a,"function"===l&&!a(i,e)||"string"===l&&(o?o(e).is(a):s.utils.matchesSelector(e,a)))))){if(n=r&&this.isExternalLink(e))return this.settings.openExternalToBlank&&(t.preventDefault(),window.open(i)),void 0;c.redirectTo({url:i}),t.preventDefault()}},e.prototype.registerRegionHandler=function(t,e,n){return null!=e?this.registerGlobalRegion(t,e,n):this.registerGlobalRegions(t)},e.prototype.registerGlobalRegion=function(t,e,n){return this.unregisterGlobalRegion(t,e),this.globalRegions.unshift({instance:t,name:e,selector:n})},e.prototype.registerGlobalRegions=function(t){var e,n,i,o,s,r;for(r=h.getAllPropertyVersions(t,"regions"),o=0,s=r.length;s>o;o++){i=r[o];for(e in i)n=i[e],this.registerGlobalRegion(t,e,n)}},e.prototype.unregisterRegionHandler=function(t,e){return null!=e?this.unregisterGlobalRegion(t,e):this.unregisterGlobalRegions(t)},e.prototype.unregisterGlobalRegion=function(t,e){var n,i;return n=t.cid,this.globalRegions=function(){var t,o,s,r;for(s=this.globalRegions,r=[],t=0,o=s.length;o>t;t++)i=s[t],(i.instance.cid!==n||i.name!==e)&&r.push(i);return r}.call(this)},e.prototype.unregisterGlobalRegions=function(t){var e;return this.globalRegions=function(){var n,i,o,s;for(o=this.globalRegions,s=[],n=0,i=o.length;i>n;n++)e=o[n],e.instance.cid!==t.cid&&s.push(e);return s}.call(this)},e.prototype.regionByName=function(t){var e,n,i,o;for(o=this.globalRegions,n=0,i=o.length;i>n;n++)if(e=o[n],e.name===t&&!e.instance.stale)return e},e.prototype.showRegion=function(t,e){var n;if(n=this.regionByName(t),!n)throw Error("No region registered under "+t);return e.container=""===n.selector?o?n.instance.$el:n.instance.el:n.instance.noWrap?o?o(n.instance.container).find(n.selector):n.instance.container.querySelector(n.selector):n.instance[o?"$":"find"](n.selector)},e.prototype.dispose=function(){var t,n,i,o;if(!this.disposed){for(this.stopLinkRouting(),o=["globalRegions","title","route"],n=0,i=o.length;i>n;n++)t=o[n],delete this[t];return u.removeHandlers(this),e.__super__.dispose.apply(this,arguments)}},e}(l)}),t.register("chaplin/views/view",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h,p,m,f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},y=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};m=t("underscore"),s=t("backbone"),u=t("chaplin/mediator"),r=t("chaplin/lib/event_broker"),p=t("chaplin/lib/utils"),o=s.$,c=function(){return Function.prototype.bind?function(t,e){return t.bind(e)}:m.bind?m.bind:void 0}(),h=function(){return o?function(t,e){return t.html(e)}:function(t,e){return t.innerHTML=e}}(),l=function(){return o?function(t){var e;return e=o(t.container),"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}:function(t){var e;return e="string"==typeof t.container?document.querySelector(t.container):t.container,"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}}(),i.exports=a=function(t){function e(t){var n,i,s,r,a=this;if(t)for(n in t)i=t[n],y.call(this.optionNames,n)>=0&&(this[n]=i);r=this.render,this.render=function(){return a.disposed?!1:(r.apply(a,arguments),a.autoAttach&&a.attach.apply(a,arguments),a)},this.subviews=[],this.subviewsByName={},this.noWrap&&(this.region&&(s=u.execute("region:find",this.region),null!=s&&(this.el=null!=s.instance.container?null!=s.instance.region?o(s.instance.container).find(s.selector):s.instance.container:s.instance.$(s.selector))),this.container&&(this.el=this.container)),e.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(t){return t&&t!==a.collection?void 0:a.dispose()}),null!=this.regions&&u.execute("region:register",this),this.autoRender&&this.render()}return d(e,t),m.extend(e.prototype,r),e.prototype.autoRender=!1,e.prototype.autoAttach=!0,e.prototype.container=null,e.prototype.containerMethod=o?"append":"appendChild",e.prototype.regions=null,e.prototype.region=null,e.prototype.stale=!1,e.prototype.noWrap=!1,e.prototype.keepElement=!1,e.prototype.subviews=null,e.prototype.subviewsByName=null,e.prototype.optionNames=["autoAttach","autoRender","container","containerMethod","region","regions","noWrap"],e.prototype.delegate=function(t,n,i){var o,r,a,l,u,h;if(s.View.prototype.delegate)return e.__super__.delegate.apply(this,arguments);if("string"!=typeof t)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)l=n;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(h=n,"string"!=typeof h)throw new TypeError("View#delegate: second argument must be a string");l=i}if("function"!=typeof l)throw new TypeError("View#delegate: handler argument must be function");return u=function(){var e,n,i,o;for(i=t.split(" "),o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(""+r+".delegate"+this.cid);return o}.call(this),a=u.join(" "),o=c(l,this),this.$el.on(a,h||null,o),o},e.prototype._delegateEvents=function(t){var e,n,i,o,r,a,l;if(2===s.View.prototype.delegateEvents.length)return s.View.prototype.delegateEvents.call(this,t,!0);for(o in t){if(l=t[o],i="function"==typeof l?l:this[l],!i)throw Error("Method '"+i+"' does not exist");r=o.match(/^(\S+)\s*(.*)$/),n=""+r[1]+".delegateEvents"+this.cid,a=r[2],e=c(i,this),this.$el.on(n,a||null,e)}},e.prototype.delegateEvents=function(t,e){var n,i,o,s;if(e||this.undelegateEvents(),t)return this._delegateEvents(t);for(s=p.getAllPropertyVersions(this,"events"),i=0,o=s.length;o>i;i++){if(n=s[i],"function"==typeof n)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(n)}},e.prototype.undelegate=function(t,n,i){var o,r,a,l,c;if(s.View.prototype.undelegate)return e.__super__.undelegate.apply(this,arguments);if(t){if("string"!=typeof t)throw new TypeError("View#undelegate: first argument must be a string");if(2===arguments.length)"string"==typeof n?c=n:a=n;else if(3===arguments.length){if(c=n,"string"!=typeof c)throw new TypeError("View#undelegate: second argument must be a string");a=i}return l=function(){var e,n,i,s;for(i=t.split(" "),s=[],e=0,n=i.length;n>e;e++)o=i[e],s.push(""+o+".delegate"+this.cid);return s}.call(this),r=l.join(" "),this.$el.off(r,c||null)}return this.$el.off(".delegate"+this.cid)},e.prototype.delegateListeners=function(){var t,e,n,i,o,s,r,a,l;if(this.listen)for(a=p.getAllPropertyVersions(this,"listen"),s=0,r=a.length;r>s;s++){o=a[s];for(e in o){if(n=o[e],"function"!=typeof n&&(n=this[n]),"function"!=typeof n)throw Error("View#delegateListeners: "+(""+n+" must be function"));l=e.split(" "),t=l[0],i=l[1],this.delegateListener(t,i,n)}}},e.prototype.delegateListener=function(t,e,n){var i;"model"===e||"collection"===e?(i=this[e],i&&this.listenTo(i,t,n)):"mediator"===e?this.subscribeEvent(t,n):e||this.on(t,n,this)},e.prototype.registerRegion=function(t,e){return u.execute("region:register",this,t,e)},e.prototype.unregisterRegion=function(t){return u.execute("region:unregister",this,t)},e.prototype.unregisterAllRegions=function(){return u.execute({name:"region:unregister",silent:!0},this)},e.prototype.subview=function(t,e){var n,i;return i=this.subviews,n=this.subviewsByName,t&&e?(this.removeSubview(t),i.push(e),n[t]=e,e):t?n[t]:void 0},e.prototype.removeSubview=function(t){var e,n,i,o,s,r,a;if(t){if(r=this.subviews,e=this.subviewsByName,"string"==typeof t)i=t,a=e[i];else{a=t;for(o in e)if(s=e[o],s===a){i=o;break}}if(i&&a&&a.dispose)return a.dispose(),n=p.indexOf(r,a),-1!==n&&r.splice(n,1),delete e[i]}},e.prototype.getTemplateData=function(){var t,e;return t=this.model?p.serialize(this.model):this.collection?{items:p.serialize(this.collection),length:this.collection.length}:{},e=this.model||this.collection,e&&("function"!=typeof e.isSynced||"synced"in t||(t.synced=e.isSynced())),t},e.prototype.getTemplateFunction=function(){throw Error("View#getTemplateFunction must be overridden")
},e.prototype.render=function(){var t,e,n;if(this.disposed)return!1;if(n=this.getTemplateFunction(),"function"==typeof n)if(e=n(this.getTemplateData()),this.noWrap){if(t=document.createElement("div"),t.innerHTML=e,t.children.length>1)throw Error("There must be a single top-level element when using `noWrap`.");this.undelegateEvents(),this.setElement(t.firstChild,!0)}else h(o?this.$el:this.el,e);return this},e.prototype.attach=function(){return null!=this.region&&u.execute("region:show",this.region,this),this.container&&!document.body.contains(this.el)?(l(this),this.trigger("addedToDOM")):void 0},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,n,i,o,s,r,a;if(!this.disposed){for(this.unregisterAllRegions(),a=this.subviews,i=0,s=a.length;s>i;i++)n=a[i],n.dispose();for(this.unsubscribeAllEvents(),this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),e=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],o=0,r=e.length;r>o;o++)t=e[o],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(s.View)}),t.register("chaplin/views/collection_view",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h,p,m,f,d,y=function(t,e){return function(){return t.apply(e,arguments)}},_={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var i in e)_.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};d=t("underscore"),s=t("backbone"),a=t("chaplin/views/view"),f=t("chaplin/lib/utils"),o=s.$,u=function(t,e){var n,i,o,r;if(!e)return t;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],s.utils.matchesSelector(n,e)&&r.push(n);return r},m=function(){return o?function(t,e){return t.toggle(e)}:function(t,e){return t.style.display=e?"":"none"}}(),l=function(){return o?function(t,e){return t.addClass(e)}:function(t,e){return t.classList.add(e)}}(),p=function(){return o?function(t,e,n){return e?l(t,n):t.css("opacity",0)}:function(t,e,n){return e?l(t,n):t.style.opacity=0}}(),c=function(){return o?function(t,e){return t.animate({opacity:1},e)}:function(t,e){return t.style.transition="opacity "+e/1e3+"s",t.opacity=1}}(),h=function(){return o?function(t,e,n,i,o){var s,r,a,l,c;return a=n>0&&i>n,l=function(t){return 0===t||n===t},a||o?(s=t.children(o),r=s.length,s[n]!==e?l(r)?t.append(e):0===n?s.eq(n).before(e):s.eq(n-1).after(e):void 0):(c=l(i)?"append":"prepend",t[c](e))}:function(t,e,n,i,o){var s,r,a,l,c;return a=n>0&&i>n,l=function(t){return 0===t||n===t},a||o?(s=u(t.children,o),r=s.length,s[n]!==e?l(r)?t.appendChild(e):0===n?t.insertBefore(e,s[n]):(c=s[n-1],t.lastChild===c?t.appendChild(e):t.insertBefore(e,c.nextElementSibling)):void 0):l(i)?t.appendChild(e):t.insertBefore(e,t.firstChild)}}(),i.exports=r=function(t){function e(){this.renderAllItems=y(this.renderAllItems,this),this.toggleFallback=y(this.toggleFallback,this),this.itemsReset=y(this.itemsReset,this),this.itemRemoved=y(this.itemRemoved,this),this.itemAdded=y(this.itemAdded,this),this.visibleItems=[],e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.itemView=null,e.prototype.autoRender=!0,e.prototype.renderItems=!0,e.prototype.animationDuration=500,e.prototype.useCssAnimation=!1,e.prototype.animationStartClass="animated-item-view",e.prototype.animationEndClass="animated-item-view-end",e.prototype.listSelector=null,e.prototype.$list=null,e.prototype.fallbackSelector=null,e.prototype.$fallback=null,e.prototype.loadingSelector=null,e.prototype.$loading=null,e.prototype.itemSelector=void 0,e.prototype.filterer=null,e.prototype.filterCallback=function(t,e){return o&&t.$el.stop(!0,!0),m(o?t.$el:t.el,e)},e.prototype.visibleItems=null,e.prototype.optionNames=a.prototype.optionNames.concat(["renderItems","itemView"]),e.prototype.initialize=function(t){return null==t&&(t={}),this.addCollectionListeners(),null!=t.filterer?this.filter(t.filterer):void 0},e.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},e.prototype.getTemplateData=function(){var t;return t={length:this.collection.length},"function"==typeof this.collection.isSynced&&(t.synced=this.collection.isSynced()),t},e.prototype.getTemplateFunction=function(){},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),o?this.$list=this.listSelector?this.$(this.listSelector):this.$el:this.list=this.listSelector?this.find(this.listSelector):this.el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},e.prototype.itemAdded=function(t,e,n){return this.insertView(t,this.renderItem(t),n.at)},e.prototype.itemRemoved=function(t){return this.removeViewForItem(t)},e.prototype.itemsReset=function(){return this.renderAllItems()},e.prototype.initFallback=function(){return this.fallbackSelector?(o?this.$fallback=this.$(this.fallbackSelector):this.fallback=this.find(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},e.prototype.toggleFallback=function(){var t;return t=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),m(o?this.$fallback:this.fallback,t)},e.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(o?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},e.prototype.toggleLoadingIndicator=function(){var t;return t=0===this.collection.length&&this.collection.isSyncing(),m(o?this.$loading:this.loading,t)},e.prototype.getItemViews=function(){var t,e,n,i;if(t={},this.subviews.length>0){i=this.subviewsByName;for(e in i)n=i[e],"itemView:"===e.slice(0,9)&&(t[e.slice(9)]=n)}return t},e.prototype.filter=function(t,e){var n,i,o,s,r,a,l,c,u=this;if(this.filterer=t,e&&(this.filterCallback=e),null==e&&(e=this.filterCallback),n=function(){var t;if(u.subviews.length>0)for(t in u.subviewsByName)if("itemView:"===t.slice(0,9))return!0;return!1}())for(c=this.collection.models,o=a=0,l=c.length;l>a;o=++a){if(s=c[o],i="function"==typeof t?t(s,o):!0,r=this.subview("itemView:"+s.cid),!r)throw Error("CollectionView#filter: "+("no view found for "+s.cid));this.filterCallback(r,i),this.updateVisibleItems(r.model,i,!1)}return this.trigger("visibilityChange",this.visibleItems)},e.prototype.renderAllItems=function(){var t,e,n,i,o,s,r,a,l,c,u;for(i=this.collection.models,this.visibleItems=[],o={},r=0,l=i.length;l>r;r++)n=i[r],s=this.subview("itemView:"+n.cid),s&&(o[n.cid]=s);u=this.getItemViews();for(t in u)_.call(u,t)&&(s=u[t],t in o||this.removeSubview("itemView:"+t));for(e=a=0,c=i.length;c>a;e=++a)n=i[e],s=this.subview("itemView:"+n.cid),s?this.insertView(n,s,e,!1):this.insertView(n,this.renderItem(n),e);return 0===i.length?this.trigger("visibilityChange",this.visibleItems):void 0},e.prototype.renderItem=function(t){var e;return e=this.subview("itemView:"+t.cid),e||(e=this.initItemView(t),this.subview("itemView:"+t.cid,e)),e.render(),e},e.prototype.initItemView=function(t){if(this.itemView)return new this.itemView({autoRender:!1,model:t});throw Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},e.prototype.insertView=function(t,e,n,i){var s,r,a,u,m=this;return null==i&&(i=!0),0===this.animationDuration&&(i=!1),"number"!=typeof n&&(n=this.collection.indexOf(t)),r="function"==typeof this.filterer?this.filterer(t,n):!0,s=o?e.$el:e.el,r&&i&&p(s,this.useCssAnimation,this.animationStartClass),this.filterer&&this.filterCallback(e,r),a=this.collection.length,u=o?this.$list:this.list,h(u,s,n,a,this.itemSelector),e.trigger("addedToParent"),this.updateVisibleItems(t,r),r&&i&&(this.useCssAnimation?setTimeout(function(){return l(s,m.animationEndClass)},0):c(s,this.animationDuration)),e},e.prototype.removeViewForItem=function(t){return this.updateVisibleItems(t,!1),this.removeSubview("itemView:"+t.cid)},e.prototype.updateVisibleItems=function(t,e,n){var i,o,s;return null==n&&(n=!0),o=!1,s=f.indexOf(this.visibleItems,t),i=-1!==s,e&&!i?(this.visibleItems.push(t),o=!0):!e&&i&&(this.visibleItems.splice(s,1),o=!0),o&&n&&this.trigger("visibilityChange",this.visibleItems),o},e.prototype.dispose=function(){var t,n,i,o;if(!this.disposed){for(n=["$list","$fallback","$loading","visibleItems"],i=0,o=n.length;o>i;i++)t=n[i],delete this[t];return e.__super__.dispose.apply(this,arguments)}},e}(a)}),t.register("chaplin/lib/route",function(e,n,i){"use strict";var o,s,r,a,l,c,u=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;c=t("underscore"),o=t("backbone"),r=t("chaplin/lib/event_broker"),s=t("chaplin/controllers/controller"),l=t("chaplin/lib/utils"),i.exports=a=function(){function t(t,e,n,i){var o;if(this.pattern=t,this.controller=e,this.action=n,this.handler=u(this.handler,this),this.addParamName=u(this.addParamName,this),"string"!=typeof this.pattern)throw Error("Route: RegExps are not supported.        Use strings with :names and `constraints` option of route");if(this.options=i?c.extend({},i):{},null!=this.options.name&&(this.name=this.options.name),this.name&&-1!==this.name.indexOf("#"))throw Error('Route: "#" cannot be used in name');if(null==(o=this.name)&&(this.name=this.controller+"#"+this.action),this.paramNames=[],this.action in s.prototype)throw Error("Route: You should not use existing controller properties as action names");this.createRegExp(),"function"==typeof Object.freeze&&Object.freeze(this)}var e;return t.extend=o.Model.extend,c.extend(t.prototype,r),e=/[-[\]{}()+?.,\\^$|#\s]/g,t.prototype.matches=function(t){var e,n,i,o,s,r,a;if("string"==typeof t)return t===this.name;for(i=0,a=["name","action","controller"],s=0,r=a.length;r>s;s++)if(n=a[s],i++,o=t[n],o&&o!==this[n])return!1;return e=1===i&&("action"===n||"controller"===n),!e},t.prototype.reverse=function(t,e){var n,i,o,s,r,a,c;if(t=this.normalizeParams(t),t===!1)return!1;for(o=this.pattern,c=this.paramNames,r=0,a=c.length;a>r;r++)n=c[r],s=t[n],o=o.replace(RegExp("[:*]"+n,"g"),s);return e?"object"==typeof e?(i=l.queryParams.stringify(e),o+=i?"?"+i:""):o+=("?"===e[0]?"":"?")+e:o},t.prototype.normalizeParams=function(t){var e,n,i,o,s,r;if(l.isArray(t)){if(t.length<this.paramNames.length)return!1;for(i={},r=this.paramNames,e=o=0,s=r.length;s>o;e=++o)n=r[e],i[n]=t[e];if(!this.testConstraints(i))return!1;t=i}else if(null==t&&(t={}),!this.testParams(t))return!1;return t},t.prototype.testConstraints=function(t){var e,n,i;if(n=this.options.constraints)for(i in n)if(h.call(n,i)&&(e=n[i],!e.test(t[i])))return!1;return!0},t.prototype.testParams=function(t){var e,n,i,o;for(o=this.paramNames,n=0,i=o.length;i>n;n++)if(e=o[n],void 0===t[e])return!1;return this.testConstraints(t)},t.prototype.createRegExp=function(){var t;return t=this.pattern.replace(e,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+t+"(?=\\?|$)")},t.prototype.addParamName=function(t,e){return this.paramNames.push(e),":"===t.charAt(0)?"([^/?]+)":"(.*?)"},t.prototype.test=function(t){var e,n;return(n=this.regExp.test(t))?(e=this.options.constraints,e?this.testConstraints(this.extractParams(t)):!0):!1},t.prototype.handler=function(t,e){var n,i,o,s,r,a;return e=e?c.extend({},e):{},"object"==typeof t?(s=l.queryParams.stringify(e.query),i=t,o=this.reverse(i)):(a=t.split("?"),o=a[0],s=a[1],null==s?s="":e.query=l.queryParams.parse(s),i=this.extractParams(o)),n=c.extend({},i,this.options.params),r={path:o,action:this.action,controller:this.controller,name:this.name,query:s},this.publishEvent("router:match",r,n,e)},t.prototype.extractParams=function(t){var e,n,i,o,s,r,a,l;for(s={},i=this.regExp.exec(t),l=i.slice(1),e=r=0,a=l.length;a>r;e=++r)n=l[e],o=this.paramNames.length?this.paramNames[e]:e,s[o]=n;return s},t}()}),t.register("chaplin/lib/router",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h,p=function(t,e){return function(){return t.apply(e,arguments)}};h=t("underscore"),o=t("backbone"),c=t("chaplin/mediator"),s=t("chaplin/lib/event_broker"),r=t("chaplin/lib/history"),a=t("chaplin/lib/route"),u=t("chaplin/lib/utils"),i.exports=l=function(){function t(t){var e;this.options=null!=t?t:{},this.match=p(this.match,this),e="file:"!==window.location.protocol,h.defaults(this.options,{pushState:e,root:"/"}),this.removeRoot=RegExp("^"+u.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.oldEventError),this.subscribeEvent("!router:routeByName",this.oldEventError),this.subscribeEvent("!router:changeURL",this.oldURLEventError),c.setHandler("router:route",this.route,this),c.setHandler("router:reverse",this.reverse,this),c.setHandler("router:changeURL",this.changeURL,this),this.createHistory()}return t.extend=o.Model.extend,h.extend(t.prototype,s),t.prototype.oldEventError=function(){throw Error("!router:route and !router:routeByName events were removed.  Use `Chaplin.helpers.redirectTo`")},t.prototype.oldURLEventError=function(){throw Error('!router:changeURL event was removed.  Use mediator.execute("router:changeURL")')},t.prototype.createHistory=function(){return o.history=new r},t.prototype.startHistory=function(){return o.history.start(this.options)},t.prototype.stopHistory=function(){return o.History.started?o.history.stop():void 0},t.prototype.findHandler=function(t){var e,n,i,s;for(s=o.history.handlers,n=0,i=s.length;i>n;n++)if(e=s[n],t(e))return e},t.prototype.match=function(t,e,n){var i,s,r,l;if(null==n&&(n={}),2===arguments.length&&"object"==typeof e){if(n=e,s=n.controller,i=n.action,!s||!i)throw Error("Router#match must receive either target or options.controller & options.action")}else{if(s=n.controller,i=n.action,s||i)throw Error("Router#match cannot use both target and options.controller / options.action");l=e.split("#"),s=l[0],i=l[1]}return r=new a(t,s,i,n),o.history.handlers.push({route:r,callback:r.handler}),r},t.prototype.route=function(t,e,n){var i,o;if(e=e?u.isArray(e)?e.slice():h.extend({},e):{},"object"==typeof t&&(o=t.url),null!=o?(o=o.replace(this.removeRoot,""),i=this.findHandler(function(t){return t.route.test(o)}),n=e,e=null):(n=n?h.extend({},n):{},i=this.findHandler(function(n){return n.route.matches(t)&&(e=n.route.normalizeParams(e))?!0:!1})),i)return h.defaults(n,{changeURL:!0}),i.callback(o||e,n),!0;throw Error("Router#route: request was not routed")},t.prototype.reverse=function(t,e,n){var i,s,r,a,l,c,u;if(a=this.options.root,null!=e&&"object"!=typeof e)throw new TypeError("Router#reverse: params must be an array or an object");for(s=o.history.handlers,c=0,u=s.length;u>c;c++)if(i=s[c],i.route.matches(t)&&(r=i.route.reverse(e,n),r!==!1))return l=a?a+r:r;throw Error("Router#reverse: invalid route specified")},t.prototype.changeURL=function(t,e){var n;return null==e&&(e={}),n={trigger:e.trigger===!0,replace:e.replace===!0},o.history.navigate(t,n)},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete o.history,this.unsubscribeAllEvents(),c.removeHandlers(this),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/lib/history",function(e,n,i){"use strict";var o,s,r,a,l,c,u,h={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=t("underscore"),o=t("backbone"),l=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,r=/msie [\w.]+/,c=/\/$/,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.getFragment=function(t,e){var n;return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=this.location.pathname+this.location.search,n=this.root.replace(c,""),t.indexOf(n)||(t=t.substr(n.length))):t=this.getHash()),t.replace(l,"")},e.prototype.start=function(t){var e,n,i;if(o.History.started)throw Error("Backbone.history has already been started");return o.History.started=!0,this.options=u.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=Boolean(this.options.pushState),this._hasPushState=Boolean(this.options.pushState&&this.history&&this.history.pushState),n=this.getFragment(),this.root=("/"+this.root+"/").replace(a,"/"),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n,i=this.location,e=i.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&e&&i.hash&&(this.fragment=this.getHash().replace(l,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},e}(o.History),i.exports=o.$?s:o.History}),t.register("chaplin/lib/delayer",function(t,e,n){"use strict";var i;i={setTimeout:function(t,e,n){var i,o,s,r=this;return null==(s=this.timeouts)&&(this.timeouts={}),this.clearTimeout(t),o=function(){return delete r.timeouts[t],n()},i=setTimeout(o,e),this.timeouts[t]=i,i},clearTimeout:function(t){this.timeouts&&null!=this.timeouts[t]&&(clearTimeout(this.timeouts[t]),delete this.timeouts[t])},clearAllTimeouts:function(){var t,e,n;if(this.timeouts){n=this.timeouts;for(e in n)t=n[e],this.clearTimeout(e)}},setInterval:function(t,e,n){var i,o;return this.clearInterval(t),null==(o=this.intervals)&&(this.intervals={}),i=setInterval(n,e),this.intervals[t]=i,i},clearInterval:function(t){this.intervals&&this.intervals[t]&&(clearInterval(this.intervals[t]),delete this.intervals[t])},clearAllIntervals:function(){var t,e,n;if(this.intervals){n=this.intervals;for(e in n)t=n[e],this.clearInterval(e)}},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},"function"==typeof Object.freeze&&Object.freeze(i),n.exports=i}),t.register("chaplin/lib/event_broker",function(e,n,i){"use strict";var o,s,r=[].slice;s=t("chaplin/mediator"),o={subscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return s.unsubscribe(t,e,this),s.subscribe(t,e,this)},unsubscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return s.unsubscribe(t,e)},unsubscribeAllEvents:function(){return s.unsubscribe(null,null,this)},publishEvent:function(){var t,e;if(e=arguments[0],t=arguments.length>=2?r.call(arguments,1):[],"string"!=typeof e)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return s.publish.apply(s,[e].concat(r.call(t)))}},"function"==typeof Object.freeze&&Object.freeze(o),i.exports=o}),t.register("chaplin/lib/support",function(t,e,n){"use strict";var i;i={propertyDescriptors:function(){var t;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return t={},Object.defineProperty(t,"foo",{value:"bar"}),"bar"===t.foo}catch(e){return!1}}()},n.exports=i}),t.register("chaplin/lib/composition",function(e,n,i){"use strict";var o,s,r,a,l,c={}.hasOwnProperty;l=t("underscore"),o=t("backbone"),r=t("chaplin/lib/event_broker"),a=Object.prototype.hasOwnProperty,i.exports=s=function(){function t(t){null!=t&&(this.options=l.extend({},t)),this.item=this,this.initialize(this.options)}return t.extend=o.Model.extend,l.extend(t.prototype,o.Events),l.extend(t.prototype,r),t.prototype.item=null,t.prototype.options=null,t.prototype._stale=!1,t.prototype.initialize=function(){},t.prototype.compose=function(){},t.prototype.check=function(t){return l.isEqual(this.options,t)},t.prototype.stale=function(t){var e,n;if(null==t)return this._stale;this._stale=t;for(n in this)e=this[n],e&&e!==this&&"object"==typeof e&&a.call(e,"stale")&&(e.stale=t)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,n,i,o;if(!this.disposed){for(e in this)c.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&t!==this&&(t.dispose(),delete this[e]));for(this.unsubscribeAllEvents(),this.stopListening(),n=["redirected"],i=0,o=n.length;o>i;i++)e=n[i],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/lib/sync_machine",function(t,e,n){"use strict";var i,o,s,r,a,l,c,u,h,p;for(a="unsynced",s="syncing",o="synced",i="syncStateChange",r={_syncState:a,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===a},isSynced:function(){return this._syncState===o},isSyncing:function(){return this._syncState===s},unsync:function(){var t;((t=this._syncState)===s||t===o)&&(this._previousSync=this._syncState,this._syncState=a,this.trigger(this._syncState,this,this._syncState),this.trigger(i,this,this._syncState))},beginSync:function(){var t;((t=this._syncState)===a||t===o)&&(this._previousSync=this._syncState,this._syncState=s,this.trigger(this._syncState,this,this._syncState),this.trigger(i,this,this._syncState))},finishSync:function(){this._syncState===s&&(this._previousSync=this._syncState,this._syncState=o,this.trigger(this._syncState,this,this._syncState),this.trigger(i,this,this._syncState))},abortSync:function(){this._syncState===s&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(i,this,this._syncState))}},p=[a,s,o,i],c=function(t){return r[t]=function(e,n){return null==n&&(n=this),this.on(t,e,n),this._syncState===t?e.call(n):void 0}},u=0,h=p.length;h>u;u++)l=p[u],c(l);"function"==typeof Object.freeze&&Object.freeze(r),n.exports=r}),t.register("chaplin/lib/utils",function(e,n,i){"use strict";var o,s,r,a=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c={}.hasOwnProperty;r=t("underscore"),o=t("chaplin/lib/support"),s={beget:function(){var t;return"function"==typeof Object.create?Object.create:(t=function(){},function(e){return t.prototype=e,new t})}(),indexOf:function(){return Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:r.indexOf?r.indexOf:void 0}(),isArray:Array.isArray||r.isArray,serialize:function(t){if("function"==typeof t.serialize)return t.serialize();if("function"==typeof t.toJSON)return t.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var t;return o.propertyDescriptors?(t={writable:!1,enumerable:!0,configurable:!1},function(){var e,n,i,o,s;for(e=arguments[0],i=arguments.length>=2?a.call(arguments,1):[],o=0,s=i.length;s>o;o++)n=i[o],t.value=e[n],Object.defineProperty(e,n,t);return!0}):function(){return!1}}(),getPrototypeChain:function(t){var e,n,i,o;for(e=[t.constructor.prototype];t=null!=(n=null!=(i=t.constructor)?i.__super__:void 0)?n:null!=(o=t.constructor)?o.superclass:void 0;)e.push(t);return e.reverse()},getAllPropertyVersions:function(t,e){var n,i,o,r,a,c;for(i=[],c=s.getPrototypeChain(t),r=0,a=c.length;a>r;r++)n=c[r],o=n[e],o&&0>l.call(i,o)&&i.push(o);return i},upcase:function(t){return t.charAt(0).toUpperCase()+t.substring(1)},escapeRegExp:function(t){return((t||"")+"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(t){return t.shiftKey||t.altKey||t.ctrlKey||t.metaKey},queryParams:{stringify:function(t){var e,n,i,o,r,a,l,u;o="",r=function(t,e){return null!=e?"&"+t+"="+encodeURIComponent(e):""};for(i in t)if(c.call(t,i))if(a=t[i],n=encodeURIComponent(i),s.isArray(a))for(l=0,u=a.length;u>l;l++)e=a[l],o+=r(n,e);else o+=r(n,a);return o&&o.substring(1)},parse:function(t){var e,n,i,o,s,r,a,l,c;if(s={},!t)return s;for(o=t.split("&"),a=0,l=o.length;l>a;a++)i=o[a],i.length&&(c=i.split("="),n=c[0],r=c[1],n.length&&(n=decodeURIComponent(n),r=decodeURIComponent(r),e=s[n],e?e.push?e.push(r):s[n]=[e,r]:s[n]=r));return s}}},"function"==typeof Object.seal&&Object.seal(s),i.exports=s}),t.register("chaplin/lib/helpers",function(e,n,i){"use strict";var o,s;s=t("chaplin/mediator"),o={reverse:function(t,e,n){return s.execute("router:reverse",t,e,n)},redirectTo:function(t,e,n){return s.execute("router:route",t,e,n)}},i.exports=o}),t.register("chaplin",function(e,n,i){i.exports={Application:t("chaplin/application"),mediator:t("chaplin/mediator"),Dispatcher:t("chaplin/dispatcher"),Controller:t("chaplin/controllers/controller"),Composer:t("chaplin/composer"),Composition:t("chaplin/lib/composition"),Collection:t("chaplin/models/collection"),Model:t("chaplin/models/model"),Layout:t("chaplin/views/layout"),View:t("chaplin/views/view"),CollectionView:t("chaplin/views/collection_view"),Route:t("chaplin/lib/route"),Router:t("chaplin/lib/router"),Delayer:t("chaplin/lib/delayer"),EventBroker:t("chaplin/lib/event_broker"),helpers:t("chaplin/lib/helpers"),support:t("chaplin/lib/support"),SyncMachine:t("chaplin/lib/sync_machine"),utils:t("chaplin/lib/utils")}});var e=function(e,n){t.register("backbone",function(t,n,i){i.exports=e}),t.register("underscore",function(t,e,i){i.exports=n})};if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(n,i){return e(n,i),t("chaplin")});else if("object"==typeof module&&module&&module.exports)e(require("backbone"),require("underscore")),module.exports=t("chaplin");else{if("function"!=typeof require)throw Error("Chaplin requires Common.js or AMD modules");e(window.Backbone,window._||window.Backbone.utils),window.Chaplin=t("chaplin")}}();var Handlebars={};(function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,i="[object Function]",o="[object Object]";t.registerHelper=function(e,i,s){if(n.call(e)===o){if(s||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else s&&(i.not=s),this.helpers[e]=i},t.registerPartial=function(e,i){n.call(e)===o?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,o){var s=o.inverse||function(){},r=o.fn,a=n.call(e);return a===i&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?s(this):"[object Array]"===a?e.length>0?t.helpers.each(e,o):s(this):r(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(e>=t.logger.level){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,o){var s,r=o.fn,a=o.inverse,l=0,c="",u=n.call(e);if(u===i&&(e=e.call(this)),o.data&&(s=t.createFrame(o.data)),e&&"object"==typeof e)if(e instanceof Array)for(var h=e.length;h>l;l++)s&&(s.index=l),c+=r(e[l],{data:s});else for(var p in e)e.hasOwnProperty(p)&&(s&&(s.key=p),c+=r(e[p],{data:s}),l++);return 0===l&&(c=a(this)),c}),t.registerHelper("if",function(e,o){var s=n.call(e);return s===i&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?o.inverse(this):o.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(o,s){var r=n.call(o);return r===i&&(o=o.call(this)),t.Utils.isEmpty(o)?e:s.fn(o)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var s=function(){function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,e,n,i,o,s){var r=s.length-1;switch(o){case 1:return s[r-1];case 2:this.$=new i.ProgramNode([],s[r]);break;case 3:this.$=new i.ProgramNode(s[r-2],s[r]);break;case 4:this.$=new i.ProgramNode(s[r-1],[]);break;case 5:this.$=new i.ProgramNode(s[r]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[s[r]];break;case 9:s[r-1].push(s[r]),this.$=s[r-1];break;case 10:this.$=new i.BlockNode(s[r-2],s[r-1].inverse,s[r-1],s[r]);break;case 11:this.$=new i.BlockNode(s[r-2],s[r-1],s[r-1].inverse,s[r]);break;case 12:this.$=s[r];break;case 13:this.$=s[r];break;case 14:this.$=new i.ContentNode(s[r]);break;case 15:this.$=new i.CommentNode(s[r]);break;case 16:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 17:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 18:this.$=s[r-1];break;case 19:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1],"&"===s[r-2][2]);break;case 20:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1],!0);break;case 21:this.$=new i.PartialNode(s[r-1]);break;case 22:this.$=new i.PartialNode(s[r-2],s[r-1]);break;case 23:break;case 24:this.$=[[s[r-2]].concat(s[r-1]),s[r]];break;case 25:this.$=[[s[r-1]].concat(s[r]),null];break;case 26:this.$=[[s[r-1]],s[r]];break;case 27:this.$=[[s[r]],null];break;case 28:this.$=[[s[r]],null];break;case 29:s[r-1].push(s[r]),this.$=s[r-1];break;case 30:this.$=[s[r]];break;case 31:this.$=s[r];break;case 32:this.$=new i.StringNode(s[r]);break;case 33:this.$=new i.IntegerNode(s[r]);break;case 34:this.$=new i.BooleanNode(s[r]);break;case 35:this.$=s[r];break;case 36:this.$=new i.HashNode(s[r]);break;case 37:s[r-1].push(s[r]),this.$=s[r-1];break;case 38:this.$=[s[r]];break;case 39:this.$=[s[r-2],s[r]];break;case 40:this.$=[s[r-2],new i.StringNode(s[r])];break;case 41:this.$=[s[r-2],new i.IntegerNode(s[r])];break;case 42:this.$=[s[r-2],new i.BooleanNode(s[r])];break;case 43:this.$=[s[r-2],s[r]];break;case 44:this.$=new i.PartialNameNode(s[r]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(s[r]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(s[r]));break;case 47:this.$=new i.DataNode(s[r]);break;case 48:this.$=new i.IdNode(s[r]);break;case 49:s[r-2].push({part:s[r],separator:s[r-1]}),this.$=s[r-2];break;case 50:this.$=[{part:s[r]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t){throw Error(t)
},parse:function(t){function n(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,o=[0],s=[null],r=[],a=this.table,l="",c=0,u=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===e&&(this.lexer.yylloc={});var p=this.lexer.yylloc;r.push(p);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,y,_,g,x,v,b,w,C={};;){if(y=o[o.length-1],this.defaultActions[y]?_=this.defaultActions[y]:((null===f||f===e)&&(f=n()),_=a[y]&&a[y][f]),_===e||!_.length||!_[0]){var S="";if(!h){w=[];for(x in a[y])this.terminals_[x]&&x>2&&w.push("'"+this.terminals_[x]+"'");S=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:w})}}if(_[0]instanceof Array&&_.length>1)throw Error("Parse Error: multiple actions possible at state: "+y+", token: "+f);switch(_[0]){case 1:o.push(f),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),o.push(_[1]),f=null,d?(f=d,d=null):(u=this.lexer.yyleng,l=this.lexer.yytext,c=this.lexer.yylineno,p=this.lexer.yylloc,h>0&&h--);break;case 2:if(v=this.productions_[_[1]][1],C.$=s[s.length-v],C._$={first_line:r[r.length-(v||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(v||1)].first_column,last_column:r[r.length-1].last_column},m&&(C._$.range=[r[r.length-(v||1)].range[0],r[r.length-1].range[1]]),g=this.performAction.call(C,l,u,c,this.yy,_[1],s,r),g!==e)return g;v&&(o=o.slice(0,2*-1*v),s=s.slice(0,-1*v),r=r.slice(0,-1*v)),o.push(this.productions_[_[1]][0]),s.push(C.$),r.push(C._$),b=a[o[o.length-2]][o[o.length-1]],o.push(b);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,n,i,o,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;r.length>a&&(i=this._input.match(this.rules[r[a]]),!i||n&&!(i[0].length>n[0].length)||(n=i,o=a,this.options.flex));a++);return n?(s=n[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],t=this.performAction.call(this,this.yy,this,r[o],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==e?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){switch(n){case 0:return e.yytext="\\",14;case 1:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 4:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),31;case 23:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return e.yytext=e.yytext.substr(1,e.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},t.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},t}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();t.Parser=s,t.parse=function(e){return e.constructor===t.AST.ProgramNode?e:(t.Parser.yy=t.AST,t.Parser.parse(e))},t.AST={},t.AST.ProgramNode=function(e,n){this.type="program",this.statements=e,n&&(this.inverse=new t.AST.ProgramNode(n))},t.AST.MustacheNode=function(t,e,n){this.type="mustache",this.escaped=!n,this.hash=e;var i=this.id=t[0],o=this.params=t.slice(1),s=this.eligibleHelper=i.isSimple;this.isHelper=s&&(o.length||e)},t.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e},t.AST.BlockNode=function(e,n,i,o){var s=function(e,n){if(e.original!==n.original)throw new t.Exception(e.original+" doesn't match "+n.original)};s(e.id,o),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},t.AST.ContentNode=function(t){this.type="content",this.string=t},t.AST.HashNode=function(t){this.type="hash",this.pairs=t},t.AST.IdNode=function(e){this.type="ID";for(var n="",i=[],o=0,s=0,r=e.length;r>s;s++){var a=e[s].part;if(n+=(e[s].separator||"")+a,".."===a||"."===a||"this"===a){if(i.length>0)throw new t.Exception("Invalid path: "+n);".."===a?o++:this.isScoped=!0}else i.push(a)}this.original=n,this.parts=i,this.string=i.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},t.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t.original},t.AST.DataNode=function(t){this.type="DATA",this.id=t},t.AST.StringNode=function(t){this.type="STRING",this.original=this.string=this.stringModeValue=t},t.AST.IntegerNode=function(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},t.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},t.AST.CommentNode=function(t){this.type="comment",this.comment=t};var r=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;r.length>e;e++)this[r[e]]=t[r[e]]},t.Exception.prototype=Error(),t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return""+this.string};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/,u=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?""+e:null==e||e===!1?"":(e=""+e,c.test(e)?e.replace(l,u):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}};var h=t.Compiler=function(){},p=t.JavaScriptCompiler=function(){};h.prototype={compiler:h,disassemble:function(){for(var t,e,n,i=this.opcodes,o=[],s=0,r=i.length;r>s;s++)if(t=i[s],"DECLARE"===t.opcode)o.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);o.push(t.opcode+" "+e.join(" "))}return o.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],o=t.opcodes[n];if(i.opcode!==o.opcode||i.args.length!==o.args.length)return!1;for(var s=0;i.args.length>s;s++)if(i.args[s]!==o.args[s])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,n=t.statements;this.opcodes=[];for(var i=0,o=n.length;o>i;i++)e=n[i],this[e.type](e);return this.isSimple=1===o,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var o=0,s=n.depths.list.length;s>o;o++)e=n.depths.list[o],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var o=this.classifyMustache(e);"helper"===o?this.helperMustache(e,n,i):"simple"===o?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var o=0,s=i.length;s>o;o++)e=i[o],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,o=i.parts[0],s=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",o,s)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+o);this.opcode("invokeHelper",i.length,o)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new t.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var n=e.id.parts,i=0,o=n.length;o>i;i++)this.opcode("lookup",n[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var o=t.id.parts[0];i.knownHelpers[o]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}};var m=function(t){this.value=t};p.prototype={nameLookup:function(t,e){return/^[0-9]+$/.test(e)?t+"["+e+"]":p.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,n,i,o){this.environment=e,this.options=n||{},t.log(t.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,n);var s,r=e.opcodes;for(this.i=0,_=r.length;_>this.i;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(o)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(e){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var o=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)o.push("depth"+this.environment.depths.list[s]);var a=this.mergeSource();if(!this.isChild){var l=t.COMPILER_REVISION,c=t.REVISION_CHANGES[l];a="this.compilerInfo = ["+l+",'"+c+"'];\n"+a}if(e)return o.push(a),Function.apply(this,o);var u="function "+(this.name||"")+"("+o.join(",")+") {\n  "+a+"}";return t.log(t.logger.DEBUG,u+"\n\n"),u},mergeSource:function(){for(var t,n="",i=0,o=this.source.length;o>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(n+="buffer += "+t+";\n  ",t=e),n+=s+"\n  ")}return n},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=e,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+i+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+o+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var o=this.hash;e&&o.contexts.push("'"+t+"': "+e),n&&o.types.push("'"+t+"': "+n),o.values.push("'"+t+"': ("+i+")")},compiler:p,compileChildren:function(t,e){for(var n,i,o=t.children,s=0,r=o.length;r>s;s++){n=o[s],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,o=[n.index,n.name,"data"],s=0,r=i.length;r>s;s++)e=i[s],1===e?o.push("depth0"):o.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+o.join(", ")+")"},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new m(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n="",i=this.isInline();if(i){var o=this.popStack(!0);if(o instanceof m)e=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(s)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var r=t.call(this,e);return i?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+r+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+n+r+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var i=t[e];i instanceof m?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();return!t&&n instanceof m?n.value:(e||this.stackSlot--,n)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof m?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var o=this.nameLookup("helpers",e,"helper");return{params:i,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,o,s,r=[],a=[],l=[];r.push("hash:"+this.popStack()),o=this.popStack(),s=this.popStack(),(s||o)&&(s||(this.context.aliases.self="this",s="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),r.push("inverse:"+o),r.push("fn:"+s));for(var c=0;t>c;c++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+a.join(",")+"]"),r.push("types:["+l.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),e.push("options")):e.push(r),e.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),d=p.RESERVED_WORDS={},y=0,_=f.length;_>y;y++)d[f[y]]=!0;p.isValidJavaScriptVariableName=function(t){return!p.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},t.precompile=function(e,n){if(null==e||"string"!=typeof e&&e.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);n=n||{},"data"in n||(n.data=!0);var i=t.parse(e),o=(new h).compile(i,n);return(new p).compile(o,n)},t.compile=function(n,i){function o(){var o=t.parse(n),s=(new h).compile(o,i),r=(new p).compile(s,i,e,!0);return t.template(r)}if(null==n||"string"!=typeof n&&n.constructor!==t.AST.ProgramNode)throw new t.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);i=i||{},"data"in i||(i.data=!0);var s;return function(t,e){return s||(s=o()),s.call(this,t,e)}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var o=this.programs[e];return i?o=t.VM.program(e,n,i):o||(o=this.programs[e]=t.VM.program(e,n)),o},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,o){o=o||{};var s=e.call(n,t,i,o.helpers,o.partials,o.data),r=n.compilerInfo||[],a=r[0]||1,l=t.COMPILER_REVISION;if(a!==l){if(l>a){var c=t.REVISION_CHANGES[l],u=t.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+r[1]+")."}return s}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),o=function(t,o){return o=o||{},e.apply(this,[t,o.data||n].concat(i))};return o.program=t,o.depth=i.length,o},program:function(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,o,s,r,a){var l={helpers:s,partials:r,data:a};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(o,l);if(t.compile)return r[i]=t.compile(n,{data:a!==e}),r[i](o,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template})(Handlebars),"function"==typeof require&&"function"==typeof require.register&&require.register("Handlebars",function(t,e,n){n.exports=Handlebars}),!function(t,e,n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(function(){return n()}):e[t]=n()}("chai",this,function(){function require(t){var e=require.resolve(t),n=require.modules[e];if(!n)throw Error('failed to require "'+t+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,require.relative(e))),n.exports}return require.modules={},require.resolve=function(t){var e=t,n=t+".js",i=t+"/index.js";return require.modules[n]&&n||require.modules[i]&&i||e},require.register=function(t,e){require.modules[t]=e},require.relative=function(t){return function(e){if("."!=e.charAt(0))return require(e);var n=t.split("/"),i=e.split("/");n.pop();for(var o=0;i.length>o;o++){var s=i[o];".."==s?n.pop():"."!=s&&n.push(s)}return require(n.join("/"))}},require.alias=function(t,e){var n=require.modules[t];require.modules[e]=n},require.register("chai.js",function(t,e,n){var i=[],e=t.exports={};e.version="1.4.0",e.Assertion=n("./chai/assertion"),e.AssertionError=n("./chai/browser/error");var o=n("./chai/utils");e.use=function(t){return~i.indexOf(t)||(t(this,o),i.push(t)),this};var s=n("./chai/core/assertions");e.use(s);var r=n("./chai/interface/expect");e.use(r);var a=n("./chai/interface/should");e.use(a);var l=n("./chai/interface/assert");e.use(l)}),require.register("chai/assertion.js",function(t,e,n){function i(t,e,n){r(this,"ssfi",n||arguments.callee),r(this,"object",t),r(this,"message",e)}var o=n("./browser/error"),s=n("./utils"),r=s.flag;t.exports=i,i.includeStack=!1,i.addProperty=function(t,e){s.addProperty(this.prototype,t,e)},i.addMethod=function(t,e){s.addMethod(this.prototype,t,e)},i.addChainableMethod=function(t,e,n){s.addChainableMethod(this.prototype,t,e,n)},i.overwriteProperty=function(t,e){s.overwriteProperty(this.prototype,t,e)},i.overwriteMethod=function(t,e){s.overwriteMethod(this.prototype,t,e)},i.prototype.assert=function(t,e,n,a){var l=s.test(this,arguments);if(!l){var e=s.getMessage(this,arguments),c=s.getActual(this,arguments);throw new o({message:e,actual:c,expected:a,stackStartFunction:i.includeStack?this.assert:r(this,"ssfi")})}},Object.defineProperty(i.prototype,"_obj",{get:function(){return r(this,"object")},set:function(t){r(this,"object",t)}})}),require.register("chai/browser/error.js",function(t){function e(t){if(t=t||{},this.message=t.message,this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.stackStartFunction&&Error.captureStackTrace){var e=t.stackStartFunction;Error.captureStackTrace(this,e)}}t.exports=e,e.prototype=Object.create(Error.prototype),e.prototype.name="AssertionError",e.prototype.constructor=e,e.prototype.toString=function(){return this.message}}),require.register("chai/core/assertions.js",function(t){t.exports=function(t,e){function n(t,e){e&&x(this,"message",e);var n=x(this,"object"),i=t.charAt(0).toUpperCase(),o=i+t.slice(1),s=~["A","E","I","O","U"].indexOf(i)?"an ":"a ";this.assert("[object "+o+"]"===g.call(n),"expected #{this} to be "+s+t,"expected #{this} not to be "+s+t)}function i(){x(this,"contains",!0)}function o(t,n){n&&x(this,"message",n);var i=x(this,"object");this.assert(~i.indexOf(t),"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))
}function s(){var t=x(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function r(t,e){e&&x(this,"message",e);var n=x(this,"object");return x(this,"deep")?this.eql(t):(this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t),void 0)}function a(t,e){e&&x(this,"message",e);var n=x(this,"object");if(x(this,"doLength")){new _(n,e).to.have.property("length");var i=n.length;this.assert(i>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,i)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function l(t,e){e&&x(this,"message",e);var n=x(this,"object");if(x(this,"doLength")){new _(n,e).to.have.property("length");var i=n.length;this.assert(i>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,i)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function c(t,e){e&&x(this,"message",e);var n=x(this,"object");if(x(this,"doLength")){new _(n,e).to.have.property("length");var i=n.length;this.assert(t>i,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,i)}else this.assert(t>n,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function u(t,e){e&&x(this,"message",e);var n=x(this,"object");if(x(this,"doLength")){new _(n,e).to.have.property("length");var i=n.length;this.assert(t>=i,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,i)}else this.assert(t>=n,"expected #{this} to be at most "+t,"expected #{this} to be above "+t)}function h(t,n){n&&x(this,"message",n);var i=e.getName(t);this.assert(x(this,"object")instanceof t,"expected #{this} to be an instance of "+i,"expected #{this} to not be an instance of "+i)}function p(t,n){n&&x(this,"message",n);var i=x(this,"object");this.assert(i.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function m(){x(this,"doLength",!0)}function f(t,e){e&&x(this,"message",e);var n=x(this,"object");new _(n,e).to.have.property("length");var i=n.length;this.assert(i==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,i)}function d(t){var n,i=x(this,"object"),o=!0;if(t=t instanceof Array?t:Array.prototype.slice.call(arguments),!t.length)throw Error("keys required");var s=Object.keys(i),r=t.length;if(o=t.every(function(t){return~s.indexOf(t)}),x(this,"negate")||x(this,"contains")||(o=o&&t.length==s.length),r>1){t=t.map(function(t){return e.inspect(t)});var a=t.pop();n=t.join(", ")+", and "+a}else n=e.inspect(t[0]);n=(r>1?"keys ":"key ")+n,n=(x(this,"contains")?"contain ":"have ")+n,this.assert(o,"expected #{this} to "+n,"expected #{this} to not "+n)}function y(t,n,i){i&&x(this,"message",i);var o=x(this,"object");new _(o,i).is.a("function");var s=!1,r=null,a=null,l=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(r=t,t=null,n=null):"function"==typeof t?a=(new t).name:t=null;try{o()}catch(c){if(r)return this.assert(c===r,"expected #{this} to throw "+e.inspect(r)+" but "+e.inspect(c)+" was thrown","expected #{this} to not throw "+e.inspect(r)),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw "+a+" but "+e.inspect(c)+" was thrown","expected #{this} to not throw "+a+" but "+e.inspect(c)+" was thrown"),!n))return this;if(c.message&&n&&n instanceof RegExp)return this.assert(n.exec(c.message),"expected #{this} to throw error matching "+n+" but got "+e.inspect(c.message),"expected #{this} to throw error not matching "+n),this;if(c.message&&n&&"string"==typeof n)return this.assert(~c.message.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,c.message),this;s=!0,l=c}var u=a?a:r?e.inspect(r):"an error",h="";s&&(h=" but "+e.inspect(l)+" was thrown"),this.assert(s===!0,"expected #{this} to throw "+u+h,"expected #{this} to not throw "+u+h)}var _=t.Assertion,g=Object.prototype.toString,x=e.flag;["to","be","been","is","and","have","with","that","at","of"].forEach(function(t){_.addProperty(t,function(){return this})}),_.addProperty("not",function(){x(this,"negate",!0)}),_.addProperty("deep",function(){x(this,"deep",!0)}),_.addChainableMethod("an",n),_.addChainableMethod("a",n),_.addChainableMethod("include",o,i),_.addChainableMethod("contain",o,i),_.addProperty("ok",function(){this.assert(x(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),_.addProperty("true",function(){this.assert(!0===x(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),_.addProperty("false",function(){this.assert(!1===x(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),_.addProperty("null",function(){this.assert(null===x(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),_.addProperty("undefined",function(){this.assert(void 0===x(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),_.addProperty("exist",function(){this.assert(null!=x(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),_.addProperty("empty",function(){var t=x(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),_.addProperty("arguments",s),_.addProperty("Arguments",s),_.addMethod("equal",r),_.addMethod("equals",r),_.addMethod("eq",r),_.addMethod("eql",function(t,n){n&&x(this,"message",n),this.assert(e.eql(t,x(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t)}),_.addMethod("above",a),_.addMethod("gt",a),_.addMethod("greaterThan",a),_.addMethod("least",l),_.addMethod("gte",l),_.addMethod("below",c),_.addMethod("lt",c),_.addMethod("lessThan",c),_.addMethod("most",u),_.addMethod("lte",u),_.addMethod("within",function(t,e,n){n&&x(this,"message",n);var i=x(this,"object"),o=t+".."+e;if(x(this,"doLength")){new _(i,n).to.have.property("length");var s=i.length;this.assert(s>=t&&e>=s,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(i>=t&&e>=i,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),_.addMethod("instanceof",h),_.addMethod("instanceOf",h),_.addMethod("property",function(t,n,i){i&&x(this,"message",i);var o=x(this,"deep")?"deep property ":"property ",s=x(this,"negate"),r=x(this,"object"),a=x(this,"deep")?e.getPathValue(t,r):r[t];if(s&&void 0!==n){if(void 0===a)throw i=null!=i?i+": ":"",Error(i+e.inspect(r)+" has no "+o+e.inspect(t))}else this.assert(void 0!==a,"expected #{this} to have a "+o+e.inspect(t),"expected #{this} to not have "+o+e.inspect(t));void 0!==n&&this.assert(n===a,"expected #{this} to have a "+o+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+e.inspect(t)+" of #{act}",n,a),x(this,"object",a)}),_.addMethod("ownProperty",p),_.addMethod("haveOwnProperty",p),_.addChainableMethod("length",f,m),_.addMethod("lengthOf",f,m),_.addMethod("match",function(t,e){e&&x(this,"message",e);var n=x(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}),_.addMethod("string",function(t,n){n&&x(this,"message",n);var i=x(this,"object");new _(i,n).is.a("string"),this.assert(~i.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),_.addMethod("keys",d),_.addMethod("key",d),_.addMethod("throw",y),_.addMethod("throws",y),_.addMethod("Throw",y),_.addMethod("respondTo",function(t,n){n&&x(this,"message",n);var i=x(this,"object"),o=x(this,"itself"),s="function"!=typeof i||o?i[t]:i.prototype[t];this.assert("function"==typeof s,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}),_.addProperty("itself",function(){x(this,"itself",!0)}),_.addMethod("satisfy",function(t,n){n&&x(this,"message",n);var i=x(this,"object");this.assert(t(i),"expected #{this} to satisfy "+e.inspect(t),"expected #{this} to not satisfy"+e.inspect(t),this.negate?!1:!0,t(i))}),_.addMethod("closeTo",function(t,e,n){n&&x(this,"message",n);var i=x(this,"object");this.assert(e>=Math.abs(i-t),"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)})}}),require.register("chai/interface/assert.js",function(module,exports,require){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(t,e){var n=new Assertion(null);n.assert(t,e,"[ negation message unavailable ]")};assert.fail=function(t,e,n,i){throw new chai.AssertionError({actual:t,expected:e,message:n,operator:i,stackStartFunction:assert.fail})},assert.ok=function(t,e){new Assertion(t,e).is.ok},assert.equal=function(t,e,n){var i=new Assertion(t,n);i.assert(e==flag(i,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},assert.notEqual=function(t,e,n){var i=new Assertion(t,n);i.assert(e!=flag(i,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},assert.strictEqual=function(t,e,n){new Assertion(t,n).to.equal(e)},assert.notStrictEqual=function(t,e,n){new Assertion(t,n).to.not.equal(e)},assert.deepEqual=function(t,e,n){new Assertion(t,n).to.eql(e)},assert.notDeepEqual=function(t,e,n){new Assertion(t,n).to.not.eql(e)},assert.isTrue=function(t,e){new Assertion(t,e).is["true"]},assert.isFalse=function(t,e){new Assertion(t,e).is["false"]},assert.isNull=function(t,e){new Assertion(t,e).to.equal(null)},assert.isNotNull=function(t,e){new Assertion(t,e).to.not.equal(null)},assert.isUndefined=function(t,e){new Assertion(t,e).to.equal(void 0)},assert.isDefined=function(t,e){new Assertion(t,e).to.not.equal(void 0)},assert.isFunction=function(t,e){new Assertion(t,e).to.be.a("function")},assert.isNotFunction=function(t,e){new Assertion(t,e).to.not.be.a("function")},assert.isObject=function(t,e){new Assertion(t,e).to.be.a("object")},assert.isNotObject=function(t,e){new Assertion(t,e).to.not.be.a("object")},assert.isArray=function(t,e){new Assertion(t,e).to.be.an("array")},assert.isNotArray=function(t,e){new Assertion(t,e).to.not.be.an("array")},assert.isString=function(t,e){new Assertion(t,e).to.be.a("string")},assert.isNotString=function(t,e){new Assertion(t,e).to.not.be.a("string")},assert.isNumber=function(t,e){new Assertion(t,e).to.be.a("number")},assert.isNotNumber=function(t,e){new Assertion(t,e).to.not.be.a("number")},assert.isBoolean=function(t,e){new Assertion(t,e).to.be.a("boolean")},assert.isNotBoolean=function(t,e){new Assertion(t,e).to.not.be.a("boolean")},assert.typeOf=function(t,e,n){new Assertion(t,n).to.be.a(e)},assert.notTypeOf=function(t,e,n){new Assertion(t,n).to.not.be.a(e)},assert.instanceOf=function(t,e,n){new Assertion(t,n).to.be.instanceOf(e)},assert.notInstanceOf=function(t,e,n){new Assertion(t,n).to.not.be.instanceOf(e)},assert.include=function(t,e,n){var i=new Assertion(t,n);Array.isArray(t)?i.to.include(e):"string"==typeof t&&i.to.contain.string(e)},assert.match=function(t,e,n){new Assertion(t,n).to.match(e)},assert.notMatch=function(t,e,n){new Assertion(t,n).to.not.match(e)},assert.property=function(t,e,n){new Assertion(t,n).to.have.property(e)},assert.notProperty=function(t,e,n){new Assertion(t,n).to.not.have.property(e)},assert.deepProperty=function(t,e,n){new Assertion(t,n).to.have.deep.property(e)},assert.notDeepProperty=function(t,e,n){new Assertion(t,n).to.not.have.deep.property(e)},assert.propertyVal=function(t,e,n,i){new Assertion(t,i).to.have.property(e,n)},assert.propertyNotVal=function(t,e,n,i){new Assertion(t,i).to.not.have.property(e,n)},assert.deepPropertyVal=function(t,e,n,i){new Assertion(t,i).to.have.deep.property(e,n)},assert.deepPropertyNotVal=function(t,e,n,i){new Assertion(t,i).to.not.have.deep.property(e,n)},assert.lengthOf=function(t,e,n){new Assertion(t,n).to.have.length(e)},assert.Throw=function(t,e,n){"string"==typeof e&&(n=e,e=null),new Assertion(t,n).to.Throw(e)},assert.doesNotThrow=function(t,e,n){"string"==typeof e&&(n=e,e=null),new Assertion(t,n).to.not.Throw(e)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.closeTo=function(t,e,n,i){new Assertion(t,i).to.be.closeTo(e,n)},assert.ifError=function(t,e){new Assertion(t,e).to.not.be.ok},function alias(t,e){return assert[e]=assert[t],alias}("Throw","throw")("Throw","throws")}}),require.register("chai/interface/expect.js",function(t){t.exports=function(t){t.expect=function(e,n){return new t.Assertion(e,n)}}}),require.register("chai/interface/should.js",function(t){t.exports=function(t){function e(){Object.defineProperty(Object.prototype,"should",{set:function(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})},get:function(){return this instanceof String||this instanceof Number?new n(this.constructor(this)):this instanceof Boolean?new n(1==this):new n(this)},configurable:!0});var t={};return t.equal=function(t,e,i){new n(t,i).to.equal(e)},t.Throw=function(t,e,i,o){new n(t,o).to.Throw(e,i)},t.exist=function(t,e){new n(t,e).to.exist},t.not={},t.not.equal=function(t,e,i){new n(t,i).to.not.equal(e)},t.not.Throw=function(t,e,i,o){new n(t,o).to.not.Throw(e,i)},t.not.exist=function(t,e){new n(t,e).to.not.exist},t["throw"]=t.Throw,t.not["throw"]=t.not.Throw,t}var n=t.Assertion;t.should=e,t.Should=e}}),require.register("chai/utils/addChainableMethod.js",function(t,e,n){var i=n("./transferFlags");t.exports=function(t,e,n,o){"function"!=typeof o&&(o=function(){}),Object.defineProperty(t,e,{get:function(){o.call(this);var e=function(){var t=n.apply(this,arguments);return void 0===t?this:t},s=Object.getOwnPropertyNames(t);return s.forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n),o=Object.getOwnPropertyDescriptor(Function.prototype,n);(!o||o.configurable)&&"arguments"!==n&&Object.defineProperty(e,n,i)}),i(this,e),e},configurable:!0})}}),require.register("chai/utils/addMethod.js",function(t){t.exports=function(t,e,n){t[e]=function(){var t=n.apply(this,arguments);return void 0===t?this:t}}}),require.register("chai/utils/addProperty.js",function(t){t.exports=function(t,e,n){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return void 0===t?this:t},configurable:!0})}}),require.register("chai/utils/eql.js",function(t,e,n){function i(t,e,n){if(t===e)return!0;if(a.isBuffer(t)&&a.isBuffer(e)){if(t.length!=e.length)return!1;for(var i=0;t.length>i;i++)if(t[i]!==e[i])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t===e:r(t,e,n)}function o(t){return null===t||void 0===t}function s(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t,e,n){if(o(t)||o(e))return!1;if(t.prototype!==e.prototype)return!1;var r;if(n){for(r=0;n.length>r;r++)if(n[r][0]===t&&n[r][1]===e||n[r][0]===e&&n[r][1]===t)return!0}else n=[];if(s(t))return s(e)?(t=pSlice.call(t),e=pSlice.call(e),i(t,e,n)):!1;try{var a,l=Object.keys(t),c=Object.keys(e)}catch(u){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),r=l.length-1;r>=0;r--)if(l[r]!=c[r])return!1;for(n.push([t,e]),r=l.length-1;r>=0;r--)if(a=l[r],!i(t[a],e[a],n))return!1;return!0}t.exports=i;var a;try{a=n("buffer").Buffer}catch(l){a={isBuffer:function(){return!1}}}}),require.register("chai/utils/flag.js",function(t){t.exports=function(t,e,n){var i=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?i[e]:(i[e]=n,void 0)}}),require.register("chai/utils/getActual.js",function(t){t.exports=function(t,e){var n=e[4];return n!==void 0?n:t._obj}}),require.register("chai/utils/getMessage.js",function(t,e,n){var i=n("./flag"),o=n("./getActual"),s=(n("./inspect"),n("./objDisplay"));t.exports=function(t,e){var n=i(t,"negate"),r=i(t,"object"),a=e[3],l=o(t,e),c=n?e[2]:e[1],u=i(t,"message");return c=c||"",c=c.replace(/#{this}/g,s(r)).replace(/#{act}/g,s(l)).replace(/#{exp}/g,s(a)),u?u+": "+c:c}}),require.register("chai/utils/getName.js",function(t){t.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}}),require.register("chai/utils/getPathValue.js",function(t){function e(t){var e=t.replace(/\[/g,".["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t}})}function n(t,e){for(var n,i=e,o=0,s=t.length;s>o;o++){var r=t[o];i?(r.p!==void 0?i=i[r.p]:r.i!==void 0&&(i=i[r.i]),o==s-1&&(n=i)):n=void 0}return n}t.exports=function(t,i){var o=e(t);return n(o,i)}}),require.register("chai/utils/index.js",function(t,e,n){var e=t.exports={};e.test=n("./test"),e.getMessage=n("./getMessage"),e.getActual=n("./getActual"),e.inspect=n("./inspect"),e.objDisplay=n("./objDisplay"),e.flag=n("./flag"),e.transferFlags=n("./transferFlags"),e.eql=n("./eql"),e.getPathValue=n("./getPathValue"),e.getName=n("./getName"),e.addProperty=n("./addProperty"),e.addMethod=n("./addMethod"),e.overwriteProperty=n("./overwriteProperty"),e.overwriteMethod=n("./overwriteMethod"),e.addChainableMethod=n("./addChainableMethod")}),require.register("chai/utils/inspect.js",function(t,e,n){function i(t,e,n){var i={showHidden:e,seen:[],stylize:function(t){return t}};return o(i,t,n===void 0?2:n)}function o(t,n,i){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n))return n.inspect(i);var o=s(t,n);if(o)return o;if(_(n))return y(n);var f=Object.keys(n),g=t.showHidden?Object.getOwnPropertyNames(n):f;if(0===g.length||m(n)&&(1===g.length&&"stack"===g[0]||2===g.length&&"description"===g[0]&&"stack"===g[1])){if("function"==typeof n){var x=d(n),v=x?": "+x:"";return t.stylize("[Function"+v+"]","special")}if(h(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(m(n))return r(n)}var b="",w=!1,C=["{","}"];if(u(n)&&(w=!0,C=["[","]"]),"function"==typeof n){var x=d(n),v=x?": "+x:"";b=" [Function"+v+"]"}if(h(n)&&(b=" "+RegExp.prototype.toString.call(n)),p(n)&&(b=" "+Date.prototype.toUTCString.call(n)),m(n))return r(n);if(0===g.length&&(!w||0==n.length))return C[0]+b+C[1];if(0>i)return h(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=w?a(t,n,i,f,g):g.map(function(e){return l(t,n,i,f,e,w)}),t.seen.pop(),c(S,b,C)}function s(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}return null===e?t.stylize("null","null"):void 0}function r(t){return"["+Error.prototype.toString.call(t)+"]"}function a(t,e,n,i,o){for(var s=[],r=0,a=e.length;a>r;++r)Object.prototype.hasOwnProperty.call(e,r+"")?s.push(l(t,e,n,i,r+"",!0)):s.push("");return o.forEach(function(o){o.match(/^\d+$/)||s.push(l(t,e,n,i,o,!0))}),s}function l(t,e,n,i,s,r){var a,l;if(e.__lookupGetter__&&(e.__lookupGetter__(s)?l=e.__lookupSetter__(s)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(s)&&(l=t.stylize("[Setter]","special"))),0>i.indexOf(s)&&(a="["+s+"]"),l||(0>t.seen.indexOf(e[s])?(l=null===n?o(t,e[s],null):o(t,e[s],n-1),l.indexOf("\n")>-1&&(l=r?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n"))):l=t.stylize("[Circular]","special")),a===void 0){if(r&&s.match(/^\d+$/))return l;a=JSON.stringify(""+s),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+l}function c(t,e,n){var i=0,o=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function u(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===f(t)}function h(t){return"object"==typeof t&&"[object RegExp]"===f(t)}function p(t){return"object"==typeof t&&"[object Date]"===f(t)}function m(t){return"object"==typeof t&&"[object Error]"===f(t)}function f(t){return Object.prototype.toString.call(t)}var d=n("./getName");t.exports=i;var y=function(t){if("outerHTML"in t)return t.outerHTML;var e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"_");(window.HTMLElement||window.Element).prototype;var i,o=new XMLSerializer;return document.xmlVersion?o.serializeToString(t):(n.appendChild(t.cloneNode(!1)),i=n.innerHTML.replace("><",">"+t.innerHTML+"<"),n.innerHTML="",i)},_=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}}),require.register("chai/utils/objDisplay.js",function(t,e,n){var i=n("./inspect");t.exports=function(t){var e=i(t),n=Object.prototype.toString.call(t);if(e.length>=40){if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var o=Object.keys(t),s=o.length>2?o.splice(0,2).join(", ")+", ...":o.join(", ");return"{ Object ("+s+") }"}return e}return e}}),require.register("chai/utils/overwriteMethod.js",function(t){t.exports=function(t,e,n){var i=t[e],o=function(){return this};i&&"function"==typeof i&&(o=i),t[e]=function(){var t=n(o).apply(this,arguments);return void 0===t?this:t}}}),require.register("chai/utils/overwriteProperty.js",function(t){t.exports=function(t,e,n){var i=Object.getOwnPropertyDescriptor(t,e),o=function(){};i&&"function"==typeof i.get&&(o=i.get),Object.defineProperty(t,e,{get:function(){var t=n(o).call(this);return void 0===t?this:t},configurable:!0})}}),require.register("chai/utils/test.js",function(t,e,n){var i=n("./flag");t.exports=function(t,e){var n=i(t,"negate"),o=e[0];return n?!o:o}}),require.register("chai/utils/transferFlags.js",function(t){t.exports=function(t,e,n){var i=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var o in i)(n||"object"!==o&&"ssfi"!==o&&"message"!=o)&&(e.__flags[o]=i[o])}}),require.alias("./chai.js","chai"),require("chai")}),function(){function t(e){var n=t.resolve(e),i=t.modules[n];if(!i)throw Error('failed to require "'+e+'"');return i.exports||(i.exports={},i.call(i.exports,i,i.exports,t.relative(n))),i.exports}t.modules={},t.resolve=function(e){var n=e,i=e+".js",o=e+"/index.js";return t.modules[i]&&i||t.modules[o]&&o||n},t.register=function(e,n){t.modules[e]=n},t.relative=function(e){return function(n){if("."!=n.charAt(0))return t(n);var i=e.split("/"),o=n.split("/");i.pop();for(var s=0;o.length>s;s++){var r=o[s];".."==r?i.pop():"."!=r&&i.push(r)}return t(i.join("/"))}},t.register("browser/debug.js",function(t){t.exports=function(){return function(){}}}),t.register("browser/diff.js",function(){}),t.register("browser/events.js",function(t,e){function n(t){return"[object Array]"=={}.toString.call(t)}function i(){}e.EventEmitter=i,i.prototype.on=function(t,e){return this.$events||(this.$events={}),this.$events[t]?n(this.$events[t])?this.$events[t].push(e):this.$events[t]=[this.$events[t],e]:this.$events[t]=e,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(t,e){function n(){i.removeListener(t,n),e.apply(this,arguments)}var i=this;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){if(this.$events&&this.$events[t]){var i=this.$events[t];if(n(i)){for(var o=-1,s=0,r=i.length;r>s;s++)if(i[s]===e||i[s].listener&&i[s].listener===e){o=s;break}if(0>o)return this;i.splice(o,1),i.length||delete this.$events[t]}else(i===e||i.listener&&i.listener===e)&&delete this.$events[t]}return this},i.prototype.removeAllListeners=function(t){return void 0===t?(this.$events={},this):(this.$events&&this.$events[t]&&(this.$events[t]=null),this)},i.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),n(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},i.prototype.emit=function(t){if(!this.$events)return!1;var e=this.$events[t];if(!e)return!1;var i=[].slice.call(arguments,1);if("function"==typeof e)e.apply(this,i);else{if(!n(e))return!1;for(var o=e.slice(),s=0,r=o.length;r>s;s++)o[s].apply(this,i)}return!0}}),t.register("browser/fs.js",function(){}),t.register("browser/path.js",function(){}),t.register("browser/progress.js",function(t){function e(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}t.exports=e,e.prototype.size=function(t){return this._size=t,this},e.prototype.text=function(t){return this._text=t,this},e.prototype.fontSize=function(t){return this._fontSize=t,this},e.prototype.font=function(t){return this._font=t,this},e.prototype.update=function(t){return this.percent=t,this},e.prototype.draw=function(t){var e=Math.min(this.percent,100),n=this._size,i=n/2,o=i,s=i,r=i-1,a=this._fontSize;t.font=a+"px "+this._font;var l=2*Math.PI*(e/100);t.clearRect(0,0,n,n),t.strokeStyle="#9f9f9f",t.beginPath(),t.arc(o,s,r,0,l,!1),t.stroke(),t.strokeStyle="#eee",t.beginPath(),t.arc(o,s,r-1,0,l,!0),t.stroke();var c=this._text||(0|e)+"%",u=t.measureText(c).width;return t.fillText(c,o-u/2+1,s+a/2-1),this}}),t.register("browser/tty.js",function(t,e){e.isatty=function(){return!0},e.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}}),t.register("context.js",function(t){function e(){}t.exports=e,e.prototype.runnable=function(t){return 0==arguments.length?this._runnable:(this.test=this._runnable=t,this)},e.prototype.timeout=function(t){return this.runnable().timeout(t),this},e.prototype.slow=function(t){return this.runnable().slow(t),this},e.prototype.inspect=function(){return JSON.stringify(this,function(t,e){return"_runnable"!=t&&"test"!=t?e:void 0},2)}}),t.register("hook.js",function(t,e,n){function i(t,e){o.call(this,t,e),this.type="hook"}var o=n("./runnable");t.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.error=function(t){if(0==arguments.length){var t=this._error;return this._error=null,t}this._error=t}}),t.register("interfaces/bdd.js",function(t,e,n){var i=n("../suite"),o=n("../test");t.exports=function(t){var e=[t];t.on("pre-require",function(t,n,s){t.before=function(t){e[0].beforeAll(t)},t.after=function(t){e[0].afterAll(t)},t.beforeEach=function(t){e[0].beforeEach(t)},t.afterEach=function(t){e[0].afterEach(t)},t.describe=t.context=function(t,n){var o=i.create(e[0],t);return e.unshift(o),n.call(o),e.shift(),o},t.xdescribe=t.xcontext=t.describe.skip=function(t,n){var o=i.create(e[0],t);o.pending=!0,e.unshift(o),n.call(o),e.shift()},t.describe.only=function(e,n){var i=t.describe(e,n);s.grep(i.fullTitle())},t.it=t.specify=function(t,n){var i=e[0];if(i.pending)var n=null;var s=new o(t,n);return i.addTest(s),s},t.it.only=function(e,n){var i=t.it(e,n);s.grep(i.fullTitle())},t.xit=t.xspecify=t.it.skip=function(e){t.it(e)}})}}),t.register("interfaces/exports.js",function(t,e,n){var i=n("../suite"),o=n("../test");t.exports=function(t){function e(t){var s;for(var r in t)if("function"==typeof t[r]){var a=t[r];switch(r){case"before":n[0].beforeAll(a);break;case"after":n[0].afterAll(a);break;case"beforeEach":n[0].beforeEach(a);break;case"afterEach":n[0].afterEach(a);break;default:n[0].addTest(new o(r,a))}}else{var s=i.create(n[0],r);n.unshift(s),e(t[r]),n.shift()}}var n=[t];t.on("require",e)}}),t.register("interfaces/index.js",function(t,e,n){e.bdd=n("./bdd"),e.tdd=n("./tdd"),e.qunit=n("./qunit"),e.exports=n("./exports")}),t.register("interfaces/qunit.js",function(t,e,n){var i=n("../suite"),o=n("../test");t.exports=function(t){var e=[t];t.on("pre-require",function(t){t.before=function(t){e[0].beforeAll(t)},t.after=function(t){e[0].afterAll(t)},t.beforeEach=function(t){e[0].beforeEach(t)},t.afterEach=function(t){e[0].afterEach(t)},t.suite=function(t){e.length>1&&e.shift();var n=i.create(e[0],t);e.unshift(n)},t.test=function(t,n){e[0].addTest(new o(t,n))}})}}),t.register("interfaces/tdd.js",function(t,e,n){var i=n("../suite"),o=n("../test");t.exports=function(t){var e=[t];t.on("pre-require",function(t,n,s){t.setup=function(t){e[0].beforeEach(t)},t.teardown=function(t){e[0].afterEach(t)},t.suiteSetup=function(t){e[0].beforeAll(t)},t.suiteTeardown=function(t){e[0].afterAll(t)},t.suite=function(t,n){var o=i.create(e[0],t);return e.unshift(o),n.call(o),e.shift(),o},t.suite.only=function(e,n){var i=t.suite(e,n);s.grep(i.fullTitle())},t.test=function(t,n){var i=new o(t,n);return e[0].addTest(i),i},t.test.only=function(e,n){var i=t.test(e,n);s.grep(i.fullTitle())},t.test.skip=function(e){t.test(e)}})}}),t.register("mocha.js",function(t,e,n){function i(t){return __dirname+"/../images/"+t+".png"}function o(t){t=t||{},this.files=[],this.options=t,this.grep(t.grep),this.suite=new e.Suite("",new e.Context),this.ui(t.ui),this.reporter(t.reporter),t.timeout&&this.timeout(t.timeout),t.slow&&this.slow(t.slow)}var s=n("browser/path"),r=n("./utils");e=t.exports=o,e.utils=r,e.interfaces=n("./interfaces"),e.reporters=n("./reporters"),e.Runnable=n("./runnable"),e.Context=n("./context"),e.Runner=n("./runner"),e.Suite=n("./suite"),e.Hook=n("./hook"),e.Test=n("./test"),o.prototype.addFile=function(t){return this.files.push(t),this},o.prototype.reporter=function(t){if("function"==typeof t)this._reporter=t;else{t=t||"dot";try{this._reporter=n("./reporters/"+t)}catch(e){this._reporter=n(t)}if(!this._reporter)throw Error('invalid reporter "'+t+'"')}return this},o.prototype.ui=function(t){if(t=t||"bdd",this._ui=e.interfaces[t],!this._ui)throw Error('invalid interface "'+t+'"');return this._ui=this._ui(this.suite),this},o.prototype.loadFiles=function(t){var e=this,i=this.suite,o=this.files.length;this.files.forEach(function(r){r=s.resolve(r),i.emit("pre-require",global,r,e),i.emit("require",n(r),r,e),i.emit("post-require",global,r,e),--o||t&&t()})},o.prototype._growl=function(t,e){var o=n("growl");t.on("end",function(){var n=e.stats;if(n.failures){var s=n.failures+" of "+t.total+" tests failed";o(s,{name:"mocha",title:"Failed",image:i("error")})}else o(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:i("ok")})})},o.prototype.grep=function(t){return this.options.grep="string"==typeof t?RegExp(r.escapeRegexp(t)):t,this},o.prototype.invert=function(){return this.options.invert=!0,this},o.prototype.ignoreLeaks=function(){return this.options.ignoreLeaks=!0,this},o.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},o.prototype.growl=function(){return this.options.growl=!0,this},o.prototype.globals=function(t){return this.options.globals=(this.options.globals||[]).concat(t),this},o.prototype.timeout=function(t){return this.suite.timeout(t),this},o.prototype.slow=function(t){return this.suite.slow(t),this},o.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},o.prototype.run=function(t){this.files.length&&this.loadFiles();var n=this.suite,i=this.options,o=new e.Runner(n),s=new this._reporter(o);return o.ignoreLeaks=i.ignoreLeaks,o.asyncOnly=i.asyncOnly,i.grep&&o.grep(i.grep,i.invert),i.globals&&o.globals(i.globals),i.growl&&this._growl(o,s),o.run(t)
}}),t.register("ms.js",function(t){function e(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return 315576e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"h":return 36e5*n;case"minutes":case"minute":case"m":return 6e4*n;case"seconds":case"second":case"s":return 1e3*n;case"ms":return n}}}function n(t){return t==r?Math.round(t/r)+" day":t>r?Math.round(t/r)+" days":t==s?Math.round(t/s)+" hour":t>s?Math.round(t/s)+" hours":t==o?Math.round(t/o)+" minute":t>o?Math.round(t/o)+" minutes":t==i?Math.round(t/i)+" second":t>i?Math.round(t/i)+" seconds":t+" ms"}var i=1e3,o=60*i,s=60*o,r=24*s;t.exports=function(t){return"string"==typeof t?e(t):n(t)}}),t.register("reporters/base.js",function(t,e,n){function i(t){var e=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},n=this.failures=[];t&&(this.runner=t,t.stats=e,t.on("start",function(){e.start=new u}),t.on("suite",function(t){e.suites=e.suites||0,t.root||e.suites++}),t.on("test end",function(){e.tests=e.tests||0,e.tests++}),t.on("pass",function(t){e.passes=e.passes||0;var n=t.slow()/2;t.speed=t.duration>t.slow()?"slow":t.duration>n?"medium":"fast",e.passes++}),t.on("fail",function(t,i){e.failures=e.failures||0,e.failures++,t.err=i,n.push(t)}),t.on("end",function(){e.end=new u,e.duration=new u-e.start}),t.on("pending",function(){e.pending++}))}function o(t,e){return t+="",Array(e-t.length+1).join(" ")+t}function s(t,e,n){return l["diff"+e](t.actual,t.expected).map(function(t){return n&&(t.value=t.value.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")),t.added?r("diff added",t.value):t.removed?r("diff removed",t.value):t.value}).join("")}function r(t,e){return e.split("\n").map(function(e){return p(t,e)}).join("\n")}var a=n("browser/tty"),l=n("browser/diff"),c=n("../ms"),u=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval;var h=a.isatty(1)&&a.isatty(2);e=t.exports=i,e.useColors=h,e.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},e.symbols={ok:"",err:"",dot:""},"win32"==process.platform&&(e.symbols.ok="",e.symbols.err="",e.symbols.dot=".");var p=e.color=function(t,n){return e.useColors?"["+e.colors[t]+"m"+n+"[0m":n};e.window={width:h?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:a.getWindowSize()[1]:75},e.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){e.cursor.deleteLine(),e.cursor.beginningOfLine()}},e.list=function(t){console.error(),t.forEach(function(t,e){var n=p("error title","  %s) %s:\n")+p("error message","     %s")+p("error stack","\n%s\n"),i=t.err,r=i.message||"",a=i.stack||r,l=a.indexOf(r)+r.length,c=a.slice(0,l),u=i.actual,h=i.expected,m=!0;if(i.showDiff&&(m=!1,i.actual=u=JSON.stringify(u,null,2),i.expected=h=JSON.stringify(h,null,2)),"string"==typeof u&&"string"==typeof h){var f=Math.max(u.length,h.length);c=20>f?s(i,"Chars",m):s(i,"Words",m);var d=c.split("\n");if(d.length>4){var y=(d.length+"").length;c=d.map(function(t,e){return o(++e,y)+" |"+" "+t}).join("\n")}c="\n"+p("diff removed","actual")+" "+p("diff added","expected")+"\n\n"+c+"\n",c=c.replace(/^/gm,"      "),n=p("error title","  %s) %s:\n%s")+p("error stack","\n%s\n")}a=a.slice(l?l+1:l).replace(/^/gm,"  "),console.error(n,e+1,t.fullTitle(),c,a)})},i.prototype.epilogue=function(){function t(t){return 1==t?"test":"tests"}var n,o=this.stats;return console.log(),o.failures?(n=p("bright fail","  "+e.symbols.err)+p("fail"," %d of %d %s failed")+p("light",":"),console.error(n,o.failures,this.runner.total,t(this.runner.total)),i.list(this.failures),console.error(),void 0):(n=p("bright pass"," ")+p("green"," %d %s complete")+p("light"," (%s)"),console.log(n,o.tests||0,t(o.tests),c(o.duration)),o.pending&&(n=p("pending"," ")+p("pending"," %d %s pending"),console.log(n,o.pending,t(o.pending))),console.log(),void 0)}}),t.register("reporters/doc.js",function(t,e,n){function i(t){function e(){return Array(n).join("  ")}o.call(this,t);var n=(this.stats,t.total,2);t.on("suite",function(t){t.root||(++n,console.log('%s<section class="suite">',e()),++n,console.log("%s<h1>%s</h1>",e(),s.escape(t.title)),console.log("%s<dl>",e()))}),t.on("suite end",function(t){t.root||(console.log("%s</dl>",e()),--n,console.log("%s</section>",e()),--n)}),t.on("pass",function(t){console.log("%s  <dt>%s</dt>",e(),s.escape(t.title));var n=s.escape(s.clean(""+t.fn));console.log("%s  <dd><pre><code>%s</code></pre></dd>",e(),n)})}var o=n("./base"),s=n("../utils");e=t.exports=i}),t.register("reporters/dot.js",function(t,e,n){function i(t){o.call(this,t);var e=this,n=(this.stats,0|.75*o.window.width),i=0;t.on("start",function(){process.stdout.write("\n  ")}),t.on("pending",function(){process.stdout.write(s("pending",o.symbols.dot))}),t.on("pass",function(t){0==++i%n&&process.stdout.write("\n  "),"slow"==t.speed?process.stdout.write(s("bright yellow",o.symbols.dot)):process.stdout.write(s(t.speed,o.symbols.dot))}),t.on("fail",function(){0==++i%n&&process.stdout.write("\n  "),process.stdout.write(s("fail",o.symbols.dot))}),t.on("end",function(){console.log(),e.epilogue()})}var o=n("./base"),s=o.color;e=t.exports=i,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/html-cov.js",function(t,e,n){function i(t){var e=n("jade"),i=__dirname+"/templates/coverage.jade",a=r.readFileSync(i,"utf8"),l=e.compile(a,{filename:i}),c=this;s.call(this,t,!1),t.on("end",function(){process.stdout.write(l({cov:c.cov,coverageClass:o}))})}function o(t){return t>=75?"high":t>=50?"medium":t>=25?"low":"terrible"}var s=n("./json-cov"),r=n("browser/fs");e=t.exports=i}),t.register("reporters/html.js",function(t,e,n){function i(t,e){u.call(this,t);var n,i,y=this.stats,_=(t.total,s(d)),g=_.getElementsByTagName("li"),x=g[1].getElementsByTagName("em")[0],v=g[1].getElementsByTagName("a")[0],b=g[2].getElementsByTagName("em")[0],w=g[2].getElementsByTagName("a")[0],C=g[3].getElementsByTagName("em")[0],S=_.getElementsByTagName("canvas")[0],A=s('<ul id="mocha-report"></ul>'),D=[A];if(e=e||document.getElementById("mocha"),S.getContext){var B=window.devicePixelRatio||1;S.style.width=S.width,S.style.height=S.height,S.width*=B,S.height*=B,i=S.getContext("2d"),i.scale(B,B),n=new p}return e?(c(v,"click",function(){a();var t=/pass/.test(A.className)?"":" pass";A.className=A.className.replace(/fail|pass/g,"")+t,A.className.trim()&&r("test pass")}),c(w,"click",function(){a();var t=/fail/.test(A.className)?"":" fail";A.className=A.className.replace(/fail|pass/g,"")+t,A.className.trim()&&r("test fail")}),e.appendChild(_),e.appendChild(A),n&&n.size(40),t.on("suite",function(t){if(!t.root){var e="?grep="+encodeURIComponent(t.fullTitle()),n=s('<li class="suite"><h1><a href="%s">%s</a></h1></li>',e,m(t.title));D[0].appendChild(n),D.unshift(document.createElement("ul")),n.appendChild(D[0])}}),t.on("suite end",function(t){t.root||D.shift()}),t.on("fail",function(e){"hook"==e.type&&t.emit("test end",e)}),t.on("test end",function(t){window.scrollTo(0,document.body.scrollHeight);var e=0|100*(y.tests/this.total);n&&n.update(e).draw(i);var o=new f-y.start;if(l(x,y.passes),l(b,y.failures),l(C,(o/1e3).toFixed(2)),"passed"==t.state)var r=s('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="?grep=%e" class="replay"></a></h2></li>',t.speed,t.title,t.duration,encodeURIComponent(t.fullTitle()));else if(t.pending)var r=s('<li class="test pass pending"><h2>%e</h2></li>',t.title);else{var r=s('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay"></a></h2></li>',t.title,encodeURIComponent(t.fullTitle())),a=t.err.stack||""+t.err;~a.indexOf(t.err.message)||(a=t.err.message+"\n"+a),"[object Error]"==a&&(a=t.err.message),!t.err.stack&&t.err.sourceURL&&void 0!==t.err.line&&(a+="\n("+t.err.sourceURL+":"+t.err.line+")"),r.appendChild(s('<pre class="error">%e</pre>',a))}if(!t.pending){var u=r.getElementsByTagName("h2")[0];c(u,"click",function(){p.style.display="none"==p.style.display?"inline-block":"none"});var p=s("<pre><code>%e</code></pre>",h.clean(""+t.fn));r.appendChild(p),p.style.display="none"}D[0]&&D[0].appendChild(r)}),void 0):o("#mocha div missing, add it to your document")}function o(t){document.body.appendChild(s('<div id="mocha-error">%s</div>',t))}function s(t){var e=arguments,n=document.createElement("div"),i=1;return n.innerHTML=t.replace(/%([se])/g,function(t,n){switch(n){case"s":return e[i++]+"";case"e":return m(e[i++])}}),n.firstChild}function r(t){for(var e=document.getElementsByClassName("suite"),n=0;e.length>n;n++){var i=e[n].getElementsByClassName(t);0==i.length&&(e[n].className+=" hidden")}}function a(){for(var t=document.getElementsByClassName("suite hidden"),e=0;t.length>e;++e)t[e].className=t[e].className.replace("suite hidden","suite")}function l(t,e){t.textContent?t.textContent=e:t.innerText=e}function c(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}var u=n("./base"),h=n("../utils"),p=n("../browser/progress"),m=h.escape,f=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,e=t.exports=i;var d='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'}),t.register("reporters/index.js",function(t,e,n){e.Base=n("./base"),e.Dot=n("./dot"),e.Doc=n("./doc"),e.TAP=n("./tap"),e.JSON=n("./json"),e.HTML=n("./html"),e.List=n("./list"),e.Min=n("./min"),e.Spec=n("./spec"),e.Nyan=n("./nyan"),e.XUnit=n("./xunit"),e.Markdown=n("./markdown"),e.Progress=n("./progress"),e.Landing=n("./landing"),e.JSONCov=n("./json-cov"),e.HTMLCov=n("./html-cov"),e.JSONStream=n("./json-stream"),e.Teamcity=n("./teamcity")}),t.register("reporters/json-cov.js",function(t,e,n){function i(t,e){var n=this,e=1==arguments.length?!0:e;a.call(this,t);var i=[],s=[],l=[];t.on("test end",function(t){i.push(t)}),t.on("pass",function(t){l.push(t)}),t.on("fail",function(t){s.push(t)}),t.on("end",function(){var t=global._$jscoverage||{},a=n.cov=o(t);a.stats=n.stats,a.tests=i.map(r),a.failures=s.map(r),a.passes=l.map(r),e&&process.stdout.write(JSON.stringify(a,null,2))})}function o(t){var e={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in t){var i=s(n,t[n]);e.files.push(i),e.hits+=i.hits,e.misses+=i.misses,e.sloc+=i.sloc}return e.files.sort(function(t,e){return t.filename.localeCompare(e.filename)}),e.sloc>0&&(e.coverage=100*(e.hits/e.sloc)),e}function s(t,e){var n={filename:t,coverage:0,hits:0,misses:0,sloc:0,source:{}};return e.source.forEach(function(t,i){i++,0===e[i]?(n.misses++,n.sloc++):void 0!==e[i]&&(n.hits++,n.sloc++),n.source[i]={source:t,coverage:void 0===e[i]?"":e[i]}}),n.coverage=100*(n.hits/n.sloc),n}function r(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var a=n("./base");e=t.exports=i}),t.register("reporters/json-stream.js",function(t,e,n){function i(t){s.call(this,t);var e=this,n=(this.stats,t.total);t.on("start",function(){console.log(JSON.stringify(["start",{total:n}]))}),t.on("pass",function(t){console.log(JSON.stringify(["pass",o(t)]))}),t.on("fail",function(t){console.log(JSON.stringify(["fail",o(t)]))}),t.on("end",function(){process.stdout.write(JSON.stringify(["end",e.stats]))})}function o(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var s=n("./base");s.color,e=t.exports=i}),t.register("reporters/json.js",function(t,e,n){function i(t){var e=this;s.call(this,t);var n=[],i=[],r=[];t.on("test end",function(t){n.push(t)}),t.on("pass",function(t){r.push(t)}),t.on("fail",function(t){i.push(t)}),t.on("end",function(){var t={stats:e.stats,tests:n.map(o),failures:i.map(o),passes:r.map(o)};process.stdout.write(JSON.stringify(t,null,2))})}function o(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var s=n("./base");s.cursor,s.color,e=t.exports=i}),t.register("reporters/landing.js",function(t,e,n){function i(t){function e(){var t=Array(i).join("-");return"  "+r("runway",t)}o.call(this,t);var n=this,i=(this.stats,0|.75*o.window.width),a=t.total,l=process.stdout,c=r("plane",""),u=-1,h=0;t.on("start",function(){l.write("\n  "),s.hide()}),t.on("test end",function(t){var n=-1==u?0|i*++h/a:u;"failed"==t.state&&(c=r("plane crash",""),u=n),l.write("[4F\n\n"),l.write(e()),l.write("\n  "),l.write(r("runway",Array(n).join(""))),l.write(c),l.write(r("runway",Array(i-n).join("")+"\n")),l.write(e()),l.write("[0m")}),t.on("end",function(){s.show(),console.log(),n.epilogue()})}var o=n("./base"),s=o.cursor,r=o.color;e=t.exports=i,o.colors.plane=0,o.colors["plane crash"]=31,o.colors.runway=90,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/list.js",function(t,e,n){function i(t){o.call(this,t);var e=this,n=(this.stats,0);t.on("start",function(){console.log()}),t.on("test",function(t){process.stdout.write(r("pass","    "+t.fullTitle()+": "))}),t.on("pending",function(t){var e=r("checkmark","  -")+r("pending"," %s");console.log(e,t.fullTitle())}),t.on("pass",function(t){var e=r("checkmark","  "+o.symbols.dot)+r("pass"," %s: ")+r(t.speed,"%dms");s.CR(),console.log(e,t.fullTitle(),t.duration)}),t.on("fail",function(t){s.CR(),console.log(r("fail","  %d) %s"),++n,t.fullTitle())}),t.on("end",e.epilogue.bind(e))}var o=n("./base"),s=o.cursor,r=o.color;e=t.exports=i,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/markdown.js",function(t,e,n){function i(t){function e(t){return Array(a).join("#")+" "+t}function n(t,e){var i=e;return e=e[t.title]=e[t.title]||{suite:t},t.suites.forEach(function(t){n(t,e)}),i}function i(t,e){++e;var n,o="";for(var r in t)"suite"!=r&&(r&&(n=" - ["+r+"](#"+s.slug(t[r].suite.fullTitle())+")\n"),r&&(o+=Array(e).join("  ")+n),o+=i(t[r],e));return--e,o}function r(t){var e=n(t,{});return i(e,0)}o.call(this,t);var a=(this.stats,t.total,0),l="";r(t.suite),t.on("suite",function(t){++a;var n=s.slug(t.fullTitle());l+='<a name="'+n+'"></a>'+"\n",l+=e(t.title)+"\n"}),t.on("suite end",function(){--a}),t.on("pass",function(t){var e=s.clean(""+t.fn);l+=t.title+".\n",l+="\n```js\n",l+=e+"\n",l+="```\n\n"}),t.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(r(t.suite)),process.stdout.write(l)})}var o=n("./base"),s=n("../utils");e=t.exports=i}),t.register("reporters/min.js",function(t,e,n){function i(t){o.call(this,t),t.on("start",function(){process.stdout.write("[2J"),process.stdout.write("[1;3H")}),t.on("end",this.epilogue.bind(this))}var o=n("./base");e=t.exports=i,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/nyan.js",function(t,e,n){function i(t){s.call(this,t);var e=this,n=(this.stats,0|.75*s.window.width),i=(this.rainbowColors=e.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=n-i,this.scoreboardWidth=5,this.tick=0,t.on("start",function(){s.cursor.hide(),e.draw("start")}),t.on("pending",function(){e.draw("pending")}),t.on("pass",function(){e.draw("pass")}),t.on("fail",function(){e.draw("fail")}),t.on("end",function(){s.cursor.show();for(var t=0;e.numberOfLines>t;t++)o("\n");e.epilogue()})}function o(t){process.stdout.write(t)}var s=n("./base");s.color,e=t.exports=i,i.prototype.draw=function(t){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(t),this.tick=!this.tick},i.prototype.drawScoreboard=function(){function t(t,e){o(" "),o("["+t+"m"+e+"[0m"),o("\n")}var e=this.stats,n=s.colors;t(n.green,e.passes),t(n.fail,e.failures),t(n.pending,e.pending),o("\n"),this.cursorUp(this.numberOfLines)},i.prototype.appendRainbow=function(){for(var t=this.tick?"_":"-",e=this.rainbowify(t),n=0;this.numberOfLines>n;n++){var i=this.trajectories[n];i.length>=this.trajectoryWidthMax&&i.shift(),i.push(e)}},i.prototype.drawRainbow=function(){var t=this;this.trajectories.forEach(function(e){o("["+t.scoreboardWidth+"C"),o(e.join("")),o("\n")}),this.cursorUp(this.numberOfLines)},i.prototype.drawNyanCat=function(t){var e=this,n=this.scoreboardWidth+this.trajectories[0].length;[0,1,2,3].forEach(function(i){switch(o("["+n+"C"),i){case 0:o("_,------,"),o("\n");break;case 1:var s=e.tick?"  ":"   ";o("_|"+s+"/\\_/\\ "),o("\n");break;case 2:var r,s=e.tick?"_":"__",a=e.tick?"~":"^";switch(t){case"pass":r="( ^ .^)";break;case"fail":r="( o .o)";break;default:r="( - .-)"}o(a+"|"+s+r+" "),o("\n");break;case 3:var s=e.tick?" ":"  ";o(s+'""  "" '),o("\n")}}),this.cursorUp(this.numberOfLines)},i.prototype.cursorUp=function(t){o("["+t+"A")},i.prototype.cursorDown=function(t){o("["+t+"B")},i.prototype.generateColors=function(){for(var t=[],e=0;42>e;e++){var n=Math.floor(Math.PI/3),i=e*(1/6),o=Math.floor(3*Math.sin(i)+3),s=Math.floor(3*Math.sin(i+2*n)+3),r=Math.floor(3*Math.sin(i+4*n)+3);t.push(36*o+6*s+r+16)}return t},i.prototype.rainbowify=function(t){var e=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+e+"m"+t+"[0m"},i.prototype=new s,i.prototype.constructor=i}),t.register("reporters/progress.js",function(t,e,n){function i(t,e){o.call(this,t);var n=this,e=e||{},i=(this.stats,0|.5*o.window.width),a=t.total,l=0;Math.max,e.open=e.open||"[",e.complete=e.complete||"",e.incomplete=e.incomplete||o.symbols.dot,e.close=e.close||"]",e.verbose=!1,t.on("start",function(){console.log(),s.hide()}),t.on("test end",function(){l++;var t=l/a,n=0|i*t,o=i-n;s.CR(),process.stdout.write("[J"),process.stdout.write(r("progress","  "+e.open)),process.stdout.write(Array(n).join(e.complete)),process.stdout.write(Array(o).join(e.incomplete)),process.stdout.write(r("progress",e.close)),e.verbose&&process.stdout.write(r("progress"," "+l+" of "+a))}),t.on("end",function(){s.show(),console.log(),n.epilogue()})}var o=n("./base"),s=o.cursor,r=o.color;e=t.exports=i,o.colors.progress=90,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/spec.js",function(t,e,n){function i(t){function e(){return Array(i).join("  ")}o.call(this,t);var n=this,i=(this.stats,0),a=0;t.on("start",function(){console.log()}),t.on("suite",function(t){++i,console.log(r("suite","%s%s"),e(),t.title)}),t.on("suite end",function(){--i,1==i&&console.log()}),t.on("test",function(t){process.stdout.write(e()+r("pass","   "+t.title+": "))}),t.on("pending",function(t){var n=e()+r("pending","  - %s");console.log(n,t.title)}),t.on("pass",function(t){if("fast"==t.speed){var n=e()+r("checkmark","  "+o.symbols.ok)+r("pass"," %s ");s.CR(),console.log(n,t.title)}else{var n=e()+r("checkmark","  "+o.symbols.ok)+r("pass"," %s ")+r(t.speed,"(%dms)");s.CR(),console.log(n,t.title,t.duration)}}),t.on("fail",function(t){s.CR(),console.log(e()+r("fail","  %d) %s"),++a,t.title)}),t.on("end",n.epilogue.bind(n))}var o=n("./base"),s=o.cursor,r=o.color;e=t.exports=i,i.prototype=new o,i.prototype.constructor=i}),t.register("reporters/tap.js",function(t,e,n){function i(t){s.call(this,t);var e=(this.stats,1);t.on("start",function(){var e=t.grepTotal(t.suite);console.log("%d..%d",1,e)}),t.on("test end",function(){++e}),t.on("pending",function(t){console.log("ok %d %s # SKIP -",e,o(t))}),t.on("pass",function(t){console.log("ok %d %s",e,o(t))}),t.on("fail",function(t,n){console.log("not ok %d %s",e,o(t)),console.log(n.stack.replace(/^/gm,"  "))})}function o(t){return t.fullTitle().replace(/#/g,"")}var s=n("./base");s.cursor,s.color,e=t.exports=i}),t.register("reporters/teamcity.js",function(t,e,n){function i(t){s.call(this,t);var e=this.stats;t.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")}),t.on("test",function(t){console.log("##teamcity[testStarted name='"+o(t.fullTitle())+"']")}),t.on("fail",function(t,e){console.log("##teamcity[testFailed name='"+o(t.fullTitle())+"' message='"+o(e.message)+"']")}),t.on("pending",function(t){console.log("##teamcity[testIgnored name='"+o(t.fullTitle())+"' message='pending']")}),t.on("test end",function(t){console.log("##teamcity[testFinished name='"+o(t.fullTitle())+"' duration='"+t.duration+"']")}),t.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+e.duration+"']")})}function o(t){return t.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var s=n("./base");e=t.exports=i}),t.register("reporters/xunit.js",function(t,e,n){function i(t){a.call(this,t);var e=this.stats,n=[];t.on("pass",function(t){n.push(t)}),t.on("fail",function(t){n.push(t)}),t.on("end",function(){console.log(s("testsuite",{name:"Mocha Tests",tests:e.tests,failures:e.failures,errors:e.failures,skip:e.tests-e.failures-e.passes,timestamp:(new u).toUTCString(),time:e.duration/1e3},!1)),n.forEach(o),console.log("</testsuite>")})}function o(t){var e={classname:t.parent.fullTitle(),name:t.title,time:t.duration/1e3};if("failed"==t.state){var n=t.err;e.message=c(n.message),console.log(s("testcase",e,!1,s("failure",e,!1,r(n.stack))))}else t.pending?console.log(s("testcase",e,!1,s("skipped",{},!0))):console.log(s("testcase",e,!0))}function s(t,e,n,i){var o,s=n?"/>":">",r=[];for(var a in e)r.push(a+'="'+c(e[a])+'"');return o="<"+t+(r.length?" "+r.join(" "):"")+s,i&&(o+=i+"</"+t+s),o}function r(t){return"<![CDATA["+c(t)+"]]>"}var a=n("./base"),l=n("../utils"),c=l.escape,u=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,e=t.exports=i,i.prototype=new a,i.prototype.constructor=i}),t.register("runnable.js",function(t,e,n){function i(t,e){this.title=t,this.fn=e,this.async=e&&e.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}var o=n("browser/events").EventEmitter,s=n("browser/debug")("mocha:runnable"),r=n("./ms"),a=global.Date,l=global.setTimeout,c=(global.setInterval,global.clearTimeout);global.clearInterval;var u=Object.prototype.toString;t.exports=i,i.prototype=new o,i.prototype.constructor=i,i.prototype.timeout=function(t){return 0==arguments.length?this._timeout:("string"==typeof t&&(t=r(t)),s("timeout %d",t),this._timeout=t,this.timer&&this.resetTimeout(),this)},i.prototype.slow=function(t){return 0===arguments.length?this._slow:("string"==typeof t&&(t=r(t)),s("timeout %d",t),this._slow=t,this)},i.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},i.prototype.clearTimeout=function(){c(this.timer)},i.prototype.inspect=function(){return JSON.stringify(this,function(t,e){return"_"!=t[0]?"parent"==t?"#<Suite>":"ctx"==t?"#<Context>":e:void 0},2)},i.prototype.resetTimeout=function(){var t=this,e=this.timeout();this.clearTimeout(),e&&(this.timer=l(function(){t.callback(Error("timeout of "+e+"ms exceeded")),t.timedOut=!0},e))},i.prototype.run=function(t){function e(t){o||(o=!0,s.emit("error",t||Error("done() called multiple times")))}function n(n){if(!s.timedOut){if(i)return e(n);s.clearTimeout(),s.duration=new a-c,i=!0,t(n)}}var i,o,s=this,r=this.timeout(),c=new a,h=this.ctx;if(h&&h.runnable(this),this.async&&r&&(this.timer=l(function(){n(Error("timeout of "+r+"ms exceeded")),s.timedOut=!0},r)),this.callback=n,this.async)try{this.fn.call(h,function(t){return"[object Error]"===u.call(t)?n(t):null!=t?n(Error("done() invoked with non-Error: "+t)):(n(),void 0)})}catch(p){n(p)}else{if(this.asyncOnly)return n(Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(h),this.duration=new a-c,t()}catch(p){t(p)}}}}),t.register("runner.js",function(t,e,n){function i(t){var e=this;this._globals=[],this.suite=t,this.total=t.total(),this.failures=0,this.on("test end",function(t){e.checkGlobals(t)}),this.on("hook end",function(t){e.checkGlobals(t)}),this.grep(/.*/),this.globals(this.globalProps().concat(["errno"]))}function o(t,e){return l(e,function(e){var n=l(t,function(t){return~t.indexOf("*")?0==e.indexOf(t.split("*")[0]):/^mocha-/.test(e)?!0:e==t});return 0==n.length&&(!global.navigator||"onerror"!==e)})}var s=n("browser/events").EventEmitter,r=n("browser/debug")("mocha:runner"),a=(n("./test"),n("./utils")),l=a.filter;a.keys;var c=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];t.exports=i,i.prototype=new s,i.prototype.constructor=i,i.prototype.grep=function(t,e){return r("grep %s",t),this._grep=t,this._invert=e,this.total=this.grepTotal(this.suite),this},i.prototype.grepTotal=function(t){var e=this,n=0;return t.eachTest(function(t){var i=e._grep.test(t.fullTitle());e._invert&&(i=!i),i&&n++}),n},i.prototype.globalProps=function(){for(var t=a.keys(global),e=0;c.length>e;++e)~t.indexOf(c[e])||t.push(c[e]);return t},i.prototype.globals=function(t){return 0==arguments.length?this._globals:(r("globals %j",t),a.forEach(t,function(t){this._globals.push(t)},this),this)},i.prototype.checkGlobals=function(t){if(!this.ignoreLeaks){var e,n=this._globals,i=this.globalProps(),s=process.kill;s&&1==n.length-i.length||2!=n.length-i.length&&(e=o(n,i),this._globals=this._globals.concat(e),e.length>1?this.fail(t,Error("global leaks detected: "+e.join(", "))):e.length&&this.fail(t,Error("global leak detected: "+e[0])))}},i.prototype.fail=function(t,e){++this.failures,t.state="failed","string"==typeof e&&(e=Error('the string "'+e+'" was thrown, throw an Error :)')),this.emit("fail",t,e)},i.prototype.failHook=function(t,e){this.fail(t,e),this.emit("end")},i.prototype.hook=function(t,e){function n(t){var i=o[t];return i?(s.currentRunnable=i,s.emit("hook",i),i.on("error",function(t){s.failHook(i,t)}),i.run(function(e){i.removeAllListeners("error");var o=i.error();return o&&s.fail(s.test,o),e?s.failHook(i,e):(s.emit("hook end",i),n(++t),void 0)}),void 0):e()}var i=this.suite,o=i["_"+t],s=this;process.nextTick(function(){n(0)})},i.prototype.hooks=function(t,e,n){function i(r){return o.suite=r,r?(o.hook(t,function(t){return t?(o.suite=s,n(t)):(i(e.pop()),void 0)}),void 0):(o.suite=s,n())}var o=this,s=this.suite;i(e.pop())},i.prototype.hookUp=function(t,e){var n=[this.suite].concat(this.parents()).reverse();this.hooks(t,n,e)},i.prototype.hookDown=function(t,e){var n=[this.suite].concat(this.parents());this.hooks(t,n,e)},i.prototype.parents=function(){for(var t=this.suite,e=[];t=t.parent;)e.push(t);return e},i.prototype.runTest=function(t){var e=this.test,n=this;this.asyncOnly&&(e.asyncOnly=!0);try{e.on("error",function(t){n.fail(e,t)}),e.run(t)}catch(i){t(i)}},i.prototype.runTests=function(t,e){function n(){if(o.failures&&t._bail)return e();if(i=s.shift(),!i)return e();var r=o._grep.test(i.fullTitle());return o._invert&&(r=!r),r?i.pending?(o.emit("pending",i),o.emit("test end",i),n()):(o.emit("test",o.test=i),o.hookDown("beforeEach",function(){o.currentRunnable=o.test,o.runTest(function(t){return i=o.test,t?(o.fail(i,t),o.emit("test end",i),o.hookUp("afterEach",n)):(i.state="passed",o.emit("pass",i),o.emit("test end",i),o.hookUp("afterEach",n),void 0)})}),void 0):n()}var i,o=this,s=t.tests.slice();this.next=n,n()},i.prototype.runSuite=function(t,e){function n(){var e=t.suites[a++];return e?(s.runSuite(e,n),void 0):i()}function i(){s.suite=t,s.hook("afterAll",function(){s.emit("suite end",t),e()})}var o=this.grepTotal(t),s=this,a=0;return r("run suite %s",t.fullTitle()),o?(this.emit("suite",this.suite=t),this.hook("beforeAll",function(){s.runTests(t,n)}),void 0):e()},i.prototype.uncaught=function(t){r("uncaught exception %s",t.message);var e=this.currentRunnable;if(e&&"failed"!=e.state)return e.clearTimeout(),t.uncaught=!0,this.fail(e,t),"test"==e.type?(this.emit("test end",e),this.hookUp("afterEach",this.next),void 0):(this.emit("end"),void 0)},i.prototype.run=function(t){var e=this,t=t||function(){};return r("start"),this.on("end",function(){r("end"),process.removeListener("uncaughtException",e.uncaught.bind(e)),t(e.failures)}),this.emit("start"),this.runSuite(this.suite,function(){r("finished running"),e.emit("end")}),process.on("uncaughtException",this.uncaught.bind(this)),this}}),t.register("suite.js",function(t,e,n){function i(t,e){this.title=t,this.ctx=e,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!t,this._timeout=2e3,this._slow=75,this._bail=!1}var o=n("browser/events").EventEmitter,s=n("browser/debug")("mocha:suite"),r=n("./ms"),a=n("./utils"),l=n("./hook");e=t.exports=i,e.create=function(t,e){var n=new i(e,t.ctx);return n.parent=t,t.pending&&(n.pending=!0),e=n.fullTitle(),t.addSuite(n),n},i.prototype=new o,i.prototype.constructor=i,i.prototype.clone=function(){var t=new i(this.title);return s("clone"),t.ctx=this.ctx,t.timeout(this.timeout()),t.slow(this.slow()),t.bail(this.bail()),t},i.prototype.timeout=function(t){return 0==arguments.length?this._timeout:("string"==typeof t&&(t=r(t)),s("timeout %d",t),this._timeout=parseInt(t,10),this)},i.prototype.slow=function(t){return 0===arguments.length?this._slow:("string"==typeof t&&(t=r(t)),s("slow %d",t),this._slow=t,this)},i.prototype.bail=function(t){return 0==arguments.length?this._bail:(s("bail %s",t),this._bail=t,this)},i.prototype.beforeAll=function(t){if(this.pending)return this;var e=new l('"before all" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._beforeAll.push(e),this.emit("beforeAll",e),this},i.prototype.afterAll=function(t){if(this.pending)return this;var e=new l('"after all" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._afterAll.push(e),this.emit("afterAll",e),this},i.prototype.beforeEach=function(t){if(this.pending)return this;var e=new l('"before each" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._beforeEach.push(e),this.emit("beforeEach",e),this},i.prototype.afterEach=function(t){if(this.pending)return this;var e=new l('"after each" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._afterEach.push(e),this.emit("afterEach",e),this},i.prototype.addSuite=function(t){return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.bail(this.bail()),this.suites.push(t),this.emit("suite",t),this},i.prototype.addTest=function(t){return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this.tests.push(t),this.emit("test",t),this},i.prototype.fullTitle=function(){if(this.parent){var t=this.parent.fullTitle();if(t)return t+" "+this.title}return this.title},i.prototype.total=function(){return a.reduce(this.suites,function(t,e){return t+e.total()},0)+this.tests.length},i.prototype.eachTest=function(t){return a.forEach(this.tests,t),a.forEach(this.suites,function(e){e.eachTest(t)}),this}}),t.register("test.js",function(t,e,n){function i(t,e){o.call(this,t,e),this.pending=!e,this.type="test"}var o=n("./runnable");t.exports=i,i.prototype=new o,i.prototype.constructor=i}),t.register("utils.js",function(t,e,n){function i(t){return!~c.indexOf(t)}function o(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var s=n("browser/fs"),r=n("browser/path"),a=r.join,l=n("browser/debug")("mocha:watch"),c=["node_modules",".git"];e.escape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
},e.forEach=function(t,e,n){for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i)},e.indexOf=function(t,e,n){for(var i=n||0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1},e.reduce=function(t,e,n){for(var i=n,o=0,s=t.length;s>o;o++)i=e(i,t[o],o,t);return i},e.filter=function(t,e){for(var n=[],i=0,o=t.length;o>i;i++){var s=t[i];e(s,i,t)&&n.push(s)}return n},e.keys=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e},e.watch=function(t,e){var n={interval:100};t.forEach(function(t){l("file %s",t),s.watchFile(t,n,function(n,i){i.mtime<n.mtime&&e(t)})})},e.files=function(t,n){return n=n||[],s.readdirSync(t).filter(i).forEach(function(i){i=a(t,i),s.statSync(i).isDirectory()?e.files(i,n):i.match(/\.(js|coffee)$/)&&n.push(i)}),n},e.slug=function(t){return t.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},e.clean=function(t){t=t.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var n=t.match(/^\n?( *)/)[1].length,i=RegExp("^ {"+n+"}","gm");return t=t.replace(i,""),e.trim(t)},e.escapeRegexp=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.parseQuery=function(t){return e.reduce(t.replace("?","").split("&"),function(t,e){var n=e.indexOf("="),i=e.slice(0,n),o=e.slice(++n);return t[i]=decodeURIComponent(o),t},{})},e.highlightTags=function(t){for(var e=document.getElementsByTagName(t),n=0,i=e.length;i>n;++n)e[n].innerHTML=o(e[n].innerHTML)}}),process={},process.exit=function(){},process.stdout={},global=window,process.nextTick=function(){if(window.ActiveXObject||!window.postMessage)return function(t){t()};var t=[],e="mocha-zero-timeout";return window.addEventListener("message",function(n){n.source==window&&n.data==e&&(n.stopPropagation&&n.stopPropagation(),t.length&&t.shift()())},!0),function(n){t.push(n),window.postMessage(e,"*")}}(),process.removeListener=function(t){"uncaughtException"==t&&(window.onerror=null)},process.on=function(t,e){"uncaughtException"==t&&(window.onerror=function(t,n,i){e(Error(t+" ("+n+":"+i+")"))})},function(){var e=window.Mocha=t("mocha"),n=window.mocha=new e({reporter:"html"});n.ui=function(t){return e.prototype.ui.call(this,t),this.suite.emit("pre-require",window,null,this),this},n.setup=function(t){"string"==typeof t&&(t={ui:t});for(var e in t)this[e](t[e]);return this},n.run=function(t){n.options,n.globals("location");var i=e.utils.parseQuery(window.location.search||"");return i.grep&&n.grep(i.grep),i.invert&&n.invert(),e.prototype.run.call(n,function(){e.utils.highlightTags("code"),t&&t()})}}()}();var sinon=function(){"use strict";var buster=function(t,e){var n="function"==typeof require&&"object"==typeof module,i="undefined"!=typeof document&&document.createElement("div"),o=function(){},s={bind:function(t,e){var n="string"==typeof e?t[e]:e,i=Array.prototype.slice.call(arguments,2);return function(){var e=i.concat(Array.prototype.slice.call(arguments));return n.apply(t,e)}},partial:function(t){var e=[].slice.call(arguments,1);return function(){return t.apply(this,e.concat([].slice.call(arguments)))}},create:function(t){return o.prototype=t,new o},extend:function(t){if(t){for(var e,n=1,i=arguments.length;i>n;++n)for(e in arguments[n])t[e]=arguments[n][e];return t}},nextTick:function(e){return"undefined"!=typeof process&&process.nextTick?process.nextTick(e):(t(e,0),void 0)},functionName:function(t){if(!t)return"";if(t.displayName)return t.displayName;if(t.name)return t.name;var e=(""+t).match(/function\s+([^\(]+)/m);return e&&e[1]||""},isNode:function n(t){if(!i)return!1;try{t.appendChild(i),t.removeChild(i)}catch(e){return!1}return!0},isElement:function(t){return t&&1===t.nodeType&&s.isNode(t)},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},flatten:function r(t){for(var e=[],t=t||[],n=0,i=t.length;i>n;++n)e=e.concat(s.isArray(t[n])?r(t[n]):t[n]);return e},each:function(t,e){for(var n=0,i=t.length;i>n;++n)e(t[n])},map:function(t,e){for(var n=[],i=0,o=t.length;o>i;++i)n.push(e(t[i]));return n},parallel:function(t,e){function n(t,n){"function"==typeof e&&(e(t,n),e=null)}function i(t){return function(e,i){return e?n(e):(s[t]=i,0==--o&&n(null,s),void 0)}}if(0==t.length)return n(null,[]);for(var o=t.length,s=[],r=0,a=t.length;a>r;++r)t[r](i(r))},series:function(t,e){function n(t,n){"function"==typeof e&&e(t,n)}function i(){if(0==r.length)return n(null,a);var t=r.shift()(o);t&&"function"==typeof t.then&&t.then(s.partial(o,null),o)}function o(t,e){return t?n(t):(a.push(e),i(),void 0)}var r=t.slice(),a=[];i()},countdown:function(t,e){return function(){0==--t&&e()}}};if("object"==typeof process&&"function"==typeof require&&"object"==typeof module){var a=require("crypto"),l=require("path");s.tmpFile=function(t){var e=a.createHash("sha1");e.update(t);var n=e.digest("hex");return"win32"==process.platform?l.join(process.env.TEMP,n):l.join("/tmp",n)}}return s.some=Array.prototype.some?function(t,e,n){return t.some(e,n)}:function(t,e,n){if(null==t)throw new TypeError;t=Object(t);var i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var o=0;i>o;o++)if(t.hasOwnProperty(o)&&e.call(n,t[o],o,t))return!0;return!1},s.filter=Array.prototype.filter?function(t,e,n){return t.filter(e,n)}:function(t,e){if(null==this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var o=[],s=0;i>s;s++)if(s in n){var r=n[s];t.call(e,r,s,n)&&o.push(r)}return o},n&&(module.exports=s,s.eventEmitter=require("./buster-event-emitter"),Object.defineProperty(s,"defineVersionGetter",{get:function(){return require("./define-version-getter")}})),s.extend(e||{},s)}(setTimeout,buster);if(buster===void 0)var buster={};"object"==typeof module&&"function"==typeof require&&(buster=require("buster-core")),buster.format=buster.format||{},buster.format.excludeConstructors=["Object",/^.$/],buster.format.quoteStrings=!0,buster.format.ascii=function(){function t(t){var e=Object.keys&&Object.keys(t)||[];if(0==e.length)for(var n in t)i.call(t,n)&&e.push(n);return e.sort()}function e(t,e){if("object"!=typeof t)return!1;for(var n=0,i=e.length;i>n;++n)if(e[n]===t)return!0;return!1}function n(t,i,s){if("string"==typeof t){var r="boolean"!=typeof this.quoteStrings||this.quoteStrings;return i||r?'"'+t+'"':t}if("function"==typeof t&&!(t instanceof RegExp))return n.func(t);if(i=i||[],e(t,i))return"[Circular]";if("[object Array]"==Object.prototype.toString.call(t))return n.array.call(this,t,i);if(!t)return""+t;if(buster.isElement(t))return n.element(t);if("function"==typeof t.toString&&t.toString!==Object.prototype.toString)return""+t;for(var a=0,l=o.length;l>a;a++)if(t===o[a].obj)return o[a].value;return n.object.call(this,t,i,s)}var i=Object.prototype.hasOwnProperty,o=[];return"undefined"!=typeof global&&o.push({obj:global,value:"[object global]"}),"undefined"!=typeof document&&o.push({obj:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&o.push({obj:window,value:"[object Window]"}),n.func=function(t){return"function "+buster.functionName(t)+"() {}"},n.array=function(t,e){e=e||[],e.push(t);for(var i=[],o=0,s=t.length;s>o;++o)i.push(n.call(this,t[o],e));return"["+i.join(", ")+"]"},n.object=function(i,o,s){o=o||[],o.push(i),s=s||0;for(var r,a,l,c=[],u=t(i),h="",p=3,m=0,f=s;f>m;++m)h+=" ";for(m=0,f=u.length;f>m;++m)r=u[m],l=i[r],a=e(l,o)?"[Circular]":n.call(this,l,o,s+2),a=(/\s/.test(r)?'"'+r+'"':r)+": "+a,p+=a.length,c.push(a);var d=n.constructorName.call(this,i),y=d?"["+d+"] ":"";return p+s>80?y+"{\n  "+h+c.join(",\n  "+h)+"\n"+h+"}":y+"{ "+c.join(", ")+" }"},n.element=function(t){for(var e,n,i=t.tagName.toLowerCase(),o=t.attributes,s=[],r=0,a=o.length;a>r;++r)e=o.item(r),n=e.nodeName.toLowerCase().replace("html:",""),("contenteditable"!=n||"inherit"!=e.nodeValue)&&e.nodeValue&&s.push(n+'="'+e.nodeValue+'"');var l="<"+i+(s.length>0?" ":""),c=t.innerHTML;c.length>20&&(c=c.substr(0,20)+"[...]");var u=l+s.join(" ")+">"+c+"</"+i+">";return u.replace(/ contentEditable="inherit"/,"")},n.constructorName=function(t){for(var e=buster.functionName(t&&t.constructor),n=this.excludeConstructors||buster.format.excludeConstructors||[],i=0,o=n.length;o>i;++i){if("string"==typeof n[i]&&n[i]==e)return"";if(n[i].test&&n[i].test(e))return""}return e},n}(),"undefined"!=typeof module&&(module.exports=buster.format);var sinon=function(t){function e(t){var e=!1;try{t.appendChild(s),e=s.parentNode==t}catch(n){return!1}finally{try{t.removeChild(s)}catch(n){}}return e}function n(t){return s&&t&&1===t.nodeType&&e(t)}function i(t){return"function"==typeof t||!!(t&&t.constructor&&t.call&&t.apply)}function o(t,e){for(var n in e)r.call(t,n)||(t[n]=e[n])}var s="undefined"!=typeof document&&document.createElement("div"),r=Object.prototype.hasOwnProperty,a={wrapMethod:function(t,e,n){if(!t)throw new TypeError("Should wrap property of object");if("function"!=typeof n)throw new TypeError("Method wrapper should be function");var s=t[e];if(!i(s))throw new TypeError("Attempted to wrap "+typeof s+" property "+e+" as function");if(s.restore&&s.restore.sinon)throw new TypeError("Attempted to wrap "+e+" which is already wrapped");if(s.calledBefore){var a=s.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+e+" which is already "+a)}var l=r.call(t,e);return t[e]=n,n.displayName=e,n.restore=function(){l||delete t[e],t[e]===n&&(t[e]=s)},n.restore.sinon=!0,o(n,s),n},extend:function(t){for(var e=1,n=arguments.length;n>e;e+=1)for(var i in arguments[e])arguments[e].hasOwnProperty(i)&&(t[i]=arguments[e][i]),arguments[e].hasOwnProperty("toString")&&arguments[e].toString!=t.toString&&(t.toString=arguments[e].toString);return t},create:function(t){var e=function(){};return e.prototype=t,new e},deepEqual:function l(t,e){if(a.match&&a.match.isMatcher(t))return t.test(e);if("object"!=typeof t||"object"!=typeof e)return t===e;if(n(t)||n(e))return t===e;if(t===e)return!0;if(null===t&&null!==e||null!==t&&null===e)return!1;var i=Object.prototype.toString.call(t);if(i!=Object.prototype.toString.call(e))return!1;if("[object Array]"==i){if(t.length!==e.length)return!1;for(var o=0,s=t.length;s>o;o+=1)if(!l(t[o],e[o]))return!1;return!0}var r,c=0,u=0;for(r in t)if(c+=1,!l(t[r],e[r]))return!1;for(r in e)u+=1;return c!=u?!1:!0},functionName:function(t){var e=t.displayName||t.name;if(!e){var n=(""+t).match(/function ([^\s\(]+)/);e=n&&n[1]}return e},functionToString:function(){if(this.getCall&&this.callCount)for(var t,e,n=this.callCount;n--;){t=this.getCall(n).thisValue;for(e in t)if(t[e]===this)return e}return this.displayName||"sinon fake"},getConfig:function(t){var e={};t=t||{};var n=a.defaultConfig;for(var i in n)n.hasOwnProperty(i)&&(e[i]=t.hasOwnProperty(i)?t[i]:n[i]);return e},format:function(t){return""+t},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(t){return 1==t&&"once"||2==t&&"twice"||3==t&&"thrice"||(t||0)+" times"},calledInOrder:function(t){for(var e=1,n=t.length;n>e;e++)if(!t[e-1].calledBefore(t[e]))return!1;return!0},orderByFirstCall:function(t){return t.sort(function(t,e){var n=t.getCall(0),i=e.getCall(0),o=n&&n.callId||-1,s=i&&i.callId||-1;return s>o?-1:1})},log:function(){},logError:function(t,e){var n=t+" threw exception: ";a.log(n+"["+e.name+"] "+e.message),e.stack&&a.log(e.stack),setTimeout(function(){throw e.message=n+e.message,e},0)},typeOf:function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1).toLowerCase()}},c="object"==typeof module&&"function"==typeof require;if(c){try{t={format:require("buster-format")}}catch(u){}module.exports=a,module.exports.spy=require("./sinon/spy"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert"),module.exports.match=require("./sinon/match")}if(t){var h=a.create(t.format);h.quoteStrings=!1,a.format=function(){return h.ascii.apply(h,arguments)}}else if(c)try{var p=require("util");a.format=function(t){return"object"==typeof t&&t.toString===Object.prototype.toString?p.inspect(t):t}}catch(u){}return a}("object"==typeof buster&&buster);if(function(t){function e(e,n,i){var o=t.typeOf(e);if(o!==n)throw new TypeError("Expected type of "+i+" to be "+n+", but was "+o)}function n(t){return r.isPrototypeOf(t)}function i(e,n){if(null===n||void 0===n)return!1;for(var o in e)if(e.hasOwnProperty(o)){var s=e[o],r=n[o];if(a.isMatcher(s)){if(!s.test(r))return!1}else if("object"===t.typeOf(s)){if(!i(s,r))return!1}else if(!t.deepEqual(s,r))return!1}return!0}function o(n,i){return function(o,s){e(o,"string","property");var r=1===arguments.length,l=i+'("'+o+'"';return r||(l+=", "+s),l+=")",a(function(e){return void 0!==e&&null!==e&&n(e,o)?r||t.deepEqual(s,e[o]):!1},l)}}var s="object"==typeof module&&"function"==typeof require;if(!t&&s&&(t=require("../sinon")),t){var r={toString:function(){return this.message}};r.or=function(e){if(!n(e))throw new TypeError("Matcher expected");var i=this,o=t.create(r);return o.test=function(t){return i.test(t)||e.test(t)},o.message=i.message+".or("+e.message+")",o},r.and=function(e){if(!n(e))throw new TypeError("Matcher expected");var i=this,o=t.create(r);return o.test=function(t){return i.test(t)&&e.test(t)},o.message=i.message+".and("+e.message+")",o};var a=function(e,n){var o=t.create(r),s=t.typeOf(e);switch(s){case"object":if("function"==typeof e.test)return o.test=function(t){return e.test(t)===!0},o.message="match("+t.functionName(e.test)+")",o;var a=[];for(var l in e)e.hasOwnProperty(l)&&a.push(l+": "+e[l]);o.test=function(t){return i(e,t)},o.message="match("+a.join(", ")+")";break;case"number":o.test=function(t){return e==t};break;case"string":o.test=function(t){return"string"!=typeof t?!1:-1!==t.indexOf(e)},o.message='match("'+e+'")';break;case"regexp":o.test=function(t){return"string"!=typeof t?!1:e.test(t)};break;case"function":o.test=e,o.message=n?n:"match("+t.functionName(e)+")";break;default:o.test=function(n){return t.deepEqual(e,n)}}return o.message||(o.message="match("+e+")"),o};a.isMatcher=n,a.any=a(function(){return!0},"any"),a.defined=a(function(t){return null!==t&&void 0!==t},"defined"),a.truthy=a(function(t){return!!t},"truthy"),a.falsy=a(function(t){return!t},"falsy"),a.same=function(t){return a(function(e){return t===e},"same("+t+")")},a.typeOf=function(n){return e(n,"string","type"),a(function(e){return t.typeOf(e)===n},'typeOf("'+n+'")')},a.instanceOf=function(n){return e(n,"function","type"),a(function(t){return t instanceof n},"instanceOf("+t.functionName(n)+")")},a.has=o(function(t,e){return"object"==typeof t?e in t:void 0!==t[e]},"has"),a.hasOwn=o(function(t,e){return t.hasOwnProperty(e)},"hasOwn"),a.bool=a.typeOf("boolean"),a.number=a.typeOf("number"),a.string=a.typeOf("string"),a.object=a.typeOf("object"),a.func=a.typeOf("function"),a.array=a.typeOf("array"),a.regexp=a.typeOf("regexp"),a.date=a.typeOf("date"),s?module.exports=a:t.match=a}}("object"==typeof sinon&&sinon||null),function(sinon){function spy(t,e){if(!e&&"function"==typeof t)return spy.create(t);if(!t&&!e)return spy.create(function(){});var n=t[e];return sinon.wrapMethod(t,e,spy.create(n))}var commonJSModule="object"==typeof module&&"function"==typeof require,spyCall,callId=0,push=[].push,slice=Array.prototype.slice;!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon&&(sinon.extend(spy,function(){function delegateToCalls(t,e,n,i,o){t[e]=function(){if(!this.called)return o?o.apply(this,arguments):!1;for(var t,s=0,r=0,a=this.callCount;a>r;r+=1)if(t=this.getCall(r),t[i||e].apply(t,arguments)&&(s+=1,n))return!0;return s===this.callCount}}function matchingFake(t,e,n){if(t){e.length;for(var i=0,o=t.length;o>i;i++)if(t[i].matches(e,n))return t[i]}}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function proxy(){return p.invoke(func,this,slice.call(arguments))},p}var vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var t=0;this.fakes.length>t;t++)this.fakes[t].reset()},create:function create(t){var e;"function"!=typeof t?t=function(){}:e=sinon.functionName(t);var n=createProxy(t);return sinon.extend(n,spy),delete n.create,sinon.extend(n,t),n.reset(),n.prototype=t.prototype,n.displayName=e||"spy",n.toString=sinon.functionToString,n._create=sinon.spy.create,n.id="spy#"+uuid++,n},invoke:function invoke(t,e,n){var i,o,s=matchingFake(this.fakes,n);incrementCallCount.call(this),push.call(this.thisValues,e),push.call(this.args,n),push.call(this.callIds,callId++);try{o=s?s.invoke(t,e,n):(this.func||t).apply(e,n)}catch(r){throw push.call(this.returnValues,void 0),i=r,r}finally{push.call(this.exceptions,i)}return push.call(this.returnValues,o),createCallProperties.call(this),o},getCall:function getCall(t){return 0>t||t>=this.callCount?null:spyCall.create(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},calledBefore:function calledBefore(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function calledAfter(t){return this.called&&t.called?this.callIds[this.callCount-1]>t.callIds[t.callCount-1]:!1},withArgs:function(){var t=slice.call(arguments);if(this.fakes){var e=matchingFake(this.fakes,t,!0);if(e)return e}else this.fakes=[];var n=this,i=this._create();i.matchingAguments=t,push.call(this.fakes,i),i.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var o=0;this.args.length>o;o++)i.matches(this.args[o])&&(incrementCallCount.call(i),push.call(i.thisValues,this.thisValues[o]),push.call(i.args,this.args[o]),push.call(i.returnValues,this.returnValues[o]),push.call(i.exceptions,this.exceptions[o]),push.call(i.callIds,this.callIds[o]));return createCallProperties.call(i),i},matches:function(t,e){var n=this.matchingAguments;return n.length<=t.length&&sinon.deepEqual(n,t.slice(0,n.length))?!e||n.length==t.length:void 0},printf:function(t){var e,n=this,i=slice.call(arguments,1);return(t||"").replace(/%(.)/g,function(t,o){return e=spyApi.formatters[o],"function"==typeof e?e.call(null,n,i):isNaN(parseInt(o),10)?"%"+o:sinon.format(i[o-1])})}};return delegateToCalls(spyApi,"calledOn",!0),delegateToCalls(spyApi,"alwaysCalledOn",!1,"calledOn"),delegateToCalls(spyApi,"calledWith",!0),delegateToCalls(spyApi,"calledWithMatch",!0),delegateToCalls(spyApi,"alwaysCalledWith",!1,"calledWith"),delegateToCalls(spyApi,"alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls(spyApi,"calledWithExactly",!0),delegateToCalls(spyApi,"alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls(spyApi,"neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls(spyApi,"neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls(spyApi,"threw",!0),delegateToCalls(spyApi,"alwaysThrew",!1,"threw"),delegateToCalls(spyApi,"returned",!0),delegateToCalls(spyApi,"alwaysReturned",!1,"returned"),delegateToCalls(spyApi,"calledWithNew",!0),delegateToCalls(spyApi,"alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls(spyApi,"callArg",!1,"callArgWith",function(){throw Error(""+this+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls(spyApi,"yield",!1,"yield",function(){throw Error(""+this+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi.yield,delegateToCalls(spyApi,"yieldTo",!1,"yieldTo",function(t){throw Error(""+this+" cannot yield to '"+t+"' since it was not yet invoked.")}),spyApi.formatters={c:function(t){return sinon.timesInWords(t.callCount)},n:function(t){return""+t},C:function(t){for(var e=[],n=0,i=t.callCount;i>n;++n)push.call(e,"    "+(""+t.getCall(n)));return e.length>0?"\n"+e.join("\n"):""},t:function(t){for(var e=[],n=0,i=t.callCount;i>n;++n)push.call(e,sinon.format(t.thisValues[n]));return e.join(", ")},"*":function(t,e){for(var n=[],i=0,o=e.length;o>i;++i)push.call(n,sinon.format(e[i]));return n.join(", ")}},spyApi}()),spyCall=function(){function t(t,e,n){var i=sinon.functionName(t)+e;throw n.length&&(i+=" Received ["+slice.call(n).join(", ")+"]"),Error(i)}var e={create:function(t,e,n,i,o,s){var r=sinon.create(spyCall);return delete r.create,r.proxy=t,r.thisValue=e,r.args=n,r.returnValue=i,r.exception=o,r.callId="number"==typeof s&&s||callId++,r},calledOn:function(t){return sinon.match&&sinon.match.isMatcher(t)?t.test(this.thisValue):this.thisValue===t},calledWith:function(){for(var t=0,e=arguments.length;e>t;t+=1)if(!sinon.deepEqual(arguments[t],this.args[t]))return!1;return!0},calledWithMatch:function(){for(var t=0,e=arguments.length;e>t;t+=1){var n=this.args[t],i=arguments[t];if(!sinon.match||!sinon.match(i).test(n))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(t){return sinon.deepEqual(t,this.returnValue)},threw:function(t){return void 0!==t&&this.exception?"string"==typeof t?this.exception.name==t:this.exception===t:!!this.exception},calledWithNew:function(){return this.thisValue instanceof this.proxy},calledBefore:function(t){return this.callId<t.callId},calledAfter:function(t){return this.callId>t.callId},callArg:function(t){this.args[t]()},callArgWith:function(t){var e=slice.call(arguments,1);this.args[t].apply(null,e)},yield:function(){for(var e=this.args,n=0,i=e.length;i>n;++n)if("function"==typeof e[n])return e[n].apply(null,slice.call(arguments)),void 0;t(this.proxy," cannot yield since no callback was passed.",e)},yieldTo:function(e){for(var n=this.args,i=0,o=n.length;o>i;++i)if(n[i]&&"function"==typeof n[i][e])return n[i][e].apply(null,slice.call(arguments,1)),void 0;t(this.proxy," cannot yield to '"+e+"' since no callback was passed.",n)},toString:function(){for(var t=""+this.proxy+"(",e=[],n=0,i=this.args.length;i>n;++n)push.call(e,sinon.format(this.args[n]));return t=t+e.join(", ")+")",this.returnValue!==void 0&&(t+=" => "+sinon.format(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}};return e.invokeCallback=e.yield,e}(),spy.spyCall=spyCall,sinon.spyCall=spyCall,commonJSModule?module.exports=spy:sinon.spy=spy)}("object"==typeof sinon&&sinon||null),function(t){function e(n,i,o){if(o&&"function"!=typeof o)throw new TypeError("Custom stub should be function");var s;if(s=o?t.spy&&t.spy.create?t.spy.create(o):o:e.create(),!n&&!i)return t.stub.create();if(!i&&n&&"object"==typeof n){for(var r in n)"function"==typeof n[r]&&e(n,r);return n}return t.wrapMethod(n,i,s)}function n(t,e){var n=t.callCount-1,i=n in t[e]?t[e][n]:t[e+"Last"];return t[e+"Last"]=i,i}function i(t,e){var i=n(t,"callArgAts");if(0>i){for(var o=n(t,"callArgProps"),s=0,r=e.length;r>s;++s){if(!o&&"function"==typeof e[s])return e[s];if(o&&e[s]&&"function"==typeof e[s][o])return e[s][o]}return null}return e[i]}function o(e,n,i){if(0>e.callArgAtsLast){var o;return o=e.callArgPropsLast?t.functionName(e)+" expected to yield to '"+e.callArgPropsLast+"', but no object with such a property was passed.":t.functionName(e)+" expected to yield, but no callback was passed.",i.length>0&&(o+=" Received ["+a.call(i,", ")+"]"),o}return"argument at index "+e.callArgAtsLast+" is not a function: "+n}function s(t,e){if(t.callArgAts.length>0){var s=i(t,e);if("function"!=typeof s)throw new TypeError(o(t,s,e));t.callCount-1;var r=n(t,"callbackArguments"),a=n(t,"callbackContexts");t.callbackAsync?l(function(){s.apply(a,r)}):s.apply(a,r)}}var r="object"==typeof module&&"function"==typeof require;if(!t&&r&&(t=require("../sinon")),t){var a=Array.prototype.join,l=function(){return"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof msSetImmediate?msSetImmediate.bind(window):"function"==typeof setImmediate?setImmediate:function(t){setTimeout(t,0)}}(),c=0;t.extend(e,function(){function n(t,e){return"string"==typeof t?(this.exception=Error(e||""),this.exception.name=t):this.exception=t?t:Error("Error"),this}var i,o=Array.prototype.slice;i={create:function(){var n=function(){if(s(n,arguments),n.exception)throw n.exception;return"number"==typeof n.returnArgAt?arguments[n.returnArgAt]:n.returnThis?this:n.returnValue};n.id="stub#"+c++;var i=n;return n=t.spy.create(n),n.func=i,n.callArgAts=[],n.callbackArguments=[],n.callbackContexts=[],n.callArgProps=[],t.extend(n,e),n._create=t.stub.create,n.displayName="stub",n.toString=t.functionToString,n},returns:function(t){return this.returnValue=t,this},returnsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this},"throws":n,throwsException:n,callsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},callsArgOn:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(e),this.callArgProps.push(void 0),this},callsArgWith:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAts.push(t),this.callbackArguments.push(o.call(arguments,1)),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},callsArgOnWith:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAts.push(t),this.callbackArguments.push(o.call(arguments,2)),this.callbackContexts.push(e),this.callArgProps.push(void 0),this},yields:function(){return this.callArgAts.push(-1),this.callbackArguments.push(o.call(arguments,0)),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},yieldsOn:function(t){if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(o.call(arguments,1)),this.callbackContexts.push(t),this.callArgProps.push(void 0),this},yieldsTo:function(t){return this.callArgAts.push(-1),this.callbackArguments.push(o.call(arguments,1)),this.callbackContexts.push(void 0),this.callArgProps.push(t),this},yieldsToOn:function(t,e){if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(o.call(arguments,2)),this.callbackContexts.push(e),this.callArgProps.push(t),this}};for(var r in i)i.hasOwnProperty(r)&&r.match(/^(callsArg|yields|thenYields$)/)&&!r.match(/Async/)&&(i[r+"Async"]=function(t){return function(){return this.callbackAsync=!0,this[t].apply(this,arguments)}}(r));return i}()),r?module.exports=e:t.stub=e}}("object"==typeof sinon&&sinon||null),function(t){function e(n){return n?e.create(n):t.expectation.create("Anonymous mock")}var n="object"==typeof module&&"function"==typeof require,i=[].push;if(!t&&n&&(t=require("../sinon")),t){t.mock=e,t.extend(e,function(){function n(t,e){if(t)for(var n=0,i=t.length;i>n;n+=1)e(t[n])}return{create:function(n){if(!n)throw new TypeError("object is null");var i=t.extend({},e);return i.object=n,delete i.create,i},expects:function(e){if(!e)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[e]){this.expectations[e]=[];var n=this;t.wrapMethod(this.object,e,function(){return n.invokeMethod(e,this,arguments)}),i.call(this.proxies,e)}var o=t.expectation.create(e);return i.call(this.expectations[e],o),o},restore:function(){var t=this.object;n(this.proxies,function(e){"function"==typeof t[e].restore&&t[e].restore()})},verify:function(){var e=this.expectations||{},o=[],s=[];return n(this.proxies,function(t){n(e[t],function(t){t.met()?i.call(s,""+t):i.call(o,""+t)})}),this.restore(),o.length>0?t.expectation.fail(o.concat(s).join("\n")):t.expectation.pass(o.concat(s).join("\n")),!0},invokeMethod:function(e,n,o){var s,r=this.expectations&&this.expectations[e],a=r&&r.length||0;for(s=0;a>s;s+=1)if(!r[s].met()&&r[s].allowsCall(n,o))return r[s].apply(n,o);var l,c=[],u=0;for(s=0;a>s;s+=1)r[s].allowsCall(n,o)?l=l||r[s]:u+=1,i.call(c,"    "+(""+r[s]));return 0===u?l.apply(n,o):(c.unshift("Unexpected call: "+t.spyCall.toString.call({proxy:e,args:o})),t.expectation.fail(c.join("\n")),void 0)}}}());var o=t.timesInWords;t.expectation=function(){function e(t){return 0==t?"never called":"called "+o(t)}function n(t){var e=t.minCalls,n=t.maxCalls;if("number"==typeof e&&"number"==typeof n){var i=o(e);return e!=n&&(i="at least "+i+" and at most "+o(n)),i}return"number"==typeof e?"at least "+o(e):"at most "+o(n)}function s(t){var e="number"==typeof t.minCalls;return!e||t.callCount>=t.minCalls}function r(t){return"number"!=typeof t.maxCalls?!1:t.callCount==t.maxCalls}var a=Array.prototype.slice,l=t.spy.invoke;return{minCalls:1,maxCalls:1,create:function(e){var n=t.extend(t.stub.create(),t.expectation);return delete n.create,n.method=e,n},invoke:function(t,e,n){return this.verifyCallAllowed(e,n),l.apply(this,arguments)},atLeast:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&s(this)},verifyCallAllowed:function(e,n){if(r(this)&&(this.failed=!0,t.expectation.fail(this.method+" already called "+o(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==e&&t.expectation.fail(this.method+" called with "+e+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n||t.expectation.fail(this.method+" received no arguments, expected "+t.format(this.expectedArguments)),n.length<this.expectedArguments.length&&t.expectation.fail(this.method+" received too few arguments ("+t.format(n)+"), expected "+t.format(this.expectedArguments)),this.expectsExactArgCount&&n.length!=this.expectedArguments.length&&t.expectation.fail(this.method+" received too many arguments ("+t.format(n)+"), expected "+t.format(this.expectedArguments));for(var i=0,s=this.expectedArguments.length;s>i;i+=1)t.deepEqual(this.expectedArguments[i],n[i])||t.expectation.fail(this.method+" received wrong arguments "+t.format(n)+", expected "+t.format(this.expectedArguments))
}},allowsCall:function(e,n){if(this.met()&&r(this))return!1;if("expectedThis"in this&&this.expectedThis!==e)return!1;if(!("expectedArguments"in this))return!0;if(n=n||[],n.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&n.length!=this.expectedArguments.length)return!1;for(var i=0,o=this.expectedArguments.length;o>i;i+=1)if(!t.deepEqual(this.expectedArguments[i],n[i]))return!1;return!0},withArgs:function(){return this.expectedArguments=a.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var o=(this.expectedArguments||[]).slice();this.expectsExactArgCount||i.call(o,"[...]");var s=t.spyCall.toString.call({proxy:this.method,args:o}),r=s.replace(", [...","[, ...")+" "+n(this);return this.met()?"Expectation met: "+r:"Expected "+r+" ("+e(this.callCount)+")"},verify:function(){return this.met()?t.expectation.pass(""+this):t.expectation.fail(""+this),!0},pass:function(e){t.assert.pass(e)},fail:function(t){var e=Error(t);throw e.name="ExpectationError",e}}}(),n?module.exports=e:t.mock=e}}("object"==typeof sinon&&sinon||null),function(t){function e(t){return t.fakes||(t.fakes=[]),t.fakes}function n(t,n){for(var i=e(t),o=0,s=i.length;s>o;o+=1)"function"==typeof i[o][n]&&i[o][n]()}function i(t){for(var n=e(t),i=0;n.length>i;)n.splice(i,1)}var o="object"==typeof module&&"function"==typeof require,s=[].push,r=Object.prototype.hasOwnProperty;if(!t&&o&&(t=require("../sinon")),t){var a={verify:function(){n(this,"verify")},restore:function(){n(this,"restore"),i(this)},verifyAndRestore:function(){var t;try{this.verify()}catch(e){t=e}if(this.restore(),t)throw t},add:function(t){return s.call(e(this),t),t},spy:function(){return this.add(t.spy.apply(t,arguments))},stub:function(e,n,i){if(n){var o=e[n];if("function"!=typeof o){if(!r.call(e,n))throw new TypeError("Cannot stub non-existent own property "+n);return e[n]=i,this.add({restore:function(){e[n]=o}})}}if(!n&&e&&"object"==typeof e){var s=t.stub.apply(t,arguments);for(var a in s)"function"==typeof s[a]&&this.add(s[a]);return s}return this.add(t.stub.apply(t,arguments))},mock:function(){return this.add(t.mock.apply(t,arguments))},inject:function(t){var e=this;return t.spy=function(){return e.spy.apply(e,arguments)},t.stub=function(){return e.stub.apply(e,arguments)},t.mock=function(){return e.mock.apply(e,arguments)},t}};o?module.exports=a:t.collection=a}}("object"==typeof sinon&&sinon||null),sinon===void 0)var sinon={};if(function(global){function addTimer(t,e){if(0===t.length)throw Error("Function requires at least 1 parameter");var n=id++,i=t[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[n]={id:n,func:t[0],callAt:this.now+i,invokeArgs:Array.prototype.slice.call(t,2)},e===!0&&(this.timeouts[n].interval=i),n}function parseTime(t){if(!t)return 0;var e,n=t.split(":"),i=n.length,o=i,s=0;if(i>3||!/^(\d\d:){0,2}\d\d?$/.test(t))throw Error("tick only understands numbers and 'h:m:s'");for(;o--;){if(e=parseInt(n[o],10),e>=60)throw Error("Invalid time "+t);s+=e*Math.pow(60,i-o-1)}return 1e3*s}function createObject(t){var e;if(Object.create)e=Object.create(t);else{var n=function(){};n.prototype=t,e=new n}return e.Date.clock=e,e}function mirrorDateProperties(t,e){return e.now?t.now=function(){return t.clock.now}:delete t.now,e.toSource?t.toSource=function(){return e.toSource()}:delete t.toSource,t.toString=function(){return""+e},t.prototype=e.prototype,t.parse=e.parse,t.UTC=e.UTC,t.prototype.toUTCString=e.prototype.toUTCString,t}function restore(){for(var t,e=0,n=this.methods.length;n>e;e++)t=this.methods[e],global[t].hadOwnProperty?global[t]=this["_"+t]:delete global[t];this.methods=[]}function stubGlobal(t,e){if(e[t].hadOwnProperty=Object.prototype.hasOwnProperty.call(global,t),e["_"+t]=global[t],"Date"==t){var n=mirrorDateProperties(e[t],global[t]);global[t]=n}else{global[t]=function(){return e[t].apply(e,arguments)};for(var i in e[t])e[t].hasOwnProperty(i)&&(global[t][i]=e[t][i])}global[t].clock=e}var id=1;sinon.clock={now:0,create:function create(t){var e=createObject(this);if("number"==typeof t&&(e.now=t),t&&"object"==typeof t)throw new TypeError("now should be milliseconds since UNIX epoch");return e},setTimeout:function setTimeout(){return addTimer.call(this,arguments,!1)},clearTimeout:function clearTimeout(t){this.timeouts||(this.timeouts=[]),t in this.timeouts&&delete this.timeouts[t]},setInterval:function setInterval(){return addTimer.call(this,arguments,!0)},clearInterval:function clearInterval(t){this.clearTimeout(t)},tick:function tick(t){t="number"==typeof t?t:parseTime(t);for(var e,n=this.now,i=this.now+t,o=this.now,s=this.firstTimerInRange(n,i);s&&i>=n;){if(this.timeouts[s.id]){n=this.now=s.callAt;try{this.callTimer(s)}catch(r){e=e||r}}s=this.firstTimerInRange(o,i),o=n}if(this.now=i,e)throw e},firstTimerInRange:function(t,e){var n,i,o;for(var s in this.timeouts)if(this.timeouts.hasOwnProperty(s)){if(t>this.timeouts[s].callAt||this.timeouts[s].callAt>e)continue;(!i||i>this.timeouts[s].callAt)&&(o=this.timeouts[s],i=this.timeouts[s].callAt,n={func:this.timeouts[s].func,callAt:this.timeouts[s].callAt,interval:this.timeouts[s].interval,id:this.timeouts[s].id,invokeArgs:this.timeouts[s].invokeArgs})}return n||null},callTimer:function(timer){"number"==typeof timer.interval?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.invokeArgs):eval(timer.func)}catch(e){var exception=e}if(this.timeouts[timer.id]){if(exception)throw exception}else if(exception)throw exception},reset:function reset(){this.timeouts={}},Date:function(){function t(n,i,o,s,r,a,l){switch(arguments.length){case 0:return new e(t.clock.now);case 1:return new e(n);case 2:return new e(n,i);case 3:return new e(n,i,o);case 4:return new e(n,i,o,s);case 5:return new e(n,i,o,s,r);case 6:return new e(n,i,o,s,r,a);default:return new e(n,i,o,s,r,a,l)}}var e=Date;return mirrorDateProperties(t,e)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function useFakeTimers(t){var e=sinon.clock.create(t);e.restore=restore,e.methods=Array.prototype.slice.call(arguments,"number"==typeof t?1:0),0===e.methods.length&&(e.methods=methods);for(var n=0,i=e.methods.length;i>n;n++)stubGlobal(e.methods[n],e);return e}}("undefined"!=typeof global&&"function"!=typeof global?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),sinon===void 0&&(this.sinon={}),function(){var t=[].push;sinon.Event=function(t,e,n){this.initEvent(t,e,n)},sinon.Event.prototype={initEvent:function(t,e,n){this.type=t,this.bubbles=e,this.cancelable=n},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(e,n){this.eventListeners=this.eventListeners||{},this.eventListeners[e]=this.eventListeners[e]||[],t.call(this.eventListeners[e],n)},removeEventListener:function(t,e){for(var n=this.eventListeners&&this.eventListeners[t]||[],i=0,o=n.length;o>i;++i)if(n[i]==e)return n.splice(i,1)},dispatchEvent:function(t){for(var e=t.type,n=this.eventListeners&&this.eventListeners[e]||[],i=0;n.length>i;i++)"function"==typeof n[i]?n[i].call(this,t):n[i].handleEvent(t);return!!t.defaultPrevented}}}(),sinon===void 0&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(t){function e(){this.readyState=e.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="","function"==typeof e.onCreate&&e.onCreate(this)}function n(t){if(t.readyState!==e.OPENED)throw Error("INVALID_STATE_ERR");if(t.sendFlag)throw Error("INVALID_STATE_ERR")}function i(t,e){if(t)for(var n=0,i=t.length;i>n;n+=1)e(t[n])}function o(t,e){for(var n=0;t.length>n;n++)if(e(t[n])===!0)return!0;return!1}function s(t){if(t.readyState==e.DONE)throw Error("Request done")}function r(t){if(t.async&&t.readyState!=e.HEADERS_RECEIVED)throw Error("No headers received")}function a(t){if("string"!=typeof t){var e=Error("Attempted to respond to fake XMLHttpRequest with "+t+", which is not a string.");throw e.name="InvalidBodyException",e}}var l=sinon.xhr;l.GlobalXMLHttpRequest=t.XMLHttpRequest,l.GlobalActiveXObject=t.ActiveXObject,l.supportsActiveX=l.GlobalActiveXObject!==void 0,l.supportsXHR=l.GlobalXMLHttpRequest!==void 0,l.workingXHR=l.supportsXHR?l.GlobalXMLHttpRequest:l.supportsActiveX?function(){return new l.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var c={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},u=function(t,e,n){switch(n.length){case 0:return t[e]();case 1:return t[e](n[0]);case 2:return t[e](n[0],n[1]);case 3:return t[e](n[0],n[1],n[2]);case 4:return t[e](n[0],n[1],n[2],n[3]);case 5:return t[e](n[0],n[1],n[2],n[3],n[4])}};e.filters=[],e.addFilter=function(t){this.filters.push(t)};var h=/MSIE 6/;e.defake=function(t,n){var o=new sinon.xhr.workingXHR;i(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(e){t[e]=function(){return u(o,e,arguments)}});var s=function(e){i(e,function(e){try{t[e]=o[e]}catch(n){if(!h.test(navigator.userAgent))throw n}})},r=function(){t.readyState=o.readyState,o.readyState>=e.HEADERS_RECEIVED&&s(["status","statusText"]),o.readyState>=e.LOADING&&s(["responseText"]),o.readyState===e.DONE&&s(["responseXML"]),t.onreadystatechange&&t.onreadystatechange.call(t)};if(o.addEventListener){for(var a in t.eventListeners)t.eventListeners.hasOwnProperty(a)&&i(t.eventListeners[a],function(t){o.addEventListener(a,t)});o.addEventListener("readystatechange",r)}else o.onreadystatechange=r;u(o,"open",n)},e.useFilters=!1,sinon.extend(e.prototype,sinon.EventTarget,{async:!0,open:function(t,n,i,s,r){if(this.method=t,this.url=n,this.async="boolean"==typeof i?i:!0,this.username=s,this.password=r,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,sinon.FakeXMLHttpRequest.useFilters===!0){var a=arguments,l=o(e.filters,function(t){return t.apply(this,a)});if(l)return sinon.FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(e.OPENED)},readyStateChange:function(t){if(this.readyState=t,"function"==typeof this.onreadystatechange)try{this.onreadystatechange()}catch(e){sinon.logError("Fake XHR onreadystatechange handler",e)}this.dispatchEvent(new sinon.Event("readystatechange"))},setRequestHeader:function(t,e){if(n(this),c[t]||/^(Sec-|Proxy-)/.test(t))throw Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+e:this.requestHeaders[t]=e},setResponseHeaders:function(t){this.responseHeaders={};for(var n in t)t.hasOwnProperty(n)&&(this.responseHeaders[n]=t[n]);this.async&&this.readyStateChange(e.HEADERS_RECEIVED)},send:function(t){if(n(this),!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var i=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=i[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=t}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(e.OPENED),"function"==typeof this.onSend&&this.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT},getResponseHeader:function(t){if(this.readyState<e.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(t))return null;t=t.toLowerCase();for(var n in this.responseHeaders)if(n.toLowerCase()==t)return this.responseHeaders[n];return null},getAllResponseHeaders:function(){if(this.readyState<e.HEADERS_RECEIVED)return"";var t="";for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(t+=n+": "+this.responseHeaders[n]+"\r\n");return t},setResponseBody:function(t){s(this),r(this),a(t);var n=this.chunkSize||10,i=0;this.responseText="";do this.async&&this.readyStateChange(e.LOADING),this.responseText+=t.substring(i,i+n),i+=n;while(t.length>i);var o=this.getResponseHeader("Content-Type");if(this.responseText&&(!o||/(text\/xml)|(application\/xml)|(\+xml)/.test(o)))try{this.responseXML=e.parseXML(this.responseText)}catch(l){}this.async?this.readyStateChange(e.DONE):this.readyState=e.DONE},respond:function(t,n,i){this.setResponseHeaders(n||{}),this.status="number"==typeof t?t:200,this.statusText=e.statusCodes[this.status],this.setResponseBody(i||"")}}),sinon.extend(e,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),e.parseXML=function(t){var e;if("undefined"!=typeof DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},e.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(e){l.supportsXHR&&(t.XMLHttpRequest=l.GlobalXMLHttpRequest),l.supportsActiveX&&(t.ActiveXObject=l.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,e!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},l.supportsXHR&&(t.XMLHttpRequest=sinon.FakeXMLHttpRequest),l.supportsActiveX&&(t.ActiveXObject=function(t){return"Microsoft.XMLHTTP"==t||/^Msxml2\.XMLHTTP/i.test(t)?new sinon.FakeXMLHttpRequest:new l.GlobalActiveXObject(t)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=e}(this),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),sinon===void 0)var sinon={};if(sinon.fakeServer=function(){function t(){}function e(e){return t.prototype=e,new t}function n(t){var e=t;if("[object Array]"!=Object.prototype.toString.call(t)&&(e=[200,{},t]),"string"!=typeof e[2])throw new TypeError("Fake server response body should be string, but was "+typeof e[2]);return e}function i(t,e,n){var i=t.method,o=!i||i.toLowerCase()==e.toLowerCase(),s=t.url,r=!s||s==n||"function"==typeof s.test&&s.test(n);return o&&r}function o(t,e){this.getHTTPMethod(e);var n=e.url;if((!/^https?:\/\//.test(n)||a.test(n))&&(n=n.replace(a,"")),i(t,this.getHTTPMethod(e),n)){if("function"==typeof t.response){var o=t.url,s=[e].concat(o?n.match(o).slice(1):[]);return t.response.apply(t,s)}return!0}return!1}var s=[].push,r="undefined"!=typeof window?window.location:{},a=RegExp("^"+r.protocol+"//"+r.host);return{create:function(){var t=e(this);return this.xhr=sinon.useFakeXMLHttpRequest(),t.requests=[],this.xhr.onCreate=function(e){t.addRequest(e)},t},addRequest:function(t){var e=this;s.call(this.requests,t),t.onSend=function(){e.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){e.responding=!1,e.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(t){if(this.fakeHTTPMethods&&/post/i.test(t.method)){var e=(t.requestBody||"").match(/_method=([^\b;]+)/);return e?e[1]:t.method}return t.method},handleRequest:function(t){t.async?(this.queue||(this.queue=[]),s.call(this.queue,t)):this.processRequest(t)},respondWith:function(t,e,i){return 1==arguments.length&&"function"!=typeof t?(this.response=n(t),void 0):(this.responses||(this.responses=[]),1==arguments.length&&(i=t,e=t=null),2==arguments.length&&(i=e,e=t,t=null),s.call(this.responses,{method:t,url:e,response:"function"==typeof i?i:n(i)}),void 0)},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);for(var t,e=this.queue||[];t=e.shift();)this.processRequest(t)},processRequest:function(t){try{if(t.aborted)return;var e=this.response||[404,{},""];if(this.responses)for(var n=0,i=this.responses.length;i>n;n++)if(o.call(this,this.responses[n],t)){e=this.responses[n].response;break}4!=t.readyState&&t.respond(e[0],e[1],e[2])}catch(s){sinon.logError("Fake server request processing",s)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),function(){function t(){}t.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new t,sinon.fakeServerWithClock.addRequest=function(t){if(t.async&&("object"==typeof setTimeout.clock?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0),!this.longestTimeout)){var e=this.clock.setTimeout,n=this.clock.setInterval,i=this;this.clock.setTimeout=function(t,n){return i.longestTimeout=Math.max(n,i.longestTimeout||0),e.apply(this,arguments)},this.clock.setInterval=function(t,e){return i.longestTimeout=Math.max(e,i.longestTimeout||0),n.apply(this,arguments)}}return sinon.fakeServer.addRequest.call(this,t)},sinon.fakeServerWithClock.respond=function(){var t=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),t},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}(),"object"==typeof module&&"function"==typeof require){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}return function(){function t(t,e,i,o){o&&(e.injectInto?e.injectInto[i]=o:n.call(t.args,o))}function e(t){var e=sinon.create(sinon.sandbox);return t.useFakeServer&&("object"==typeof t.useFakeServer&&(e.serverPrototype=t.useFakeServer),e.useFakeServer()),t.useFakeTimers&&("object"==typeof t.useFakeTimers?e.useFakeTimers.apply(e,t.useFakeTimers):e.useFakeTimers()),e}var n=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return t&&t.create?(this.server=t.create(),this.add(this.server)):null},inject:function(t){return sinon.collection.inject.call(this,t),this.clock&&(t.clock=this.clock),this.server&&(t.server=this.server,t.requests=this.server.requests),t},create:function(n){if(!n)return sinon.create(sinon.sandbox);var i=e(n);i.args=i.args||[];var o,s,r=i.inject({});if(n.properties)for(var a=0,l=n.properties.length;l>a;a++)o=n.properties[a],s=r[o]||"sandbox"==o&&i,t(i,n,o,s);else t(i,n,"sandbox",s);return i}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,"object"==typeof module&&"function"==typeof require&&(module.exports=sinon.sandbox)}(),function(t){function e(e){var n=typeof e;if("function"!=n)throw new TypeError("sinon.test needs to wrap a test function, got "+n);return function(){var n=t.getConfig(t.config);n.injectInto=n.injectIntoThis&&this||n.injectInto;var i,o,s=t.sandbox.create(n),r=Array.prototype.slice.call(arguments).concat(s.args);try{o=e.apply(this,r)}catch(a){i=a}if(i!==void 0)throw s.restore(),i;return s.verifyAndRestore(),o}}var n="object"==typeof module&&"function"==typeof require;!t&&n&&(t=require("../sinon")),t&&(e.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},n?module.exports=e:t.test=e)}("object"==typeof sinon&&sinon||null),function(t){function e(t,e,n){return function(){e&&e.apply(this,arguments);var i,o;try{o=t.apply(this,arguments)}catch(s){i=s}if(n&&n.apply(this,arguments),i)throw i;return o}}function n(n,i){if(!n||"object"!=typeof n)throw new TypeError("sinon.testCase needs an object with test functions");i=i||"test";var o,s,r,a=RegExp("^"+i),l={},c=n.setUp,u=n.tearDown;for(o in n)if(n.hasOwnProperty(o)){if(s=n[o],/^(setUp|tearDown)$/.test(o))continue;"function"==typeof s&&a.test(o)?(r=s,(c||u)&&(r=e(s,c,u)),l[o]=t.test(r)):l[o]=n[o]}return l}var i="object"==typeof module&&"function"==typeof require;!t&&i&&(t=require("../sinon")),t&&Object.prototype.hasOwnProperty&&(i?module.exports=n:t.testCase=n)}("object"==typeof sinon&&sinon||null),function(t,e){function n(){for(var t,e=0,n=arguments.length;n>e;++e)t=arguments[e],t||r.fail("fake is not a spy"),"function"!=typeof t&&r.fail(t+" is not a function"),"function"!=typeof t.getCall&&r.fail(t+" is not stubbed")}function i(t,n){t=t||e;var i=t.fail||r.fail;i.call(t,n)}function o(t,e,o){2==arguments.length&&(o=e,e=t),r[t]=function(s){n(s);var a=l.call(arguments,1),c=!1;c="function"==typeof e?!e(s):"function"==typeof s[e]?!s[e].apply(s,a):!s[e],c?i(this,s.printf.apply(s,[o].concat(a))):r.pass(t)}}function s(t,e){return!t||/^fail/.test(e)?e:t+e.slice(0,1).toUpperCase()+e.slice(1)}var r,a="object"==typeof module&&"function"==typeof require,l=Array.prototype.slice;!t&&a&&(t=require("../sinon")),t&&(r={failException:"AssertError",fail:function(t){var e=Error(t);throw e.name=this.failException||r.failException,e},pass:function(){},callOrder:function(){n.apply(null,arguments);var e="",o="";if(t.calledInOrder(arguments))r.pass("callOrder");else{try{e=[].join.call(arguments,", "),o=t.orderByFirstCall(l.call(arguments)).join(", ")}catch(s){}i(this,"expected "+e+" to be "+"called in order but were called as "+o)}},callCount:function(e,o){if(n(e),e.callCount!=o){var s="expected %n to be called "+t.timesInWords(o)+" but was called %c%C";i(this,e.printf(s))}else r.pass("callCount")},expose:function(t,e){if(!t)throw new TypeError("target is null or undefined");var n=e||{},i=n.prefix===void 0&&"assert"||n.prefix,o=n.includeFail===void 0||!!n.includeFail;for(var r in this)"export"==r||!o&&/^(fail)/.test(r)||(t[s(i,r)]=this[r]);return t}},o("called","expected %n to have been called at least once but was never called"),o("notCalled",function(t){return!t.called},"expected %n to not have been called but was called %c%C"),o("calledOnce","expected %n to be called once but was called %c%C"),o("calledTwice","expected %n to be called twice but was called %c%C"),o("calledThrice","expected %n to be called thrice but was called %c%C"),o("calledOn","expected %n to be called with %1 as this but was called with %t"),o("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),o("calledWithNew","expected %n to be called with new"),o("alwaysCalledWithNew","expected %n to always be called with new"),o("calledWith","expected %n to be called with arguments %*%C"),o("calledWithMatch","expected %n to be called with match %*%C"),o("alwaysCalledWith","expected %n to always be called with arguments %*%C"),o("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),o("calledWithExactly","expected %n to be called with exact arguments %*%C"),o("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),o("neverCalledWith","expected %n to never be called with arguments %*%C"),o("neverCalledWithMatch","expected %n to never be called with match %*%C"),o("threw","%n did not throw exception%C"),o("alwaysThrew","%n did not always throw exception%C"),a?module.exports=r:t.assert=r)}("object"==typeof sinon&&sinon||null,"undefined"!=typeof window?window:global),sinon}.call("undefined"!=typeof window&&window||{});(function(t){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):chai.use(t)})(function sinonChai(t,e){"use strict";function n(t){return"function"==typeof t&&"function"==typeof t.getCall&&"function"==typeof t.calledWithExactly}function i(t){return t&&n(t.proxy)}function o(t){if(!n(t._obj)&&!i(t._obj))throw new TypeError(e.inspect(t._obj)+" is not a spy or a call to a spy!")}function s(t,e,n,i,o){function s(e){return t.printf.apply(t,e)}var r=i?"always have ":"have ";return n=n||"",t=t.proxy||t,{affirmative:s(["expected %n to "+r+e+n].concat(o)),negative:s(["expected %n to not "+r+e].concat(o))}}function r(n,i,r){e.addProperty(t.Assertion.prototype,n,function(){o(this);var t=s(this._obj,i,r,!1);this.assert(this._obj[n],t.affirmative,t.negative)})}function a(t,n,i){return function(){o(this);var r="always"+t[0].toUpperCase()+t.substring(1),a=e.flag(this,"always")&&"function"==typeof this._obj[r],l=a?r:t,c=s(this._obj,n,i,a,h.call(arguments));this.assert(this._obj[l].apply(this._obj,arguments),c.affirmative,c.negative)}}function l(n,i,o){var s=a(n,i,o);e.addProperty(t.Assertion.prototype,n,s)}function c(n,i,o,s){var r=a(i,o,s);e.addMethod(t.Assertion.prototype,n,r)}function u(t,e,n){c(t,t,e,n)}var h=Array.prototype.slice;e.addProperty(t.Assertion.prototype,"always",function(){e.flag(this,"always",!0)}),r("called","been called"," at least once, but it was never called"),r("calledOnce","been called exactly once",", but it was called %c%C"),r("calledTwice","been called exactly twice",", but it was called %c%C"),r("calledThrice","been called exactly thrice",", but it was called %c%C"),l("calledWithNew","been called with new"),u("calledBefore","been called before %1"),u("calledAfter","been called after %1"),u("calledOn","been called with %1 as this",", but it was called with %t instead"),u("calledWith","been called with arguments %*","%C"),u("calledWithExactly","been called with exact arguments %*","%C"),u("returned","returned %1"),c("thrown","threw","thrown %1")}),mocha.setup({ui:"bdd"}),window.expect=chai.expect;var Box2D={};(function(t,e){function n(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,e,n){n.get instanceof Function&&t.__defineGetter__(e,n.get),n.set instanceof Function&&t.__defineSetter__(e,n.set)}),t.inherit=function(t,e){var i=t;n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=i},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){t===e&&(t=0);for(var n=Array(t||0),i=0;t>i;++i)n[i]=0;return n},t.is=function(t,n){return null===t?!1:n instanceof Function&&t instanceof n?!0:t.constructor.__implements!=e&&t.constructor.__implements[n]?!0:!1},t.parseUInt=function(t){return Math.abs(parseInt(t))}})(Box2D);var Vector=Array,Vector_a2j_Number=Box2D.NVector;Box2D===void 0&&(Box2D={}),Box2D.Collision===void 0&&(Box2D.Collision={}),Box2D.Collision.Shapes===void 0&&(Box2D.Collision.Shapes={}),Box2D.Common===void 0&&(Box2D.Common={}),Box2D.Common.Math===void 0&&(Box2D.Common.Math={}),Box2D.Dynamics===void 0&&(Box2D.Dynamics={}),Box2D.Dynamics.Contacts===void 0&&(Box2D.Dynamics.Contacts={}),Box2D.Dynamics.Controllers===void 0&&(Box2D.Dynamics.Controllers={}),Box2D.Dynamics.Joints===void 0&&(Box2D.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function n(){n.b2BoundValues.apply(this,arguments),this.constructor===n&&this.b2BoundValues.apply(this,arguments)}function i(){i.b2Collision.apply(this,arguments)}function o(){o.b2ContactID.apply(this,arguments),this.constructor===o&&this.b2ContactID.apply(this,arguments)}function s(){s.b2ContactPoint.apply(this,arguments)}function r(){r.b2Distance.apply(this,arguments)}function a(){a.b2DistanceInput.apply(this,arguments)}function l(){l.b2DistanceOutput.apply(this,arguments)}function c(){c.b2DistanceProxy.apply(this,arguments)}function u(){u.b2DynamicTree.apply(this,arguments),this.constructor===u&&this.b2DynamicTree.apply(this,arguments)}function h(){h.b2DynamicTreeBroadPhase.apply(this,arguments)}function p(){p.b2DynamicTreeNode.apply(this,arguments)}function m(){m.b2DynamicTreePair.apply(this,arguments)}function f(){f.b2Manifold.apply(this,arguments),this.constructor===f&&this.b2Manifold.apply(this,arguments)}function d(){d.b2ManifoldPoint.apply(this,arguments),this.constructor===d&&this.b2ManifoldPoint.apply(this,arguments)}function y(){y.b2Point.apply(this,arguments)}function _(){_.b2RayCastInput.apply(this,arguments),this.constructor===_&&this.b2RayCastInput.apply(this,arguments)}function g(){g.b2RayCastOutput.apply(this,arguments)}function x(){x.b2Segment.apply(this,arguments)}function v(){v.b2SeparationFunction.apply(this,arguments)}function b(){b.b2Simplex.apply(this,arguments),this.constructor===b&&this.b2Simplex.apply(this,arguments)}function w(){w.b2SimplexCache.apply(this,arguments)}function C(){C.b2SimplexVertex.apply(this,arguments)}function S(){S.b2TimeOfImpact.apply(this,arguments)}function A(){A.b2TOIInput.apply(this,arguments)}function D(){D.b2WorldManifold.apply(this,arguments),this.constructor===D&&this.b2WorldManifold.apply(this,arguments)}function B(){B.ClipVertex.apply(this,arguments)}function E(){E.Features.apply(this,arguments)}function k(){k.b2CircleShape.apply(this,arguments),this.constructor===k&&this.b2CircleShape.apply(this,arguments)}function T(){T.b2EdgeChainDef.apply(this,arguments),this.constructor===T&&this.b2EdgeChainDef.apply(this,arguments)}function M(){M.b2EdgeShape.apply(this,arguments),this.constructor===M&&this.b2EdgeShape.apply(this,arguments)}function L(){L.b2MassData.apply(this,arguments)}function I(){I.b2PolygonShape.apply(this,arguments),this.constructor===I&&this.b2PolygonShape.apply(this,arguments)}function j(){j.b2Shape.apply(this,arguments),this.constructor===j&&this.b2Shape.apply(this,arguments)}function P(){P.b2Color.apply(this,arguments),this.constructor===P&&this.b2Color.apply(this,arguments)}function V(){V.b2Settings.apply(this,arguments)}function R(){R.b2Mat22.apply(this,arguments),this.constructor===R&&this.b2Mat22.apply(this,arguments)}function N(){N.b2Mat33.apply(this,arguments),this.constructor===N&&this.b2Mat33.apply(this,arguments)}function O(){O.b2Math.apply(this,arguments)}function F(){F.b2Sweep.apply(this,arguments)}function G(){G.b2Transform.apply(this,arguments),this.constructor===G&&this.b2Transform.apply(this,arguments)}function J(){J.b2Vec2.apply(this,arguments),this.constructor===J&&this.b2Vec2.apply(this,arguments)}function q(){q.b2Vec3.apply(this,arguments),this.constructor===q&&this.b2Vec3.apply(this,arguments)}function H(){H.b2Body.apply(this,arguments),this.constructor===H&&this.b2Body.apply(this,arguments)}function z(){z.b2BodyDef.apply(this,arguments),this.constructor===z&&this.b2BodyDef.apply(this,arguments)}function U(){U.b2ContactFilter.apply(this,arguments)}function $(){$.b2ContactImpulse.apply(this,arguments)}function W(){W.b2ContactListener.apply(this,arguments)}function X(){X.b2ContactManager.apply(this,arguments),this.constructor===X&&this.b2ContactManager.apply(this,arguments)}function Q(){Q.b2DebugDraw.apply(this,arguments),this.constructor===Q&&this.b2DebugDraw.apply(this,arguments)}function K(){K.b2DestructionListener.apply(this,arguments)}function Y(){Y.b2FilterData.apply(this,arguments)}function Z(){Z.b2Fixture.apply(this,arguments),this.constructor===Z&&this.b2Fixture.apply(this,arguments)}function te(){te.b2FixtureDef.apply(this,arguments),this.constructor===te&&this.b2FixtureDef.apply(this,arguments)
}function ee(){ee.b2Island.apply(this,arguments),this.constructor===ee&&this.b2Island.apply(this,arguments)}function ne(){ne.b2TimeStep.apply(this,arguments)}function ie(){ie.b2World.apply(this,arguments),this.constructor===ie&&this.b2World.apply(this,arguments)}function oe(){oe.b2CircleContact.apply(this,arguments)}function se(){se.b2Contact.apply(this,arguments),this.constructor===se&&this.b2Contact.apply(this,arguments)}function re(){re.b2ContactConstraint.apply(this,arguments),this.constructor===re&&this.b2ContactConstraint.apply(this,arguments)}function ae(){ae.b2ContactConstraintPoint.apply(this,arguments)}function le(){le.b2ContactEdge.apply(this,arguments)}function ce(){ce.b2ContactFactory.apply(this,arguments),this.constructor===ce&&this.b2ContactFactory.apply(this,arguments)}function ue(){ue.b2ContactRegister.apply(this,arguments)}function he(){he.b2ContactResult.apply(this,arguments)}function pe(){pe.b2ContactSolver.apply(this,arguments),this.constructor===pe&&this.b2ContactSolver.apply(this,arguments)}function me(){me.b2EdgeAndCircleContact.apply(this,arguments)}function fe(){fe.b2NullContact.apply(this,arguments),this.constructor===fe&&this.b2NullContact.apply(this,arguments)}function de(){de.b2PolyAndCircleContact.apply(this,arguments)}function ye(){ye.b2PolyAndEdgeContact.apply(this,arguments)}function _e(){_e.b2PolygonContact.apply(this,arguments)}function ge(){ge.b2PositionSolverManifold.apply(this,arguments),this.constructor===ge&&this.b2PositionSolverManifold.apply(this,arguments)}function xe(){xe.b2BuoyancyController.apply(this,arguments)}function ve(){ve.b2ConstantAccelController.apply(this,arguments)}function be(){be.b2ConstantForceController.apply(this,arguments)}function we(){we.b2Controller.apply(this,arguments)}function Ce(){Ce.b2ControllerEdge.apply(this,arguments)}function Se(){Se.b2GravityController.apply(this,arguments)}function Ae(){Ae.b2TensorDampingController.apply(this,arguments)}function De(){De.b2DistanceJoint.apply(this,arguments),this.constructor===De&&this.b2DistanceJoint.apply(this,arguments)}function Be(){Be.b2DistanceJointDef.apply(this,arguments),this.constructor===Be&&this.b2DistanceJointDef.apply(this,arguments)}function Ee(){Ee.b2FrictionJoint.apply(this,arguments),this.constructor===Ee&&this.b2FrictionJoint.apply(this,arguments)}function ke(){ke.b2FrictionJointDef.apply(this,arguments),this.constructor===ke&&this.b2FrictionJointDef.apply(this,arguments)}function Te(){Te.b2GearJoint.apply(this,arguments),this.constructor===Te&&this.b2GearJoint.apply(this,arguments)}function Me(){Me.b2GearJointDef.apply(this,arguments),this.constructor===Me&&this.b2GearJointDef.apply(this,arguments)}function Le(){Le.b2Jacobian.apply(this,arguments)}function Ie(){Ie.b2Joint.apply(this,arguments),this.constructor===Ie&&this.b2Joint.apply(this,arguments)}function je(){je.b2JointDef.apply(this,arguments),this.constructor===je&&this.b2JointDef.apply(this,arguments)}function Pe(){Pe.b2JointEdge.apply(this,arguments)}function Ve(){Ve.b2LineJoint.apply(this,arguments),this.constructor===Ve&&this.b2LineJoint.apply(this,arguments)}function Re(){Re.b2LineJointDef.apply(this,arguments),this.constructor===Re&&this.b2LineJointDef.apply(this,arguments)}function Ne(){Ne.b2MouseJoint.apply(this,arguments),this.constructor===Ne&&this.b2MouseJoint.apply(this,arguments)}function Oe(){Oe.b2MouseJointDef.apply(this,arguments),this.constructor===Oe&&this.b2MouseJointDef.apply(this,arguments)}function Fe(){Fe.b2PrismaticJoint.apply(this,arguments),this.constructor===Fe&&this.b2PrismaticJoint.apply(this,arguments)}function Ge(){Ge.b2PrismaticJointDef.apply(this,arguments),this.constructor===Ge&&this.b2PrismaticJointDef.apply(this,arguments)}function Je(){Je.b2PulleyJoint.apply(this,arguments),this.constructor===Je&&this.b2PulleyJoint.apply(this,arguments)}function qe(){qe.b2PulleyJointDef.apply(this,arguments),this.constructor===qe&&this.b2PulleyJointDef.apply(this,arguments)}function He(){He.b2RevoluteJoint.apply(this,arguments),this.constructor===He&&this.b2RevoluteJoint.apply(this,arguments)}function ze(){ze.b2RevoluteJointDef.apply(this,arguments),this.constructor===ze&&this.b2RevoluteJointDef.apply(this,arguments)}function Ue(){Ue.b2WeldJoint.apply(this,arguments),this.constructor===Ue&&this.b2WeldJoint.apply(this,arguments)}function $e(){$e.b2WeldJointDef.apply(this,arguments),this.constructor===$e&&this.b2WeldJointDef.apply(this,arguments)}Box2D.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",Box2D.Collision.b2AABB=t,Box2D.Collision.b2Bound=e,Box2D.Collision.b2BoundValues=n,Box2D.Collision.b2Collision=i,Box2D.Collision.b2ContactID=o,Box2D.Collision.b2ContactPoint=s,Box2D.Collision.b2Distance=r,Box2D.Collision.b2DistanceInput=a,Box2D.Collision.b2DistanceOutput=l,Box2D.Collision.b2DistanceProxy=c,Box2D.Collision.b2DynamicTree=u,Box2D.Collision.b2DynamicTreeBroadPhase=h,Box2D.Collision.b2DynamicTreeNode=p,Box2D.Collision.b2DynamicTreePair=m,Box2D.Collision.b2Manifold=f,Box2D.Collision.b2ManifoldPoint=d,Box2D.Collision.b2Point=y,Box2D.Collision.b2RayCastInput=_,Box2D.Collision.b2RayCastOutput=g,Box2D.Collision.b2Segment=x,Box2D.Collision.b2SeparationFunction=v,Box2D.Collision.b2Simplex=b,Box2D.Collision.b2SimplexCache=w,Box2D.Collision.b2SimplexVertex=C,Box2D.Collision.b2TimeOfImpact=S,Box2D.Collision.b2TOIInput=A,Box2D.Collision.b2WorldManifold=D,Box2D.Collision.ClipVertex=B,Box2D.Collision.Features=E,Box2D.Collision.Shapes.b2CircleShape=k,Box2D.Collision.Shapes.b2EdgeChainDef=T,Box2D.Collision.Shapes.b2EdgeShape=M,Box2D.Collision.Shapes.b2MassData=L,Box2D.Collision.Shapes.b2PolygonShape=I,Box2D.Collision.Shapes.b2Shape=j,Box2D.Common.b2internal="Box2D.Common.b2internal",Box2D.Common.b2Color=P,Box2D.Common.b2Settings=V,Box2D.Common.Math.b2Mat22=R,Box2D.Common.Math.b2Mat33=N,Box2D.Common.Math.b2Math=O,Box2D.Common.Math.b2Sweep=F,Box2D.Common.Math.b2Transform=G,Box2D.Common.Math.b2Vec2=J,Box2D.Common.Math.b2Vec3=q,Box2D.Dynamics.b2Body=H,Box2D.Dynamics.b2BodyDef=z,Box2D.Dynamics.b2ContactFilter=U,Box2D.Dynamics.b2ContactImpulse=$,Box2D.Dynamics.b2ContactListener=W,Box2D.Dynamics.b2ContactManager=X,Box2D.Dynamics.b2DebugDraw=Q,Box2D.Dynamics.b2DestructionListener=K,Box2D.Dynamics.b2FilterData=Y,Box2D.Dynamics.b2Fixture=Z,Box2D.Dynamics.b2FixtureDef=te,Box2D.Dynamics.b2Island=ee,Box2D.Dynamics.b2TimeStep=ne,Box2D.Dynamics.b2World=ie,Box2D.Dynamics.Contacts.b2CircleContact=oe,Box2D.Dynamics.Contacts.b2Contact=se,Box2D.Dynamics.Contacts.b2ContactConstraint=re,Box2D.Dynamics.Contacts.b2ContactConstraintPoint=ae,Box2D.Dynamics.Contacts.b2ContactEdge=le,Box2D.Dynamics.Contacts.b2ContactFactory=ce,Box2D.Dynamics.Contacts.b2ContactRegister=ue,Box2D.Dynamics.Contacts.b2ContactResult=he,Box2D.Dynamics.Contacts.b2ContactSolver=pe,Box2D.Dynamics.Contacts.b2EdgeAndCircleContact=me,Box2D.Dynamics.Contacts.b2NullContact=fe,Box2D.Dynamics.Contacts.b2PolyAndCircleContact=de,Box2D.Dynamics.Contacts.b2PolyAndEdgeContact=ye,Box2D.Dynamics.Contacts.b2PolygonContact=_e,Box2D.Dynamics.Contacts.b2PositionSolverManifold=ge,Box2D.Dynamics.Controllers.b2BuoyancyController=xe,Box2D.Dynamics.Controllers.b2ConstantAccelController=ve,Box2D.Dynamics.Controllers.b2ConstantForceController=be,Box2D.Dynamics.Controllers.b2Controller=we,Box2D.Dynamics.Controllers.b2ControllerEdge=Ce,Box2D.Dynamics.Controllers.b2GravityController=Se,Box2D.Dynamics.Controllers.b2TensorDampingController=Ae,Box2D.Dynamics.Joints.b2DistanceJoint=De,Box2D.Dynamics.Joints.b2DistanceJointDef=Be,Box2D.Dynamics.Joints.b2FrictionJoint=Ee,Box2D.Dynamics.Joints.b2FrictionJointDef=ke,Box2D.Dynamics.Joints.b2GearJoint=Te,Box2D.Dynamics.Joints.b2GearJointDef=Me,Box2D.Dynamics.Joints.b2Jacobian=Le,Box2D.Dynamics.Joints.b2Joint=Ie,Box2D.Dynamics.Joints.b2JointDef=je,Box2D.Dynamics.Joints.b2JointEdge=Pe,Box2D.Dynamics.Joints.b2LineJoint=Ve,Box2D.Dynamics.Joints.b2LineJointDef=Re,Box2D.Dynamics.Joints.b2MouseJoint=Ne,Box2D.Dynamics.Joints.b2MouseJointDef=Oe,Box2D.Dynamics.Joints.b2PrismaticJoint=Fe,Box2D.Dynamics.Joints.b2PrismaticJointDef=Ge,Box2D.Dynamics.Joints.b2PulleyJoint=Je,Box2D.Dynamics.Joints.b2PulleyJointDef=qe,Box2D.Dynamics.Joints.b2RevoluteJoint=He,Box2D.Dynamics.Joints.b2RevoluteJointDef=ze,Box2D.Dynamics.Joints.b2WeldJoint=Ue,Box2D.Dynamics.Joints.b2WeldJointDef=$e}(),Box2D.postDefs=[],function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),n=Box2D.Collision.Shapes.b2Shape,i=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),o=(Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),s=Box2D.Common.Math.b2Sweep,r=Box2D.Common.Math.b2Transform,a=Box2D.Common.Math.b2Vec2,l=(Box2D.Common.Math.b2Vec3,Box2D.Collision.b2AABB),c=Box2D.Collision.b2Bound,u=Box2D.Collision.b2BoundValues,h=Box2D.Collision.b2Collision,p=Box2D.Collision.b2ContactID,m=Box2D.Collision.b2ContactPoint,f=Box2D.Collision.b2Distance,d=Box2D.Collision.b2DistanceInput,y=Box2D.Collision.b2DistanceOutput,_=Box2D.Collision.b2DistanceProxy,g=Box2D.Collision.b2DynamicTree,x=Box2D.Collision.b2DynamicTreeBroadPhase,v=Box2D.Collision.b2DynamicTreeNode,b=Box2D.Collision.b2DynamicTreePair,w=Box2D.Collision.b2Manifold,C=Box2D.Collision.b2ManifoldPoint,S=Box2D.Collision.b2Point,A=Box2D.Collision.b2RayCastInput,D=Box2D.Collision.b2RayCastOutput,B=Box2D.Collision.b2Segment,E=Box2D.Collision.b2SeparationFunction,k=Box2D.Collision.b2Simplex,T=Box2D.Collision.b2SimplexCache,M=Box2D.Collision.b2SimplexVertex,L=Box2D.Collision.b2TimeOfImpact,I=Box2D.Collision.b2TOIInput,j=Box2D.Collision.b2WorldManifold,P=Box2D.Collision.ClipVertex,V=Box2D.Collision.Features,R=Box2D.Collision.IBroadPhase;l.b2AABB=function(){this.lowerBound=new a,this.upperBound=new a},l.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,n=t>=0&&e>=0;return n=n&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},l.prototype.GetCenter=function(){return new a((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},l.prototype.GetExtents=function(){return new a((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},l.prototype.Contains=function(t){var e=!0;return e=e&&this.lowerBound.x<=t.lowerBound.x,e=e&&this.lowerBound.y<=t.lowerBound.y,e=e&&t.upperBound.x<=this.upperBound.x,e=e&&t.upperBound.y<=this.upperBound.y},l.prototype.RayCast=function(t,e){var n=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=e.p1.x,s=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(r),c=Math.abs(a),u=t.normal,h=0,p=0,m=0,f=0,d=0;if(Number.MIN_VALUE>l){if(this.lowerBound.x>o||o>this.upperBound.x)return!1}else if(h=1/r,p=(this.lowerBound.x-o)*h,m=(this.upperBound.x-o)*h,d=-1,p>m&&(f=p,p=m,m=f,d=1),p>n&&(u.x=d,u.y=0,n=p),i=Math.min(i,m),n>i)return!1;if(Number.MIN_VALUE>c){if(this.lowerBound.y>s||s>this.upperBound.y)return!1}else if(h=1/a,p=(this.lowerBound.y-s)*h,m=(this.upperBound.y-s)*h,d=-1,p>m&&(f=p,p=m,m=f,d=1),p>n&&(u.y=d,u.x=0,n=p),i=Math.min(i,m),n>i)return!1;return t.fraction=n,!0},l.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,n=t.lowerBound.y-this.upperBound.y,i=this.lowerBound.x-t.upperBound.x,o=this.lowerBound.y-t.upperBound.y;return e>0||n>0?!1:i>0||o>0?!1:!0},l.Combine=function(t,e){var n=new l;return n.Combine(t,e),n},l.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},c.b2Bound=function(){},c.prototype.IsLower=function(){return 0==(1&this.value)},c.prototype.IsUpper=function(){return 1==(1&this.value)},c.prototype.Swap=function(t){var e=this.value,n=this.proxy,i=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=n,t.stabbingCount=i},u.b2BoundValues=function(){},u.prototype.b2BoundValues=function(){this.lowerValues=new Vector_a2j_Number,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new Vector_a2j_Number,this.upperValues[0]=0,this.upperValues[1]=0},h.b2Collision=function(){},h.ClipSegmentToLine=function(t,e,n,i){void 0===i&&(i=0);var o,s=0;o=e[0];var r=o.v;o=e[1];var a=o.v,l=n.x*r.x+n.y*r.y-i,c=n.x*a.x+n.y*a.y-i;if(0>=l&&t[s++].Set(e[0]),0>=c&&t[s++].Set(e[1]),0>l*c){var u=l/(l-c);o=t[s];var h=o.v;h.x=r.x+u*(a.x-r.x),h.y=r.y+u*(a.y-r.y),o=t[s];var p;l>0?(p=e[0],o.id=p.id):(p=e[1],o.id=p.id),++s}return s},h.EdgeSeparation=function(t,e,n,i,o){void 0===n&&(n=0),parseInt(t.m_vertexCount);var s,r,a=t.m_vertices,l=t.m_normals,c=parseInt(i.m_vertexCount),u=i.m_vertices;s=e.R,r=l[n];var h=s.col1.x*r.x+s.col2.x*r.y,p=s.col1.y*r.x+s.col2.y*r.y;s=o.R;for(var m=s.col1.x*h+s.col1.y*p,f=s.col2.x*h+s.col2.y*p,d=0,y=Number.MAX_VALUE,_=0;c>_;++_){r=u[_];var g=r.x*m+r.y*f;y>g&&(y=g,d=_)}r=a[n],s=e.R;var x=e.position.x+(s.col1.x*r.x+s.col2.x*r.y),v=e.position.y+(s.col1.y*r.x+s.col2.y*r.y);r=u[d],s=o.R;var b=o.position.x+(s.col1.x*r.x+s.col2.x*r.y),w=o.position.y+(s.col1.y*r.x+s.col2.y*r.y);b-=x,w-=v;var C=b*h+w*p;return C},h.FindMaxSeparation=function(t,e,n,i,o){var s,r,a=parseInt(e.m_vertexCount),l=e.m_normals;r=o.R,s=i.m_centroid;var c=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),u=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);r=n.R,s=e.m_centroid,c-=n.position.x+(r.col1.x*s.x+r.col2.x*s.y),u-=n.position.y+(r.col1.y*s.x+r.col2.y*s.y);for(var p=c*n.R.col1.x+u*n.R.col1.y,m=c*n.R.col2.x+u*n.R.col2.y,f=0,d=-Number.MAX_VALUE,y=0;a>y;++y){s=l[y];var _=s.x*p+s.y*m;_>d&&(d=_,f=y)}var g=h.EdgeSeparation(e,n,f,i,o),x=parseInt(f-1>=0?f-1:a-1),v=h.EdgeSeparation(e,n,x,i,o),b=parseInt(a>f+1?f+1:0),w=h.EdgeSeparation(e,n,b,i,o),C=0,S=0,A=0;if(v>g&&v>w)A=-1,C=x,S=v;else{if(!(w>g))return t[0]=f,g;A=1,C=b,S=w}for(;;){if(f=-1==A?C-1>=0?C-1:a-1:a>C+1?C+1:0,g=h.EdgeSeparation(e,n,f,i,o),!(g>S))break;C=f,S=g}return t[0]=C,S},h.FindIncidentEdge=function(t,e,n,i,o,s){void 0===i&&(i=0),parseInt(e.m_vertexCount);var r,a,l=e.m_normals,c=parseInt(o.m_vertexCount),u=o.m_vertices,h=o.m_normals;r=n.R,a=l[i];var p=r.col1.x*a.x+r.col2.x*a.y,m=r.col1.y*a.x+r.col2.y*a.y;r=s.R;var f=r.col1.x*p+r.col1.y*m;m=r.col2.x*p+r.col2.y*m,p=f;for(var d=0,y=Number.MAX_VALUE,_=0;c>_;++_){a=h[_];var g=p*a.x+m*a.y;y>g&&(y=g,d=_)}var x,v=parseInt(d),b=parseInt(c>v+1?v+1:0);x=t[0],a=u[v],r=s.R,x.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),x.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),x.id.features.referenceEdge=i,x.id.features.incidentEdge=v,x.id.features.incidentVertex=0,x=t[1],a=u[b],r=s.R,x.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),x.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),x.id.features.referenceEdge=i,x.id.features.incidentEdge=b,x.id.features.incidentVertex=1},h.MakeClipPointVector=function(){var t=new Vector(2);return t[0]=new P,t[1]=new P,t},h.CollidePolygons=function(t,e,n,o,s){var r;t.m_pointCount=0;var a=e.m_radius+o.m_radius,l=0;h.s_edgeAO[0]=l;var c=h.FindMaxSeparation(h.s_edgeAO,e,n,o,s);if(l=h.s_edgeAO[0],!(c>a)){var u=0;h.s_edgeBO[0]=u;var p=h.FindMaxSeparation(h.s_edgeBO,o,s,e,n);if(u=h.s_edgeBO[0],!(p>a)){var m,f,d,y,_,g=0,x=0,v=.98,b=.001;p>v*c+b?(m=o,f=e,d=s,y=n,g=u,t.m_type=w.e_faceB,x=1):(m=e,f=o,d=n,y=s,g=l,t.m_type=w.e_faceA,x=0);var C=h.s_incidentEdge;h.FindIncidentEdge(C,m,d,g,f,y);var S,A=parseInt(m.m_vertexCount),D=m.m_vertices,B=D[g];S=A>g+1?D[parseInt(g+1)]:D[0];var E=h.s_localTangent;E.Set(S.x-B.x,S.y-B.y),E.Normalize();var k=h.s_localNormal;k.x=E.y,k.y=-E.x;var T=h.s_planePoint;T.Set(.5*(B.x+S.x),.5*(B.y+S.y));var M=h.s_tangent;_=d.R,M.x=_.col1.x*E.x+_.col2.x*E.y,M.y=_.col1.y*E.x+_.col2.y*E.y;var L=h.s_tangent2;L.x=-M.x,L.y=-M.y;var I=h.s_normal;I.x=M.y,I.y=-M.x;var j=h.s_v11,P=h.s_v12;j.x=d.position.x+(_.col1.x*B.x+_.col2.x*B.y),j.y=d.position.y+(_.col1.y*B.x+_.col2.y*B.y),P.x=d.position.x+(_.col1.x*S.x+_.col2.x*S.y),P.y=d.position.y+(_.col1.y*S.x+_.col2.y*S.y);var V=I.x*j.x+I.y*j.y,R=-M.x*j.x-M.y*j.y+a,N=M.x*P.x+M.y*P.y+a,O=h.s_clipPoints1,F=h.s_clipPoints2,G=0;if(G=h.ClipSegmentToLine(O,C,L,R),!(2>G||(G=h.ClipSegmentToLine(F,O,M,N),2>G))){t.m_localPlaneNormal.SetV(k),t.m_localPoint.SetV(T);for(var J=0,q=0;i.b2_maxManifoldPoints>q;++q){r=F[q];var H=I.x*r.v.x+I.y*r.v.y-V;if(a>=H){var z=t.m_points[J];_=y.R;var U=r.v.x-y.position.x,$=r.v.y-y.position.y;z.m_localPoint.x=U*_.col1.x+$*_.col1.y,z.m_localPoint.y=U*_.col2.x+$*_.col2.y,z.m_id.Set(r.id),z.m_id.features.flip=x,++J}}t.m_pointCount=J}}}},h.CollideCircles=function(t,e,n,i,o){t.m_pointCount=0;var s,r;s=n.R,r=e.m_p;var a=n.position.x+(s.col1.x*r.x+s.col2.x*r.y),l=n.position.y+(s.col1.y*r.x+s.col2.y*r.y);s=o.R,r=i.m_p;var c=o.position.x+(s.col1.x*r.x+s.col2.x*r.y),u=o.position.y+(s.col1.y*r.x+s.col2.y*r.y),h=c-a,p=u-l,m=h*h+p*p,f=e.m_radius+i.m_radius;m>f*f||(t.m_type=w.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0)},h.CollidePolygonAndCircle=function(t,e,n,i,o){t.m_pointCount=0;var s,r,a=0,l=0;r=o.R,s=i.m_p;var c=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),u=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);a=c-n.position.x,l=u-n.position.y,r=n.R;for(var h=a*r.col1.x+l*r.col1.y,p=a*r.col2.x+l*r.col2.y,m=0,f=-Number.MAX_VALUE,d=e.m_radius+i.m_radius,y=parseInt(e.m_vertexCount),_=e.m_vertices,g=e.m_normals,x=0;y>x;++x){s=_[x],a=h-s.x,l=p-s.y,s=g[x];var v=s.x*a+s.y*l;if(v>d)return;v>f&&(f=v,m=x)}var b=parseInt(m),C=parseInt(y>b+1?b+1:0),S=_[b],A=_[C];if(Number.MIN_VALUE>f)return t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.SetV(g[m]),t.m_localPoint.x=.5*(S.x+A.x),t.m_localPoint.y=.5*(S.y+A.y),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0,void 0;var D=(h-S.x)*(A.x-S.x)+(p-S.y)*(A.y-S.y),B=(h-A.x)*(S.x-A.x)+(p-A.y)*(S.y-A.y);if(0>=D){if((h-S.x)*(h-S.x)+(p-S.y)*(p-S.y)>d*d)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=h-S.x,t.m_localPlaneNormal.y=p-S.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(S),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else if(0>=B){if((h-A.x)*(h-A.x)+(p-A.y)*(p-A.y)>d*d)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=h-A.x,t.m_localPlaneNormal.y=p-A.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(A),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else{var E=.5*(S.x+A.x),k=.5*(S.y+A.y);if(f=(h-E)*g[b].x+(p-k)*g[b].y,f>d)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=g[b].x,t.m_localPlaneNormal.y=g[b].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(E,k),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}},h.TestOverlap=function(t,e){var n=e.lowerBound,i=t.upperBound,o=n.x-i.x,s=n.y-i.y;n=t.lowerBound,i=e.upperBound;var r=n.x-i.x,a=n.y-i.y;return o>0||s>0?!1:r>0||a>0?!1:!0},Box2D.postDefs.push(function(){Box2D.Collision.b2Collision.s_incidentEdge=h.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints1=h.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints2=h.MakeClipPointVector(),Box2D.Collision.b2Collision.s_edgeAO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_edgeBO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_localTangent=new a,Box2D.Collision.b2Collision.s_localNormal=new a,Box2D.Collision.b2Collision.s_planePoint=new a,Box2D.Collision.b2Collision.s_normal=new a,Box2D.Collision.b2Collision.s_tangent=new a,Box2D.Collision.b2Collision.s_tangent2=new a,Box2D.Collision.b2Collision.s_v11=new a,Box2D.Collision.b2Collision.s_v12=new a,Box2D.Collision.b2Collision.b2CollidePolyTempVec=new a,Box2D.Collision.b2Collision.b2_nullFeature=255}),p.b2ContactID=function(){this.features=new V},p.prototype.b2ContactID=function(){this.features._m_id=this},p.prototype.Set=function(t){this.key=t._key},p.prototype.Copy=function(){var t=new p;return t.key=this.key,t},Object.defineProperty(p.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(p.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=255&(65280&this._key)>>8,this.features._incidentVertex=255&(16711680&this._key)>>16,this.features._flip=255&(4278190080&this._key)>>24}}),m.b2ContactPoint=function(){this.position=new a,this.velocity=new a,this.normal=new a,this.id=new p},f.b2Distance=function(){},f.Distance=function(t,e,n){++f.b2_gjkCalls;var s=n.proxyA,r=n.proxyB,l=n.transformA,c=n.transformB,u=f.s_simplex;u.ReadCache(e,s,l,r,c);for(var h,p=u.m_vertices,m=20,d=f.s_saveA,y=f.s_saveB,_=0,g=u.GetClosestPoint(),x=g.LengthSquared(),v=x,b=0,w=0;m>w;){for(_=u.m_count,b=0;_>b;b++)d[b]=p[b].indexA,y[b]=p[b].indexB;switch(u.m_count){case 1:break;case 2:u.Solve2();break;case 3:u.Solve3();break;default:i.b2Assert(!1)}if(3==u.m_count)break;h=u.GetClosestPoint(),v=h.LengthSquared(),x=v;var C=u.GetSearchDirection();if(C.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var S=p[u.m_count];S.indexA=s.GetSupport(o.MulTMV(l.R,C.GetNegative())),S.wA=o.MulX(l,s.GetVertex(S.indexA)),S.indexB=r.GetSupport(o.MulTMV(c.R,C)),S.wB=o.MulX(c,r.GetVertex(S.indexB)),S.w=o.SubtractVV(S.wB,S.wA),++w,++f.b2_gjkIters;var A=!1;for(b=0;_>b;b++)if(S.indexA==d[b]&&S.indexB==y[b]){A=!0;break}if(A)break;++u.m_count}if(f.b2_gjkMaxIters=o.Max(f.b2_gjkMaxIters,w),u.GetWitnessPoints(t.pointA,t.pointB),t.distance=o.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=w,u.WriteCache(e),n.useRadii){var D=s.m_radius,B=r.m_radius;if(t.distance>D+B&&t.distance>Number.MIN_VALUE){t.distance-=D+B;var E=o.SubtractVV(t.pointB,t.pointA);E.Normalize(),t.pointA.x+=D*E.x,t.pointA.y+=D*E.y,t.pointB.x-=B*E.x,t.pointB.y-=B*E.y}else h=new a,h.x=.5*(t.pointA.x+t.pointB.x),h.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=h.x,t.pointA.y=t.pointB.y=h.y,t.distance=0}},Box2D.postDefs.push(function(){Box2D.Collision.b2Distance.s_simplex=new k,Box2D.Collision.b2Distance.s_saveA=new Vector_a2j_Number(3),Box2D.Collision.b2Distance.s_saveB=new Vector_a2j_Number(3)}),d.b2DistanceInput=function(){},y.b2DistanceOutput=function(){this.pointA=new a,this.pointB=new a},_.b2DistanceProxy=function(){},_.prototype.Set=function(o){switch(o.GetType()){case n.e_circleShape:var s=o instanceof t?o:null;this.m_vertices=new Vector(1,!0),this.m_vertices[0]=s.m_p,this.m_count=1,this.m_radius=s.m_radius;break;case n.e_polygonShape:var r=o instanceof e?o:null;this.m_vertices=r.m_vertices,this.m_count=r.m_vertexCount,this.m_radius=r.m_radius;break;default:i.b2Assert(!1)}},_.prototype.GetSupport=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;this.m_count>i;++i){var o=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;o>n&&(e=i,n=o)}return e},_.prototype.GetSupportVertex=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;this.m_count>i;++i){var o=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;o>n&&(e=i,n=o)}return this.m_vertices[e]},_.prototype.GetVertexCount=function(){return this.m_count},_.prototype.GetVertex=function(t){return void 0===t&&(t=0),i.b2Assert(t>=0&&this.m_count>t),this.m_vertices[t]},g.b2DynamicTree=function(){},g.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},g.prototype.CreateProxy=function(t,e){var n=this.AllocateNode(),o=i.b2_aabbExtension,s=i.b2_aabbExtension;return n.aabb.lowerBound.x=t.lowerBound.x-o,n.aabb.lowerBound.y=t.lowerBound.y-s,n.aabb.upperBound.x=t.upperBound.x+o,n.aabb.upperBound.y=t.upperBound.y+s,n.userData=e,this.InsertLeaf(n),n},g.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},g.prototype.MoveProxy=function(t,e,n){if(i.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var o=i.b2_aabbExtension+i.b2_aabbMultiplier*(n.x>0?n.x:-n.x),s=i.b2_aabbExtension+i.b2_aabbMultiplier*(n.y>0?n.y:-n.y);return t.aabb.lowerBound.x=e.lowerBound.x-o,t.aabb.lowerBound.y=e.lowerBound.y-s,t.aabb.upperBound.x=e.upperBound.x+o,t.aabb.upperBound.y=e.upperBound.y+s,this.InsertLeaf(t),!0},g.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;t>e;e++){for(var n=this.m_root,i=0;0==n.IsLeaf();)n=1&this.m_path>>i?n.child2:n.child1,i=31&i+1;++this.m_path,this.RemoveLeaf(n),this.InsertLeaf(n)}},g.prototype.GetFatAABB=function(t){return t.aabb},g.prototype.GetUserData=function(t){return t.userData},g.prototype.Query=function(t,e){if(null!=this.m_root){var n=new Vector,i=0;for(n[i++]=this.m_root;i>0;){var o=n[--i];if(o.aabb.TestOverlap(e))if(o.IsLeaf()){var s=t(o);if(!s)return}else n[i++]=o.child1,n[i++]=o.child2}}},g.prototype.RayCast=function(t,e){if(null!=this.m_root){var n=e.p1,i=e.p2,s=o.SubtractVV(n,i);s.Normalize();var r=o.CrossFV(1,s),a=o.AbsV(r),c=e.maxFraction,u=new l,h=0,p=0;h=n.x+c*(i.x-n.x),p=n.y+c*(i.y-n.y),u.lowerBound.x=Math.min(n.x,h),u.lowerBound.y=Math.min(n.y,p),u.upperBound.x=Math.max(n.x,h),u.upperBound.y=Math.max(n.y,p);var m=new Vector,f=0;for(m[f++]=this.m_root;f>0;){var d=m[--f];if(0!=d.aabb.TestOverlap(u)){var y=d.aabb.GetCenter(),_=d.aabb.GetExtents(),g=Math.abs(r.x*(n.x-y.x)+r.y*(n.y-y.y))-a.x*_.x-a.y*_.y;if(!(g>0))if(d.IsLeaf()){var x=new A;if(x.p1=e.p1,x.p2=e.p2,x.maxFraction=e.maxFraction,c=t(x,d),0==c)return;c>0&&(h=n.x+c*(i.x-n.x),p=n.y+c*(i.y-n.y),u.lowerBound.x=Math.min(n.x,h),u.lowerBound.y=Math.min(n.y,p),u.upperBound.x=Math.max(n.x,h),u.upperBound.y=Math.max(n.y,p))}else m[f++]=d.child1,m[f++]=d.child2}}}},g.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new v},g.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},g.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,this.m_root.parent=null,void 0;var e=t.aabb.GetCenter(),n=this.m_root;if(0==n.IsLeaf())do{var i=n.child1,o=n.child2,s=Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-e.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-e.y),r=Math.abs((o.aabb.lowerBound.x+o.aabb.upperBound.x)/2-e.x)+Math.abs((o.aabb.lowerBound.y+o.aabb.upperBound.y)/2-e.y);n=r>s?i:o}while(0==n.IsLeaf());var a=n.parent,l=this.AllocateNode();if(l.parent=a,l.userData=null,l.aabb.Combine(t.aabb,n.aabb),a){n.parent.child1==n?a.child1=l:a.child2=l,l.child1=n,l.child2=t,n.parent=l,t.parent=l;do{if(a.aabb.Contains(l.aabb))break;a.aabb.Combine(a.child1.aabb,a.child2.aabb),l=a,a=a.parent}while(a)}else l.child1=n,l.child2=t,n.parent=l,t.parent=l,this.m_root=l},g.prototype.RemoveLeaf=function(t){if(t==this.m_root)return this.m_root=null,void 0;var e,n=t.parent,i=n.parent;if(e=n.child1==t?n.child2:n.child1,i)for(i.child1==n?i.child1=e:i.child2=e,e.parent=i,this.FreeNode(n);i;){var o=i.aabb;if(i.aabb=l.Combine(i.child1.aabb,i.child2.aabb),o.Contains(i.aabb))break;i=i.parent}else this.m_root=e,e.parent=null,this.FreeNode(n)},x.b2DynamicTreeBroadPhase=function(){this.m_tree=new g,this.m_moveBuffer=new Vector,this.m_pairBuffer=new Vector,this.m_pairCount=0},x.prototype.CreateProxy=function(t,e){var n=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(n),n},x.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},x.prototype.MoveProxy=function(t,e,n){var i=this.m_tree.MoveProxy(t,e,n);i&&this.BufferMove(t)},x.prototype.TestOverlap=function(t,e){var n=this.m_tree.GetFatAABB(t),i=this.m_tree.GetFatAABB(e);return n.TestOverlap(i)},x.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},x.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},x.prototype.GetProxyCount=function(){return this.m_proxyCount},x.prototype.UpdatePairs=function(t){function e(t){if(t==i)return!0;n.m_pairCount==n.m_pairBuffer.length&&(n.m_pairBuffer[n.m_pairCount]=new b);var e=n.m_pairBuffer[n.m_pairCount];return e.proxyA=i>t?t:i,e.proxyB=t>=i?t:i,++n.m_pairCount,!0}var n=this;n.m_pairCount=0;var i,o=0;for(o=0;n.m_moveBuffer.length>o;++o){i=n.m_moveBuffer[o];var s=n.m_tree.GetFatAABB(i);n.m_tree.Query(e,s)}n.m_moveBuffer.length=0;for(var o=0;n.m_pairCount>o;){var r=n.m_pairBuffer[o],a=n.m_tree.GetUserData(r.proxyA),l=n.m_tree.GetUserData(r.proxyB);for(t(a,l),++o;n.m_pairCount>o;){var c=n.m_pairBuffer[o];if(c.proxyA!=r.proxyA||c.proxyB!=r.proxyB)break;++o}}},x.prototype.Query=function(t,e){this.m_tree.Query(t,e)},x.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},x.prototype.Validate=function(){},x.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},x.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},x.prototype.UnBufferMove=function(t){var e=parseInt(this.m_moveBuffer.indexOf(t));this.m_moveBuffer.splice(e,1)},x.prototype.ComparePairs=function(){return 0},x.__implements={},x.__implements[R]=!0,v.b2DynamicTreeNode=function(){this.aabb=new l},v.prototype.IsLeaf=function(){return null==this.child1},b.b2DynamicTreePair=function(){},w.b2Manifold=function(){this.m_pointCount=0},w.prototype.b2Manifold=function(){this.m_points=new Vector(i.b2_maxManifoldPoints);for(var t=0;i.b2_maxManifoldPoints>t;t++)this.m_points[t]=new C;this.m_localPlaneNormal=new a,this.m_localPoint=new a},w.prototype.Reset=function(){for(var t=0;i.b2_maxManifoldPoints>t;t++)(this.m_points[t]instanceof C?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},w.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;i.b2_maxManifoldPoints>e;e++)(this.m_points[e]instanceof C?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},w.prototype.Copy=function(){var t=new w;return t.Set(this),t},Box2D.postDefs.push(function(){Box2D.Collision.b2Manifold.e_circles=1,Box2D.Collision.b2Manifold.e_faceA=2,Box2D.Collision.b2Manifold.e_faceB=4}),C.b2ManifoldPoint=function(){this.m_localPoint=new a,this.m_id=new p},C.prototype.b2ManifoldPoint=function(){this.Reset()},C.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},C.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},S.b2Point=function(){this.p=new a},S.prototype.Support=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.p},S.prototype.GetFirstVertex=function(){return this.p},A.b2RayCastInput=function(){this.p1=new a,this.p2=new a},A.prototype.b2RayCastInput=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=n},D.b2RayCastOutput=function(){this.normal=new a},B.b2Segment=function(){this.p1=new a,this.p2=new a},B.prototype.TestSegment=function(t,e,n,i){void 0===i&&(i=0);var o=n.p1,s=n.p2.x-o.x,r=n.p2.y-o.y,a=this.p2.x-this.p1.x,l=this.p2.y-this.p1.y,c=l,u=-a,h=100*Number.MIN_VALUE,p=-(s*c+r*u);if(p>h){var m=o.x-this.p1.x,f=o.y-this.p1.y,d=m*c+f*u;if(d>=0&&i*p>=d){var y=-s*f+r*m;if(y>=-h*p&&p*(1+h)>=y){d/=p;var _=Math.sqrt(c*c+u*u);return c/=_,u/=_,t[0]=d,e.Set(c,u),!0}}}return!1},B.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},B.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,i=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:0>e?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,n>0?(t.upperBound.y-this.p1.y)/n:0>n?(t.lowerBound.y-this.p1.y)/n:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+e*i,this.p2.y=this.p1.y+n*i},B.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,n=-this.p2.y+this.p1.y,i=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:0>e?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,n>0?(t.upperBound.y-this.p2.y)/n:0>n?(t.lowerBound.y-this.p2.y)/n:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+e*i,this.p1.y=this.p2.y+n*i
},E.b2SeparationFunction=function(){this.m_localPoint=new a,this.m_axis=new a},E.prototype.Initialize=function(t,e,n,s,r){this.m_proxyA=e,this.m_proxyB=s;var l=parseInt(t.count);i.b2Assert(l>0&&3>l);var c,u,h,p,m,f,d,y,_=0,g=0,x=0,v=0,b=0,w=0,C=0,S=0;if(1==l)this.m_type=E.e_points,c=this.m_proxyA.GetVertex(t.indexA[0]),p=this.m_proxyB.GetVertex(t.indexB[0]),y=c,d=n.R,_=n.position.x+(d.col1.x*y.x+d.col2.x*y.y),g=n.position.y+(d.col1.y*y.x+d.col2.y*y.y),y=p,d=r.R,x=r.position.x+(d.col1.x*y.x+d.col2.x*y.y),v=r.position.y+(d.col1.y*y.x+d.col2.y*y.y),this.m_axis.x=x-_,this.m_axis.y=v-g,this.m_axis.Normalize();else if(t.indexB[0]==t.indexB[1])this.m_type=E.e_faceA,u=this.m_proxyA.GetVertex(t.indexA[0]),h=this.m_proxyA.GetVertex(t.indexA[1]),p=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(u.x+h.x),this.m_localPoint.y=.5*(u.y+h.y),this.m_axis=o.CrossVF(o.SubtractVV(h,u),1),this.m_axis.Normalize(),y=this.m_axis,d=n.R,b=d.col1.x*y.x+d.col2.x*y.y,w=d.col1.y*y.x+d.col2.y*y.y,y=this.m_localPoint,d=n.R,_=n.position.x+(d.col1.x*y.x+d.col2.x*y.y),g=n.position.y+(d.col1.y*y.x+d.col2.y*y.y),y=p,d=r.R,x=r.position.x+(d.col1.x*y.x+d.col2.x*y.y),v=r.position.y+(d.col1.y*y.x+d.col2.y*y.y),C=(x-_)*b+(v-g)*w,0>C&&this.m_axis.NegativeSelf();else if(t.indexA[0]==t.indexA[0])this.m_type=E.e_faceB,m=this.m_proxyB.GetVertex(t.indexB[0]),f=this.m_proxyB.GetVertex(t.indexB[1]),c=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(m.x+f.x),this.m_localPoint.y=.5*(m.y+f.y),this.m_axis=o.CrossVF(o.SubtractVV(f,m),1),this.m_axis.Normalize(),y=this.m_axis,d=r.R,b=d.col1.x*y.x+d.col2.x*y.y,w=d.col1.y*y.x+d.col2.y*y.y,y=this.m_localPoint,d=r.R,x=r.position.x+(d.col1.x*y.x+d.col2.x*y.y),v=r.position.y+(d.col1.y*y.x+d.col2.y*y.y),y=c,d=n.R,_=n.position.x+(d.col1.x*y.x+d.col2.x*y.y),g=n.position.y+(d.col1.y*y.x+d.col2.y*y.y),C=(_-x)*b+(g-v)*w,0>C&&this.m_axis.NegativeSelf();else{u=this.m_proxyA.GetVertex(t.indexA[0]),h=this.m_proxyA.GetVertex(t.indexA[1]),m=this.m_proxyB.GetVertex(t.indexB[0]),f=this.m_proxyB.GetVertex(t.indexB[1]),o.MulX(n,c);var A=o.MulMV(n.R,o.SubtractVV(h,u));o.MulX(r,p);var D=o.MulMV(r.R,o.SubtractVV(f,m)),B=A.x*A.x+A.y*A.y,k=D.x*D.x+D.y*D.y,T=o.SubtractVV(D,A),M=A.x*T.x+A.y*T.y,L=D.x*T.x+D.y*T.y,I=A.x*D.x+A.y*D.y,j=B*k-I*I;C=0,0!=j&&(C=o.Clamp((I*L-M*k)/j,0,1));var P=(I*C+L)/k;0>P&&(P=0,C=o.Clamp((I-M)/B,0,1)),c=new a,c.x=u.x+C*(h.x-u.x),c.y=u.y+C*(h.y-u.y),p=new a,p.x=m.x+C*(f.x-m.x),p.y=m.y+C*(f.y-m.y),0==C||1==C?(this.m_type=E.e_faceB,this.m_axis=o.CrossVF(o.SubtractVV(f,m),1),this.m_axis.Normalize(),this.m_localPoint=p,y=this.m_axis,d=r.R,b=d.col1.x*y.x+d.col2.x*y.y,w=d.col1.y*y.x+d.col2.y*y.y,y=this.m_localPoint,d=r.R,x=r.position.x+(d.col1.x*y.x+d.col2.x*y.y),v=r.position.y+(d.col1.y*y.x+d.col2.y*y.y),y=c,d=n.R,_=n.position.x+(d.col1.x*y.x+d.col2.x*y.y),g=n.position.y+(d.col1.y*y.x+d.col2.y*y.y),S=(_-x)*b+(g-v)*w,0>C&&this.m_axis.NegativeSelf()):(this.m_type=E.e_faceA,this.m_axis=o.CrossVF(o.SubtractVV(h,u),1),this.m_localPoint=c,y=this.m_axis,d=n.R,b=d.col1.x*y.x+d.col2.x*y.y,w=d.col1.y*y.x+d.col2.y*y.y,y=this.m_localPoint,d=n.R,_=n.position.x+(d.col1.x*y.x+d.col2.x*y.y),g=n.position.y+(d.col1.y*y.x+d.col2.y*y.y),y=p,d=r.R,x=r.position.x+(d.col1.x*y.x+d.col2.x*y.y),v=r.position.y+(d.col1.y*y.x+d.col2.y*y.y),S=(x-_)*b+(v-g)*w,0>C&&this.m_axis.NegativeSelf())}},E.prototype.Evaluate=function(t,e){var n,s,r,a,l,c,u,h=0;switch(this.m_type){case E.e_points:return n=o.MulTMV(t.R,this.m_axis),s=o.MulTMV(e.R,this.m_axis.GetNegative()),r=this.m_proxyA.GetSupportVertex(n),a=this.m_proxyB.GetSupportVertex(s),l=o.MulX(t,r),c=o.MulX(e,a),h=(c.x-l.x)*this.m_axis.x+(c.y-l.y)*this.m_axis.y;case E.e_faceA:return u=o.MulMV(t.R,this.m_axis),l=o.MulX(t,this.m_localPoint),s=o.MulTMV(e.R,u.GetNegative()),a=this.m_proxyB.GetSupportVertex(s),c=o.MulX(e,a),h=(c.x-l.x)*u.x+(c.y-l.y)*u.y;case E.e_faceB:return u=o.MulMV(e.R,this.m_axis),c=o.MulX(e,this.m_localPoint),n=o.MulTMV(t.R,u.GetNegative()),r=this.m_proxyA.GetSupportVertex(n),l=o.MulX(t,r),h=(l.x-c.x)*u.x+(l.y-c.y)*u.y;default:return i.b2Assert(!1),0}},Box2D.postDefs.push(function(){Box2D.Collision.b2SeparationFunction.e_points=1,Box2D.Collision.b2SeparationFunction.e_faceA=2,Box2D.Collision.b2SeparationFunction.e_faceB=4}),k.b2Simplex=function(){this.m_v1=new M,this.m_v2=new M,this.m_v3=new M,this.m_vertices=new Vector(3)},k.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},k.prototype.ReadCache=function(t,e,n,s,r){i.b2Assert(t.count>=0&&3>=t.count);var a,l;this.m_count=t.count;for(var c=this.m_vertices,u=0;this.m_count>u;u++){var h=c[u];h.indexA=t.indexA[u],h.indexB=t.indexB[u],a=e.GetVertex(h.indexA),l=s.GetVertex(h.indexB),h.wA=o.MulX(n,a),h.wB=o.MulX(r,l),h.w=o.SubtractVV(h.wB,h.wA),h.a=0}if(this.m_count>1){var p=t.metric,m=this.GetMetric();(.5*p>m||m>2*p||Number.MIN_VALUE>m)&&(this.m_count=0)}0==this.m_count&&(h=c[0],h.indexA=0,h.indexB=0,a=e.GetVertex(0),l=s.GetVertex(0),h.wA=o.MulX(n,a),h.wB=o.MulX(r,l),h.w=o.SubtractVV(h.wB,h.wA),this.m_count=1)},k.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=Box2D.parseUInt(this.m_count);for(var e=this.m_vertices,n=0;this.m_count>n;n++)t.indexA[n]=Box2D.parseUInt(e[n].indexA),t.indexB[n]=Box2D.parseUInt(e[n].indexB)},k.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=o.SubtractVV(this.m_v2.w,this.m_v1.w),e=o.CrossVV(t,this.m_v1.w.GetNegative());return e>0?o.CrossFV(1,t):o.CrossVF(t,1);default:return i.b2Assert(!1),new a}},k.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return i.b2Assert(!1),new a;case 1:return this.m_v1.w;case 2:return new a(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return i.b2Assert(!1),new a}},k.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:i.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:i.b2Assert(!1)}},k.prototype.GetMetric=function(){switch(this.m_count){case 0:return i.b2Assert(!1),0;case 1:return 0;case 2:return o.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return o.CrossVV(o.SubtractVV(this.m_v2.w,this.m_v1.w),o.SubtractVV(this.m_v3.w,this.m_v1.w));default:return i.b2Assert(!1),0}},k.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,n=o.SubtractVV(e,t),i=-(t.x*n.x+t.y*n.y);if(0>=i)return this.m_v1.a=1,this.m_count=1,void 0;var s=e.x*n.x+e.y*n.y;if(0>=s)return this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2),void 0;var r=1/(s+i);this.m_v1.a=s*r,this.m_v2.a=i*r,this.m_count=2},k.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,n=this.m_v3.w,i=o.SubtractVV(e,t),s=o.Dot(t,i),r=o.Dot(e,i),a=r,l=-s,c=o.SubtractVV(n,t),u=o.Dot(t,c),h=o.Dot(n,c),p=h,m=-u,f=o.SubtractVV(n,e),d=o.Dot(e,f),y=o.Dot(n,f),_=y,g=-d,x=o.CrossVV(i,c),v=x*o.CrossVV(e,n),b=x*o.CrossVV(n,t),w=x*o.CrossVV(t,e);if(0>=l&&0>=m)return this.m_v1.a=1,this.m_count=1,void 0;if(a>0&&l>0&&0>=w){var C=1/(a+l);return this.m_v1.a=a*C,this.m_v2.a=l*C,this.m_count=2,void 0}if(p>0&&m>0&&0>=b){var S=1/(p+m);return this.m_v1.a=p*S,this.m_v3.a=m*S,this.m_count=2,this.m_v2.Set(this.m_v3),void 0}if(0>=a&&0>=g)return this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2),void 0;if(0>=p&&0>=_)return this.m_v3.a=1,this.m_count=1,this.m_v1.Set(this.m_v3),void 0;if(_>0&&g>0&&0>=v){var A=1/(_+g);return this.m_v2.a=_*A,this.m_v3.a=g*A,this.m_count=2,this.m_v1.Set(this.m_v3),void 0}var D=1/(v+b+w);this.m_v1.a=v*D,this.m_v2.a=b*D,this.m_v3.a=w*D,this.m_count=3},T.b2SimplexCache=function(){this.indexA=new Vector_a2j_Number(3),this.indexB=new Vector_a2j_Number(3)},M.b2SimplexVertex=function(){},M.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},L.b2TimeOfImpact=function(){},L.TimeOfImpact=function(t){++L.b2_toiCalls;var e=t.proxyA,n=t.proxyB,s=t.sweepA,r=t.sweepB;i.b2Assert(s.t0==r.t0),i.b2Assert(1-s.t0>Number.MIN_VALUE);var a=e.m_radius+n.m_radius,l=t.tolerance,c=0,u=1e3,h=0,p=0;for(L.s_cache.count=0,L.s_distanceInput.useRadii=!1;;){if(s.GetTransform(L.s_xfA,c),r.GetTransform(L.s_xfB,c),L.s_distanceInput.proxyA=e,L.s_distanceInput.proxyB=n,L.s_distanceInput.transformA=L.s_xfA,L.s_distanceInput.transformB=L.s_xfB,f.Distance(L.s_distanceOutput,L.s_cache,L.s_distanceInput),0>=L.s_distanceOutput.distance){c=1;break}L.s_fcn.Initialize(L.s_cache,e,L.s_xfA,n,L.s_xfB);var m=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(0>=m){c=1;break}if(0==h&&(p=m>a?o.Max(a-l,.75*a):o.Max(m-l,.02*a)),.5*l>m-p){if(0==h){c=1;break}break}var d=c,y=c,_=1,g=m;s.GetTransform(L.s_xfA,_),r.GetTransform(L.s_xfB,_);var x=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(x>=p){c=1;break}for(var v=0;;){var b=0;b=1&v?y+(p-g)*(_-y)/(x-g):.5*(y+_),s.GetTransform(L.s_xfA,b),r.GetTransform(L.s_xfB,b);var w=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(.025*l>o.Abs(w-p)){d=b;break}if(w>p?(y=b,g=w):(_=b,x=w),++v,++L.b2_toiRootIters,50==v)break}if(L.b2_toiMaxRootIters=o.Max(L.b2_toiMaxRootIters,v),(1+100*Number.MIN_VALUE)*c>d)break;if(c=d,h++,++L.b2_toiIters,h==u)break}return L.b2_toiMaxIters=o.Max(L.b2_toiMaxIters,h),c},Box2D.postDefs.push(function(){Box2D.Collision.b2TimeOfImpact.b2_toiCalls=0,Box2D.Collision.b2TimeOfImpact.b2_toiIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiRootIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,Box2D.Collision.b2TimeOfImpact.s_cache=new T,Box2D.Collision.b2TimeOfImpact.s_distanceInput=new d,Box2D.Collision.b2TimeOfImpact.s_xfA=new r,Box2D.Collision.b2TimeOfImpact.s_xfB=new r,Box2D.Collision.b2TimeOfImpact.s_fcn=new E,Box2D.Collision.b2TimeOfImpact.s_distanceOutput=new y}),I.b2TOIInput=function(){this.proxyA=new _,this.proxyB=new _,this.sweepA=new s,this.sweepB=new s},j.b2WorldManifold=function(){this.m_normal=new a},j.prototype.b2WorldManifold=function(){this.m_points=new Vector(i.b2_maxManifoldPoints);for(var t=0;i.b2_maxManifoldPoints>t;t++)this.m_points[t]=new a},j.prototype.Initialize=function(t,e,n,i,o){if(void 0===n&&(n=0),void 0===o&&(o=0),0!=t.m_pointCount){var s,r,a=0,l=0,c=0,u=0,h=0,p=0,m=0;switch(t.m_type){case w.e_circles:r=e.R,s=t.m_localPoint;var f=e.position.x+r.col1.x*s.x+r.col2.x*s.y,d=e.position.y+r.col1.y*s.x+r.col2.y*s.y;r=i.R,s=t.m_points[0].m_localPoint;var y=i.position.x+r.col1.x*s.x+r.col2.x*s.y,_=i.position.y+r.col1.y*s.x+r.col2.y*s.y,g=y-f,x=_-d,v=g*g+x*x;if(v>Number.MIN_VALUE*Number.MIN_VALUE){var b=Math.sqrt(v);this.m_normal.x=g/b,this.m_normal.y=x/b}else this.m_normal.x=1,this.m_normal.y=0;var C=f+n*this.m_normal.x,S=d+n*this.m_normal.y,A=y-o*this.m_normal.x,D=_-o*this.m_normal.y;this.m_points[0].x=.5*(C+A),this.m_points[0].y=.5*(S+D);break;case w.e_faceA:for(r=e.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_localPoint,u=e.position.x+r.col1.x*s.x+r.col2.x*s.y,h=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=l,this.m_normal.y=c,a=0;t.m_pointCount>a;a++)r=i.R,s=t.m_points[a].m_localPoint,p=i.position.x+r.col1.x*s.x+r.col2.x*s.y,m=i.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=p+.5*(n-(p-u)*l-(m-h)*c-o)*l,this.m_points[a].y=m+.5*(n-(p-u)*l-(m-h)*c-o)*c;break;case w.e_faceB:for(r=i.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=i.R,s=t.m_localPoint,u=i.position.x+r.col1.x*s.x+r.col2.x*s.y,h=i.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=-l,this.m_normal.y=-c,a=0;t.m_pointCount>a;a++)r=e.R,s=t.m_points[a].m_localPoint,p=e.position.x+r.col1.x*s.x+r.col2.x*s.y,m=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=p+.5*(o-(p-u)*l-(m-h)*c-n)*l,this.m_points[a].y=m+.5*(o-(p-u)*l-(m-h)*c-n)*c}}},P.ClipVertex=function(){this.v=new a,this.id=new p},P.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},V.Features=function(){},Object.defineProperty(V.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(V.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(V.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(V.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|65280&this._incidentEdge<<8}}),Object.defineProperty(V.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(V.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|16711680&this._incidentVertex<<16}}),Object.defineProperty(V.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(V.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|4278190080&this._flip<<24}})}(),function(){var t=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),e=Box2D.Collision.Shapes.b2CircleShape,n=Box2D.Collision.Shapes.b2EdgeChainDef,i=Box2D.Collision.Shapes.b2EdgeShape,o=Box2D.Collision.Shapes.b2MassData,s=Box2D.Collision.Shapes.b2PolygonShape,r=Box2D.Collision.Shapes.b2Shape,a=Box2D.Common.Math.b2Mat22,l=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),c=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform),u=Box2D.Common.Math.b2Vec2,h=(Box2D.Common.Math.b2Vec3,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.Collision.b2AABB,Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision,Box2D.Collision.b2ContactID,Box2D.Collision.b2ContactPoint,Box2D.Collision.b2Distance),p=Box2D.Collision.b2DistanceInput,m=Box2D.Collision.b2DistanceOutput,f=Box2D.Collision.b2DistanceProxy,d=(Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase,Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold,Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput,Box2D.Collision.b2RayCastOutput,Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache);Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact,Box2D.Collision.b2TOIInput,Box2D.Collision.b2WorldManifold,Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.inherit(e,Box2D.Collision.Shapes.b2Shape),e.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new u},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){if(this.__super.Set.call(this,t),Box2D.is(t,e)){var n=t instanceof e?t:null;this.m_p.SetV(n.m_p)}},e.prototype.TestPoint=function(t,e){var n=t.R,i=t.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),o=t.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);return i=e.x-i,o=e.y-o,this.m_radius*this.m_radius>=i*i+o*o},e.prototype.RayCast=function(t,e,n){var i=n.R,o=n.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),s=n.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),r=e.p1.x-o,a=e.p1.y-s,l=r*r+a*a-this.m_radius*this.m_radius,c=e.p2.x-e.p1.x,u=e.p2.y-e.p1.y,h=r*c+a*u,p=c*c+u*u,m=h*h-p*l;if(0>m||Number.MIN_VALUE>p)return!1;var f=-(h+Math.sqrt(m));return f>=0&&e.maxFraction*p>=f?(f/=p,t.fraction=f,t.normal.x=r+f*c,t.normal.y=a+f*u,t.normal.Normalize(),!0):!1},e.prototype.ComputeAABB=function(t,e){var n=e.R,i=e.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),o=e.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);t.lowerBound.Set(i-this.m_radius,o-this.m_radius),t.upperBound.Set(i+this.m_radius,o+this.m_radius)},e.prototype.ComputeMass=function(e,n){void 0===n&&(n=0),e.mass=n*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,n,i){void 0===e&&(e=0);var o=l.MulX(n,this.m_p),s=-(l.Dot(t,o)-e);if(-this.m_radius+Number.MIN_VALUE>s)return 0;if(s>this.m_radius)return i.SetV(o),Math.PI*this.m_radius*this.m_radius;var r=this.m_radius*this.m_radius,a=s*s,c=r*(Math.asin(s/this.m_radius)+Math.PI/2)+s*Math.sqrt(r-a),u=-2/3*Math.pow(r-a,1.5)/c;return i.x=o.x+t.x*u,i.y=o.y+t.y*u,c},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=r.e_circleShape,this.m_radius=t},n.b2EdgeChainDef=function(){},n.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},Box2D.inherit(i,Box2D.Collision.Shapes.b2Shape),i.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,i.b2EdgeShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new u,this.m_v1=new u,this.m_v2=new u,this.m_coreV1=new u,this.m_coreV2=new u,this.m_normal=new u,this.m_direction=new u,this.m_cornerDir1=new u,this.m_cornerDir2=new u},i.prototype.TestPoint=function(){return!1},i.prototype.RayCast=function(t,e,n){var i,o=e.p2.x-e.p1.x,s=e.p2.y-e.p1.y;i=n.R;var r=n.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),a=n.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),l=n.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y)-a,c=-(n.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y)-r),u=100*Number.MIN_VALUE,h=-(o*l+s*c);if(h>u){var p=e.p1.x-r,m=e.p1.y-a,f=p*l+m*c;if(f>=0&&e.maxFraction*h>=f){var d=-o*m+s*p;if(d>=-u*h&&h*(1+u)>=d){f/=h,t.fraction=f;var y=Math.sqrt(l*l+c*c);return t.normal.x=l/y,t.normal.y=c/y,!0}}}return!1},i.prototype.ComputeAABB=function(t,e){var n=e.R,i=e.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),o=e.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),s=e.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y),r=e.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y);s>i?(t.lowerBound.x=i,t.upperBound.x=s):(t.lowerBound.x=s,t.upperBound.x=i),r>o?(t.lowerBound.y=o,t.upperBound.y=r):(t.lowerBound.y=r,t.upperBound.y=o)},i.prototype.ComputeMass=function(t,e){void 0===e&&(e=0),t.mass=0,t.center.SetV(this.m_v1),t.I=0},i.prototype.ComputeSubmergedArea=function(t,e,n,i){void 0===e&&(e=0);var o=new u(t.x*e,t.y*e),s=l.MulX(n,this.m_v1),r=l.MulX(n,this.m_v2),a=l.Dot(t,s)-e,c=l.Dot(t,r)-e;if(a>0){if(c>0)return 0;s.x=-c/(a-c)*s.x+a/(a-c)*r.x,s.y=-c/(a-c)*s.y+a/(a-c)*r.y}else c>0&&(r.x=-c/(a-c)*s.x+a/(a-c)*r.x,r.y=-c/(a-c)*s.y+a/(a-c)*r.y);return i.x=(o.x+s.x+r.x)/3,i.y=(o.y+s.y+r.y)/3,.5*((s.x-o.x)*(r.y-o.y)-(s.y-o.y)*(r.x-o.x))},i.prototype.GetLength=function(){return this.m_length},i.prototype.GetVertex1=function(){return this.m_v1},i.prototype.GetVertex2=function(){return this.m_v2},i.prototype.GetCoreVertex1=function(){return this.m_coreV1},i.prototype.GetCoreVertex2=function(){return this.m_coreV2},i.prototype.GetNormalVector=function(){return this.m_normal},i.prototype.GetDirectionVector=function(){return this.m_direction},i.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},i.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},i.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},i.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},i.prototype.GetFirstVertex=function(t){var e=t.R;return new u(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},i.prototype.GetNextEdge=function(){return this.m_nextEdge},i.prototype.GetPrevEdge=function(){return this.m_prevEdge},i.prototype.Support=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=t.R,o=t.position.x+(i.col1.x*this.m_coreV1.x+i.col2.x*this.m_coreV1.y),s=t.position.y+(i.col1.y*this.m_coreV1.x+i.col2.y*this.m_coreV1.y),r=t.position.x+(i.col1.x*this.m_coreV2.x+i.col2.x*this.m_coreV2.y),a=t.position.y+(i.col1.y*this.m_coreV2.x+i.col2.y*this.m_coreV2.y);return o*e+s*n>r*e+a*n?(this.s_supportVec.x=o,this.s_supportVec.y=s):(this.s_supportVec.x=r,this.s_supportVec.y=a),this.s_supportVec},i.prototype.b2EdgeShape=function(e,n){this.__super.b2Shape.call(this),this.m_type=r.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=n,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},i.prototype.SetPrevEdge=function(t,e,n,i){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=n,this.m_cornerConvex1=i},i.prototype.SetNextEdge=function(t,e,n,i){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=n,this.m_cornerConvex2=i},o.b2MassData=function(){this.mass=0,this.center=new u(0,0),this.I=0},Box2D.inherit(s,Box2D.Collision.Shapes.b2Shape),s.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,s.b2PolygonShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},s.prototype.Copy=function(){var t=new s;return t.Set(this),t},s.prototype.Set=function(t){if(this.__super.Set.call(this,t),Box2D.is(t,s)){var e=t instanceof s?t:null;this.m_centroid.SetV(e.m_centroid),this.m_vertexCount=e.m_vertexCount,this.Reserve(this.m_vertexCount);for(var n=0;this.m_vertexCount>n;n++)this.m_vertices[n].SetV(e.m_vertices[n]),this.m_normals[n].SetV(e.m_normals[n])}},s.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var n,i=new Vector,o=0;for(o=0;t.length>o;++o)n=t[o],i.push(n);this.SetAsVector(i,e)},s.AsArray=function(t,e){void 0===e&&(e=0);var n=new s;return n.SetAsArray(t,e),n},s.prototype.SetAsVector=function(e,n){void 0===n&&(n=0),0==n&&(n=e.length),t.b2Assert(n>=2),this.m_vertexCount=n,this.Reserve(n);var i=0;for(i=0;this.m_vertexCount>i;i++)this.m_vertices[i].SetV(e[i]);for(i=0;this.m_vertexCount>i;++i){var o=parseInt(i),r=parseInt(this.m_vertexCount>i+1?i+1:0),a=l.SubtractVV(this.m_vertices[r],this.m_vertices[o]);t.b2Assert(a.LengthSquared()>Number.MIN_VALUE),this.m_normals[i].SetV(l.CrossVF(a,1)),this.m_normals[i].Normalize()}this.m_centroid=s.ComputeCentroid(this.m_vertices,this.m_vertexCount)},s.AsVector=function(t,e){void 0===e&&(e=0);var n=new s;return n.SetAsVector(t,e),n},s.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},s.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=new s;return n.SetAsBox(t,e),n},s.prototype.SetAsOrientedBox=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=n;var o=new c;o.position=n,o.R.Set(i);for(var s=0;this.m_vertexCount>s;++s)this.m_vertices[s]=l.MulX(o,this.m_vertices[s]),this.m_normals[s]=l.MulMV(o.R,this.m_normals[s])},s.AsOrientedBox=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=0);var o=new s;return o.SetAsOrientedBox(t,e,n,i),o},s.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=l.CrossVF(l.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},s.AsEdge=function(t,e){var n=new s;return n.SetAsEdge(t,e),n},s.prototype.TestPoint=function(t,e){for(var n,i=t.R,o=e.x-t.position.x,s=e.y-t.position.y,r=o*i.col1.x+s*i.col1.y,a=o*i.col2.x+s*i.col2.y,l=0;this.m_vertexCount>l;++l){n=this.m_vertices[l],o=r-n.x,s=a-n.y,n=this.m_normals[l];var c=n.x*o+n.y*s;if(c>0)return!1}return!0},s.prototype.RayCast=function(t,e,n){var i,o,s=0,r=e.maxFraction,a=0,l=0;a=e.p1.x-n.position.x,l=e.p1.y-n.position.y,i=n.R;var c=a*i.col1.x+l*i.col1.y,u=a*i.col2.x+l*i.col2.y;a=e.p2.x-n.position.x,l=e.p2.y-n.position.y,i=n.R;for(var h=a*i.col1.x+l*i.col1.y,p=a*i.col2.x+l*i.col2.y,m=h-c,f=p-u,d=parseInt(-1),y=0;this.m_vertexCount>y;++y){o=this.m_vertices[y],a=o.x-c,l=o.y-u,o=this.m_normals[y];var _=o.x*a+o.y*l,g=o.x*m+o.y*f;if(0==g){if(0>_)return!1}else 0>g&&s*g>_?(s=_/g,d=y):g>0&&r*g>_&&(r=_/g);if(s-Number.MIN_VALUE>r)return!1}return d>=0?(t.fraction=s,i=n.R,o=this.m_normals[d],t.normal.x=i.col1.x*o.x+i.col2.x*o.y,t.normal.y=i.col1.y*o.x+i.col2.y*o.y,!0):!1},s.prototype.ComputeAABB=function(t,e){for(var n=e.R,i=this.m_vertices[0],o=e.position.x+(n.col1.x*i.x+n.col2.x*i.y),s=e.position.y+(n.col1.y*i.x+n.col2.y*i.y),r=o,a=s,l=1;this.m_vertexCount>l;++l){i=this.m_vertices[l];var c=e.position.x+(n.col1.x*i.x+n.col2.x*i.y),u=e.position.y+(n.col1.y*i.x+n.col2.y*i.y);o=c>o?o:c,s=u>s?s:u,r=r>c?r:c,a=a>u?a:u}t.lowerBound.x=o-this.m_radius,t.lowerBound.y=s-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},s.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0,void 0;for(var n=0,i=0,o=0,s=0,r=0,a=0,l=1/3,c=0;this.m_vertexCount>c;++c){var u=this.m_vertices[c],h=this.m_vertexCount>c+1?this.m_vertices[parseInt(c+1)]:this.m_vertices[0],p=u.x-r,m=u.y-a,f=h.x-r,d=h.y-a,y=p*d-m*f,_=.5*y;o+=_,n+=_*l*(r+u.x+h.x),i+=_*l*(a+u.y+h.y);var g=r,x=a,v=p,b=m,w=f,C=d,S=l*(.25*(v*v+w*v+w*w)+(g*v+g*w))+.5*g*g,A=l*(.25*(b*b+C*b+C*C)+(x*b+x*C))+.5*x*x;s+=y*(S+A)}t.mass=e*o,n*=1/o,i*=1/o,t.center.Set(n,i),t.I=e*s},s.prototype.ComputeSubmergedArea=function(t,e,n,i){void 0===e&&(e=0);var s=l.MulTMV(n.R,t),r=e-l.Dot(t,n.position),a=new Vector_a2j_Number,c=0,h=parseInt(-1),p=parseInt(-1),m=!1,f=0;for(f=0;this.m_vertexCount>f;++f){a[f]=l.Dot(s,this.m_vertices[f])-r;var d=a[f]<-Number.MIN_VALUE;f>0&&(d?m||(h=f-1,c++):m&&(p=f-1,c++)),m=d}switch(c){case 0:if(m){var y=new o;return this.ComputeMass(y,1),i.SetV(l.MulX(n,y.center)),y.mass}return 0;case 1:-1==h?h=this.m_vertexCount-1:p=this.m_vertexCount-1}var _,g=parseInt((h+1)%this.m_vertexCount),x=parseInt((p+1)%this.m_vertexCount),v=(0-a[h])/(a[g]-a[h]),b=(0-a[p])/(a[x]-a[p]),w=new u(this.m_vertices[h].x*(1-v)+this.m_vertices[g].x*v,this.m_vertices[h].y*(1-v)+this.m_vertices[g].y*v),C=new u(this.m_vertices[p].x*(1-b)+this.m_vertices[x].x*b,this.m_vertices[p].y*(1-b)+this.m_vertices[x].y*b),S=0,A=new u,D=this.m_vertices[g];for(f=g;f!=x;){f=(f+1)%this.m_vertexCount,_=f==x?C:this.m_vertices[f];var B=.5*((D.x-w.x)*(_.y-w.y)-(D.y-w.y)*(_.x-w.x));S+=B,A.x+=B*(w.x+D.x+_.x)/3,A.y+=B*(w.y+D.y+_.y)/3,D=_}return A.Multiply(1/S),i.SetV(l.MulX(n,A)),S},s.prototype.GetVertexCount=function(){return this.m_vertexCount},s.prototype.GetVertices=function(){return this.m_vertices},s.prototype.GetNormals=function(){return this.m_normals},s.prototype.GetSupport=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;this.m_vertexCount>i;++i){var o=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;o>n&&(e=i,n=o)}return e},s.prototype.GetSupportVertex=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;this.m_vertexCount>i;++i){var o=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;o>n&&(e=i,n=o)}return this.m_vertices[e]},s.prototype.Validate=function(){return!1},s.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=r.e_polygonShape,this.m_centroid=new u,this.m_vertices=new Vector,this.m_normals=new Vector},s.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);t>e;e++)this.m_vertices[e]=new u,this.m_normals[e]=new u},s.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var n=new u,i=0,o=0,s=0,r=1/3,a=0;e>a;++a){var l=t[a],c=e>a+1?t[parseInt(a+1)]:t[0],h=l.x-o,p=l.y-s,m=c.x-o,f=c.y-s,d=h*f-p*m,y=.5*d;i+=y,n.x+=y*r*(o+l.x+c.x),n.y+=y*r*(s+l.y+c.y)}return n.x*=1/i,n.y*=1/i,n},s.ComputeOBB=function(t,e,n){void 0===n&&(n=0);var i=0,o=new Vector(n+1);for(i=0;n>i;++i)o[i]=e[i];o[n]=o[0];var s=Number.MAX_VALUE;for(i=1;n>=i;++i){var r=o[parseInt(i-1)],a=o[i].x-r.x,l=o[i].y-r.y,c=Math.sqrt(a*a+l*l);a/=c,l/=c;for(var u=-l,h=a,p=Number.MAX_VALUE,m=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=-Number.MAX_VALUE,y=0;n>y;++y){var _=o[y].x-r.x,g=o[y].y-r.y,x=a*_+l*g,v=u*_+h*g;p>x&&(p=x),m>v&&(m=v),x>f&&(f=x),v>d&&(d=v)}var b=(f-p)*(d-m);if(.95*s>b){s=b,t.R.col1.x=a,t.R.col1.y=l,t.R.col2.x=u,t.R.col2.y=h;var w=.5*(p+f),C=.5*(m+d),S=t.R;t.center.x=r.x+(S.col1.x*w+S.col2.x*C),t.center.y=r.y+(S.col1.y*w+S.col2.y*C),t.extents.x=.5*(f-p),t.extents.y=.5*(d-m)}}},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2PolygonShape.s_mat=new a}),r.b2Shape=function(){},r.prototype.Copy=function(){return null},r.prototype.Set=function(t){this.m_radius=t.m_radius},r.prototype.GetType=function(){return this.m_type},r.prototype.TestPoint=function(){return!1},r.prototype.RayCast=function(){return!1},r.prototype.ComputeAABB=function(){},r.prototype.ComputeMass=function(t,e){void 0===e&&(e=0)},r.prototype.ComputeSubmergedArea=function(t,e){return void 0===e&&(e=0),0},r.TestOverlap=function(t,e,n,i){var o=new p;o.proxyA=new f,o.proxyA.Set(t),o.proxyB=new f,o.proxyB.Set(n),o.transformA=e,o.transformB=i,o.useRadii=!0;var s=new d;s.count=0;var r=new m;return h.Distance(r,s,o),r.distance<10*Number.MIN_VALUE},r.prototype.b2Shape=function(){this.m_type=r.e_unknownShape,this.m_radius=t.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),Box2D.Collision.Shapes.b2Shape.e_circleShape=0,Box2D.Collision.Shapes.b2Shape.e_polygonShape=1,Box2D.Collision.Shapes.b2Shape.e_edgeShape=2,Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount=3,Box2D.Collision.Shapes.b2Shape.e_hitCollide=1,Box2D.Collision.Shapes.b2Shape.e_missCollide=0,Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=Box2D.Common.b2Color,e=(Box2D.Common.b2internal,Box2D.Common.b2Settings),n=(Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math);Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2,Box2D.Common.Math.b2Vec3,t.b2Color=function(){this._r=0,this._g=0,this._b=0
},t.prototype.b2Color=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._r=Box2D.parseUInt(255*n.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*n.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*n.Clamp(i,0,1))},t.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._r=Box2D.parseUInt(255*n.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*n.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*n.Clamp(i,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=Box2D.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=Box2D.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=Box2D.parseUInt(255*n.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},Box2D.postDefs.push(function(){Box2D.Common.b2Settings.VERSION="2.1alpha",Box2D.Common.b2Settings.USHRT_MAX=65535,Box2D.Common.b2Settings.b2_pi=Math.PI,Box2D.Common.b2Settings.b2_maxManifoldPoints=2,Box2D.Common.b2Settings.b2_aabbExtension=.1,Box2D.Common.b2Settings.b2_aabbMultiplier=2,Box2D.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,Box2D.Common.b2Settings.b2_linearSlop=.005,Box2D.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,Box2D.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland=32,Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland=32,Box2D.Common.b2Settings.b2_velocityThreshold=1,Box2D.Common.b2Settings.b2_maxLinearCorrection=.2,Box2D.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,Box2D.Common.b2Settings.b2_maxTranslation=20,Box2D.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,Box2D.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,Box2D.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,Box2D.Common.b2Settings.b2_contactBaumgarte=.2,Box2D.Common.b2Settings.b2_timeToSleep=.5,Box2D.Common.b2Settings.b2_linearSleepTolerance=.01,Box2D.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=(Box2D.Collision.b2AABB,Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings,Box2D.Common.Math.b2Mat22),e=Box2D.Common.Math.b2Mat33,n=Box2D.Common.Math.b2Math,i=Box2D.Common.Math.b2Sweep,o=Box2D.Common.Math.b2Transform,s=Box2D.Common.Math.b2Vec2,r=Box2D.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new s,this.col2=new s},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var n=new t;return n.Set(e),n},t.FromVV=function(e,n){var i=new t;return i.SetVV(e,n),i},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t),n=Math.sin(t);this.col1.x=e,this.col2.x=-n,this.col1.y=n,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,n=this.col2.x,i=this.col1.y,o=this.col2.y,s=e*o-n*i;return 0!=s&&(s=1/s),t.col1.x=s*o,t.col2.x=-s*n,t.col1.y=-s*i,t.col2.y=s*e,t},t.prototype.Solve=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=i*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*n),t.y=a*(i*n-s*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new r,this.col2=new r,this.col3=new r},e.prototype.b2Mat33=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),t||e||n?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(n)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,n){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(n)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=i*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*n),t.y=a*(i*n-s*e),t},e.prototype.Solve33=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0);var o=this.col1.x,s=this.col1.y,r=this.col1.z,a=this.col2.x,l=this.col2.y,c=this.col2.z,u=this.col3.x,h=this.col3.y,p=this.col3.z,m=o*(l*p-c*h)+s*(c*u-a*p)+r*(a*h-l*u);return 0!=m&&(m=1/m),t.x=m*(e*(l*p-c*h)+n*(c*u-a*p)+i*(a*h-l*u)),t.y=m*(o*(n*p-i*h)+s*(i*u-e*p)+r*(e*h-n*u)),t.z=m*(o*(l*i-c*n)+s*(c*e-a*i)+r*(a*n-l*e)),t},n.b2Math=function(){},n.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},n.Dot=function(t,e){return t.x*e.x+t.y*e.y},n.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},n.CrossVF=function(t,e){void 0===e&&(e=0);var n=new s(e*t.y,-e*t.x);return n},n.CrossFV=function(t,e){void 0===t&&(t=0);var n=new s(-t*e.y,t*e.x);return n},n.MulMV=function(t,e){var n=new s(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return n},n.MulTMV=function(t,e){var i=new s(n.Dot(e,t.col1),n.Dot(e,t.col2));return i},n.MulX=function(t,e){var i=n.MulMV(t.R,e);return i.x+=t.position.x,i.y+=t.position.y,i},n.MulXT=function(t,e){var i=n.SubtractVV(e,t.position),o=i.x*t.R.col1.x+i.y*t.R.col1.y;return i.y=i.x*t.R.col2.x+i.y*t.R.col2.y,i.x=o,i},n.AddVV=function(t,e){var n=new s(t.x+e.x,t.y+e.y);return n},n.SubtractVV=function(t,e){var n=new s(t.x-e.x,t.y-e.y);return n},n.Distance=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},n.DistanceSquared=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},n.MulFV=function(t,e){void 0===t&&(t=0);var n=new s(t*e.x,t*e.y);return n},n.AddMM=function(e,i){var o=t.FromVV(n.AddVV(e.col1,i.col1),n.AddVV(e.col2,i.col2));return o},n.MulMM=function(e,i){var o=t.FromVV(n.MulMV(e,i.col1),n.MulMV(e,i.col2));return o},n.MulTMM=function(e,i){var o=new s(n.Dot(e.col1,i.col1),n.Dot(e.col2,i.col1)),r=new s(n.Dot(e.col1,i.col2),n.Dot(e.col2,i.col2)),a=t.FromVV(o,r);return a},n.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},n.AbsV=function(t){var e=new s(n.Abs(t.x),n.Abs(t.y));return e},n.AbsM=function(e){var i=t.FromVV(n.AbsV(e.col1),n.AbsV(e.col2));return i},n.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),e>t?t:e},n.MinV=function(t,e){var i=new s(n.Min(t.x,e.x),n.Min(t.y,e.y));return i},n.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},n.MaxV=function(t,e){var i=new s(n.Max(t.x,e.x),n.Max(t.y,e.y));return i},n.Clamp=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),e>t?e:t>n?n:t},n.ClampV=function(t,e,i){return n.MaxV(e,n.MinV(t,i))},n.Swap=function(t,e){var n=t[0];t[0]=e[0],e[0]=n},n.Random=function(){return 2*Math.random()-1},n.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=Math.random();return n=(e-t)*n+t},n.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=2147483647&t>>1,t|=1073741823&t>>2,t|=268435455&t>>4,t|=16777215&t>>8,t|=65535&t>>16,t+1},n.IsPowerOfTwo=function(t){void 0===t&&(t=0);var e=t>0&&0==(t&t-1);return e},Box2D.postDefs.push(function(){Box2D.Common.Math.b2Math.b2Vec2_zero=new s(0,0),Box2D.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new s(1,0),new s(0,1)),Box2D.Common.Math.b2Math.b2Transform_identity=new o(n.b2Vec2_zero,n.b2Mat22_identity)}),i.b2Sweep=function(){this.localCenter=new s,this.c0=new s,this.c=new s},i.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},i.prototype.Copy=function(){var t=new i;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},i.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var n=(1-e)*this.a0+e*this.a;t.R.Set(n);var i=t.R;t.position.x-=i.col1.x*this.localCenter.x+i.col2.x*this.localCenter.y,t.position.y-=i.col1.y*this.localCenter.x+i.col2.y*this.localCenter.y},i.prototype.Advance=function(t){if(void 0===t&&(t=0),t>this.t0&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},o.b2Transform=function(){this.position=new s,this.R=new t},o.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},o.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},o.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},o.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},o.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},s.b2Vec2=function(){},s.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetZero=function(){this.x=0,this.y=0},s.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetV=function(t){this.x=t.x,this.y=t.y},s.prototype.GetNegative=function(){return new s(-this.x,-this.y)},s.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},s.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new s(t,e)},s.prototype.Copy=function(){return new s(this.x,this.y)},s.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},s.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},s.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},s.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},s.prototype.MulTM=function(t){var e=n.Dot(this,t.col1);this.y=n.Dot(this,t.col2),this.x=e},s.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},s.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},s.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},s.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},s.prototype.Abs=function(){0>this.x&&(this.x=-this.x),0>this.y&&(this.y=-this.y)},s.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},s.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(Number.MIN_VALUE>t)return 0;var e=1/t;return this.x*=e,this.y*=e,t},s.prototype.IsValid=function(){return n.IsValid(this.x)&&n.IsValid(this.y)},r.b2Vec3=function(){},r.prototype.b2Vec3=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n},r.prototype.SetZero=function(){this.x=this.y=this.z=0},r.prototype.Set=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},r.prototype.GetNegative=function(){return new r(-this.x,-this.y,-this.z)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},r.prototype.Copy=function(){return new r(this.x,this.y,this.z)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=(Box2D.Dynamics.Controllers.b2ControllerEdge,Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),e=Box2D.Common.Math.b2Sweep,n=Box2D.Common.Math.b2Transform,i=Box2D.Common.Math.b2Vec2,o=(Box2D.Common.Math.b2Vec3,Box2D.Common.b2Color),s=(Box2D.Common.b2internal,Box2D.Common.b2Settings),r=Box2D.Collision.b2AABB,a=(Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision,Box2D.Collision.b2ContactID,Box2D.Collision.b2ContactPoint),l=(Box2D.Collision.b2Distance,Box2D.Collision.b2DistanceInput,Box2D.Collision.b2DistanceOutput,Box2D.Collision.b2DistanceProxy,Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase),c=(Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold,Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput),u=Box2D.Collision.b2RayCastOutput,h=(Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache,Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact,Box2D.Collision.b2TOIInput,Box2D.Collision.b2WorldManifold,Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.Collision.Shapes.b2CircleShape),p=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape),m=Box2D.Collision.Shapes.b2MassData,f=Box2D.Collision.Shapes.b2PolygonShape,d=Box2D.Collision.Shapes.b2Shape,y=Box2D.Dynamics.b2Body,_=Box2D.Dynamics.b2BodyDef,g=Box2D.Dynamics.b2ContactFilter,x=Box2D.Dynamics.b2ContactImpulse,v=Box2D.Dynamics.b2ContactListener,b=Box2D.Dynamics.b2ContactManager,w=Box2D.Dynamics.b2DebugDraw,C=Box2D.Dynamics.b2DestructionListener,S=Box2D.Dynamics.b2FilterData,A=Box2D.Dynamics.b2Fixture,D=Box2D.Dynamics.b2FixtureDef,B=Box2D.Dynamics.b2Island,E=Box2D.Dynamics.b2TimeStep,k=Box2D.Dynamics.b2World,T=(Box2D.Dynamics.Contacts.b2CircleContact,Box2D.Dynamics.Contacts.b2Contact),M=(Box2D.Dynamics.Contacts.b2ContactConstraint,Box2D.Dynamics.Contacts.b2ContactConstraintPoint,Box2D.Dynamics.Contacts.b2ContactEdge,Box2D.Dynamics.Contacts.b2ContactFactory),L=(Box2D.Dynamics.Contacts.b2ContactRegister,Box2D.Dynamics.Contacts.b2ContactResult,Box2D.Dynamics.Contacts.b2ContactSolver),I=(Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,Box2D.Dynamics.Contacts.b2NullContact,Box2D.Dynamics.Contacts.b2PolyAndCircleContact,Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,Box2D.Dynamics.Contacts.b2PolygonContact,Box2D.Dynamics.Contacts.b2PositionSolverManifold,Box2D.Dynamics.Controllers.b2Controller,Box2D.Dynamics.Joints.b2DistanceJoint,Box2D.Dynamics.Joints.b2DistanceJointDef,Box2D.Dynamics.Joints.b2FrictionJoint,Box2D.Dynamics.Joints.b2FrictionJointDef,Box2D.Dynamics.Joints.b2GearJoint,Box2D.Dynamics.Joints.b2GearJointDef,Box2D.Dynamics.Joints.b2Jacobian,Box2D.Dynamics.Joints.b2Joint),j=(Box2D.Dynamics.Joints.b2JointDef,Box2D.Dynamics.Joints.b2JointEdge,Box2D.Dynamics.Joints.b2LineJoint,Box2D.Dynamics.Joints.b2LineJointDef,Box2D.Dynamics.Joints.b2MouseJoint,Box2D.Dynamics.Joints.b2MouseJointDef,Box2D.Dynamics.Joints.b2PrismaticJoint,Box2D.Dynamics.Joints.b2PrismaticJointDef,Box2D.Dynamics.Joints.b2PulleyJoint);Box2D.Dynamics.Joints.b2PulleyJointDef,Box2D.Dynamics.Joints.b2RevoluteJoint,Box2D.Dynamics.Joints.b2RevoluteJointDef,Box2D.Dynamics.Joints.b2WeldJoint,Box2D.Dynamics.Joints.b2WeldJointDef,y.b2Body=function(){this.m_xf=new n,this.m_sweep=new e,this.m_linearVelocity=new i,this.m_force=new i},y.prototype.connectEdges=function(e,n,i){void 0===i&&(i=0);var o=Math.atan2(n.GetDirectionVector().y,n.GetDirectionVector().x),r=Math.tan(.5*(o-i)),a=t.MulFV(r,n.GetDirectionVector());a=t.SubtractVV(a,n.GetNormalVector()),a=t.MulFV(s.b2_toiSlop,a),a=t.AddVV(a,n.GetVertex1());var l=t.AddVV(e.GetDirectionVector(),n.GetDirectionVector());l.Normalize();var c=t.Dot(e.GetDirectionVector(),n.GetNormalVector())>0;return e.SetNextEdge(n,a,l,c),n.SetPrevEdge(e,a,l,c),o},y.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),null;var e=new A;if(e.Create(this,this.m_xf,t),this.m_flags&y.e_activeFlag){var n=this.m_world.m_contactManager.m_broadPhase;e.CreateProxy(n,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=k.e_newFixture,e},y.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var n=new D;return n.shape=t,n.density=e,this.CreateFixture(n)},y.prototype.DestroyFixture=function(t){if(1==this.m_world.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),void 0;for(var e=this.m_fixtureList,n=null,i=!1;null!=e;){if(e==t){n?n.m_next=t.m_next:this.m_fixtureList=t.m_next,i=!0;break}n=e,e=e.m_next}for(var o=this.m_contactList;o;){var s=o.contact;o=o.next;var r=s.GetFixtureA(),a=s.GetFixtureB();(t==r||t==a)&&this.m_world.m_contactManager.Destroy(s)}if(this.m_flags&y.e_activeFlag){var l=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxy(l)}t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()},y.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var n;if(1==this.m_world.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),void 0;this.m_xf.R.Set(e),this.m_xf.position.SetV(t);var i=this.m_xf.R,o=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*o.x+i.col2.x*o.y,this.m_sweep.c.y=i.col1.y*o.x+i.col2.y*o.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var s=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},y.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},y.prototype.GetTransform=function(){return this.m_xf},y.prototype.GetPosition=function(){return this.m_xf.position},y.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},y.prototype.GetAngle=function(){return this.m_sweep.a},y.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},y.prototype.GetWorldCenter=function(){return this.m_sweep.c},y.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},y.prototype.SetLinearVelocity=function(t){this.m_type!=y.b2_staticBody&&this.m_linearVelocity.SetV(t)},y.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},y.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=y.b2_staticBody&&(this.m_angularVelocity=t)},y.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},y.prototype.GetDefinition=function(){var t=new _;return t.type=this.GetType(),t.allowSleep=(this.m_flags&y.e_allowSleepFlag)==y.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&y.e_fixedRotationFlag)==y.e_fixedRotationFlag,t.bullet=(this.m_flags&y.e_bulletFlag)==y.e_bulletFlag,t.awake=(this.m_flags&y.e_awakeFlag)==y.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},y.prototype.ApplyForce=function(t,e){this.m_type==y.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},y.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==y.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},y.prototype.ApplyImpulse=function(t,e){this.m_type==y.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},y.prototype.Split=function(e){for(var n,i=this.GetLinearVelocity().Copy(),o=this.GetAngularVelocity(),s=this.GetWorldCenter(),r=this,a=this.m_world.CreateBody(this.GetDefinition()),l=r.m_fixtureList;l;)if(e(l)){var c=l.m_next;n?n.m_next=c:r.m_fixtureList=c,r.m_fixtureCount--,l.m_next=a.m_fixtureList,a.m_fixtureList=l,a.m_fixtureCount++,l.m_body=a,l=c}else n=l,l=l.m_next;r.ResetMassData(),a.ResetMassData();var u=r.GetWorldCenter(),h=a.GetWorldCenter(),p=t.AddVV(i,t.CrossFV(o,t.SubtractVV(u,s))),m=t.AddVV(i,t.CrossFV(o,t.SubtractVV(h,s)));return r.SetLinearVelocity(p),a.SetLinearVelocity(m),r.SetAngularVelocity(o),a.SetAngularVelocity(o),r.SynchronizeFixtures(),a.SynchronizeFixtures(),a},y.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var n=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=o,e=n}i.m_fixtureCount=0;var i=this,o=t;i.GetWorldCenter(),o.GetWorldCenter(),i.GetLinearVelocity().Copy(),o.GetLinearVelocity().Copy(),i.GetAngularVelocity(),o.GetAngularVelocity(),i.ResetMassData(),this.SynchronizeFixtures()},y.prototype.GetMass=function(){return this.m_mass},y.prototype.GetInertia=function(){return this.m_I},y.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},y.prototype.SetMassData=function(e){if(s.b2Assert(0==this.m_world.IsLocked()),1==this.m_world.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),void 0;if(this.m_type==y.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,0>=this.m_mass&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&y.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var n=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-n.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-n.x)}},y.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!=y.b2_staticBody&&this.m_type!=y.b2_kinematicBody){for(var e=i.Make(0,0),n=this.m_fixtureList;n;n=n.m_next)if(0!=n.m_density){var o=n.GetMassData();this.m_mass+=o.mass,e.x+=o.center.x*o.mass,e.y+=o.center.y*o.mass,this.m_I+=o.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==(this.m_flags&y.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,s.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)}},y.prototype.GetWorldPoint=function(t){var e=this.m_xf.R,n=new i(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,n},y.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},y.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},y.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},y.prototype.GetLinearVelocityFromWorldPoint=function(t){return new i(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},y.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R,n=new i(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,new i(this.m_linearVelocity.x-this.m_angularVelocity*(n.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(n.x-this.m_sweep.c.x))},y.prototype.GetLinearDamping=function(){return this.m_linearDamping},y.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},y.prototype.GetAngularDamping=function(){return this.m_angularDamping},y.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},y.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t){this.m_type=t,this.ResetMassData(),this.m_type==y.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var e=this.m_contactList;e;e=e.next)e.contact.FlagForFiltering()}},y.prototype.GetType=function(){return this.m_type},y.prototype.SetBullet=function(t){t?this.m_flags|=y.e_bulletFlag:this.m_flags&=~y.e_bulletFlag},y.prototype.IsBullet=function(){return(this.m_flags&y.e_bulletFlag)==y.e_bulletFlag},y.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=y.e_allowSleepFlag:(this.m_flags&=~y.e_allowSleepFlag,this.SetAwake(!0))},y.prototype.SetAwake=function(t){t?(this.m_flags|=y.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~y.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},y.prototype.IsAwake=function(){return(this.m_flags&y.e_awakeFlag)==y.e_awakeFlag},y.prototype.SetFixedRotation=function(t){t?this.m_flags|=y.e_fixedRotationFlag:this.m_flags&=~y.e_fixedRotationFlag,this.ResetMassData()},y.prototype.IsFixedRotation=function(){return(this.m_flags&y.e_fixedRotationFlag)==y.e_fixedRotationFlag},y.prototype.SetActive=function(t){if(t!=this.IsActive()){var e,n;if(t)for(this.m_flags|=y.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.CreateProxy(e,this.m_xf);else{for(this.m_flags&=~y.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.DestroyProxy(e);for(var i=this.m_contactList;i;){var o=i;i=i.next,this.m_world.m_contactManager.Destroy(o.contact)}this.m_contactList=null}}},y.prototype.IsActive=function(){return(this.m_flags&y.e_activeFlag)==y.e_activeFlag},y.prototype.IsSleepingAllowed=function(){return(this.m_flags&y.e_allowSleepFlag)==y.e_allowSleepFlag},y.prototype.GetFixtureList=function(){return this.m_fixtureList},y.prototype.GetJointList=function(){return this.m_jointList},y.prototype.GetControllerList=function(){return this.m_controllerList},y.prototype.GetContactList=function(){return this.m_contactList},y.prototype.GetNext=function(){return this.m_next},y.prototype.GetUserData=function(){return this.m_userData},y.prototype.SetUserData=function(t){this.m_userData=t},y.prototype.GetWorld=function(){return this.m_world},y.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=y.e_bulletFlag),t.fixedRotation&&(this.m_flags|=y.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=y.e_allowSleepFlag),t.awake&&(this.m_flags|=y.e_awakeFlag),t.active&&(this.m_flags|=y.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var n=this.m_xf.R,i=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*i.x+n.col2.x*i.y,this.m_sweep.c.y=n.col1.y*i.x+n.col2.y*i.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==y.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},y.prototype.SynchronizeFixtures=function(){var t=y.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,n=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(e.col1.x*n.x+e.col2.x*n.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*n.x+e.col2.y*n.y);var i,o=this.m_world.m_contactManager.m_broadPhase;for(i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(o,t,this.m_xf)},y.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},y.prototype.ShouldCollide=function(t){if(this.m_type!=y.b2_dynamicBody&&t.m_type!=y.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},y.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Body.s_xf1=new n,Box2D.Dynamics.b2Body.e_islandFlag=1,Box2D.Dynamics.b2Body.e_awakeFlag=2,Box2D.Dynamics.b2Body.e_allowSleepFlag=4,Box2D.Dynamics.b2Body.e_bulletFlag=8,Box2D.Dynamics.b2Body.e_fixedRotationFlag=16,Box2D.Dynamics.b2Body.e_activeFlag=32,Box2D.Dynamics.b2Body.b2_staticBody=0,Box2D.Dynamics.b2Body.b2_kinematicBody=1,Box2D.Dynamics.b2Body.b2_dynamicBody=2}),_.b2BodyDef=function(){this.position=new i,this.linearVelocity=new i},_.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=y.b2_staticBody,this.active=!0,this.inertiaScale=1},g.b2ContactFilter=function(){},g.prototype.ShouldCollide=function(t,e){var n=t.GetFilterData(),i=e.GetFilterData();if(n.groupIndex==i.groupIndex&&0!=n.groupIndex)return n.groupIndex>0;var o=0!=(n.maskBits&i.categoryBits)&&0!=(n.categoryBits&i.maskBits);return o},g.prototype.RayCollide=function(t,e){return t?this.ShouldCollide(t instanceof A?t:null,e):!0},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactFilter.b2_defaultFilter=new g}),x.b2ContactImpulse=function(){this.normalImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints),this.tangentImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints)},v.b2ContactListener=function(){},v.prototype.BeginContact=function(){},v.prototype.EndContact=function(){},v.prototype.PreSolve=function(){},v.prototype.PostSolve=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactListener.b2_defaultListener=new v}),b.b2ContactManager=function(){},b.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=g.b2_defaultFilter,this.m_contactListener=v.b2_defaultListener,this.m_contactFactory=new M(this.m_allocator),this.m_broadPhase=new l},b.prototype.AddPair=function(t,e){var n=t instanceof A?t:null,i=e instanceof A?e:null,o=n.GetBody(),s=i.GetBody();if(o!=s){for(var r=s.GetContactList();r;){if(r.other==o){var a=r.contact.GetFixtureA(),l=r.contact.GetFixtureB();if(a==n&&l==i)return;if(a==i&&l==n)return}r=r.next}if(0!=s.ShouldCollide(o)&&0!=this.m_contactFilter.ShouldCollide(n,i)){var c=this.m_contactFactory.Create(n,i);n=c.GetFixtureA(),i=c.GetFixtureB(),o=n.m_body,s=i.m_body,c.m_prev=null,c.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=c),this.m_world.m_contactList=c,c.m_nodeA.contact=c,c.m_nodeA.other=s,c.m_nodeA.prev=null,c.m_nodeA.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=c.m_nodeA),o.m_contactList=c.m_nodeA,c.m_nodeB.contact=c,c.m_nodeB.other=o,c.m_nodeB.prev=null,c.m_nodeB.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=c.m_nodeB),s.m_contactList=c.m_nodeB,++this.m_world.m_contactCount
}}},b.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this,this.AddPair))},b.prototype.Destroy=function(t){var e=t.GetFixtureA(),n=t.GetFixtureB(),i=e.GetBody(),o=n.GetBody();t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==i.m_contactList&&(i.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},b.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),n=t.GetFixtureB(),i=e.GetBody(),o=n.GetBody();if(0!=i.IsAwake()||0!=o.IsAwake()){if(t.m_flags&T.e_filterFlag){if(0==o.ShouldCollide(i)){var s=t;t=s.GetNext(),this.Destroy(s);continue}if(0==this.m_contactFilter.ShouldCollide(e,n)){s=t,t=s.GetNext(),this.Destroy(s);continue}t.m_flags&=~T.e_filterFlag}var r=e.m_proxy,a=n.m_proxy,l=this.m_broadPhase.TestOverlap(r,a);0!=l?(t.Update(this.m_contactListener),t=t.GetNext()):(s=t,t=s.GetNext(),this.Destroy(s))}else t=t.GetNext()}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactManager.s_evalCP=new a}),w.b2DebugDraw=function(){},w.prototype.b2DebugDraw=function(){},w.prototype.SetFlags=function(t){void 0===t&&(t=0)},w.prototype.GetFlags=function(){},w.prototype.AppendFlags=function(t){void 0===t&&(t=0)},w.prototype.ClearFlags=function(t){void 0===t&&(t=0)},w.prototype.SetSprite=function(){},w.prototype.GetSprite=function(){},w.prototype.SetDrawScale=function(t){void 0===t&&(t=0)},w.prototype.GetDrawScale=function(){},w.prototype.SetLineThickness=function(t){void 0===t&&(t=0)},w.prototype.GetLineThickness=function(){},w.prototype.SetAlpha=function(t){void 0===t&&(t=0)},w.prototype.GetAlpha=function(){},w.prototype.SetFillAlpha=function(t){void 0===t&&(t=0)},w.prototype.GetFillAlpha=function(){},w.prototype.SetXFormScale=function(t){void 0===t&&(t=0)},w.prototype.GetXFormScale=function(){},w.prototype.DrawPolygon=function(t,e){void 0===e&&(e=0)},w.prototype.DrawSolidPolygon=function(t,e){void 0===e&&(e=0)},w.prototype.DrawCircle=function(t,e){void 0===e&&(e=0)},w.prototype.DrawSolidCircle=function(t,e){void 0===e&&(e=0)},w.prototype.DrawSegment=function(){},w.prototype.DrawTransform=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2DebugDraw.e_shapeBit=1,Box2D.Dynamics.b2DebugDraw.e_jointBit=2,Box2D.Dynamics.b2DebugDraw.e_aabbBit=4,Box2D.Dynamics.b2DebugDraw.e_pairBit=8,Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit=16,Box2D.Dynamics.b2DebugDraw.e_controllerBit=32}),C.b2DestructionListener=function(){},C.prototype.SayGoodbyeJoint=function(){},C.prototype.SayGoodbyeFixture=function(){},S.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},S.prototype.Copy=function(){var t=new S;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},A.b2Fixture=function(){this.m_filter=new S},A.prototype.GetType=function(){return this.m_shape.GetType()},A.prototype.GetShape=function(){return this.m_shape},A.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.GetContactList();e;){var n=e.contact,i=n.GetFixtureA(),o=n.GetFixtureB();(i==this||o==this)&&n.SetSensor(i.IsSensor()||o.IsSensor()),e=e.next}},A.prototype.IsSensor=function(){return this.m_isSensor},A.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(var e=this.m_body.GetContactList();e;){var n=e.contact,i=n.GetFixtureA(),o=n.GetFixtureB();(i==this||o==this)&&n.FlagForFiltering(),e=e.next}},A.prototype.GetFilterData=function(){return this.m_filter.Copy()},A.prototype.GetBody=function(){return this.m_body},A.prototype.GetNext=function(){return this.m_next},A.prototype.GetUserData=function(){return this.m_userData},A.prototype.SetUserData=function(t){this.m_userData=t},A.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},A.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},A.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new m),this.m_shape.ComputeMass(t,this.m_density),t},A.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},A.prototype.GetDensity=function(){return this.m_density},A.prototype.GetFriction=function(){return this.m_friction},A.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},A.prototype.GetRestitution=function(){return this.m_restitution},A.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},A.prototype.GetAABB=function(){return this.m_aabb},A.prototype.b2Fixture=function(){this.m_aabb=new r,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},A.prototype.Create=function(t,e,n){this.m_userData=n.userData,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_body=t,this.m_next=null,this.m_filter=n.filter.Copy(),this.m_isSensor=n.isSensor,this.m_shape=n.shape.Copy(),this.m_density=n.density},A.prototype.Destroy=function(){this.m_shape=null},A.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},A.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},A.prototype.Synchronize=function(e,n,i){if(this.m_proxy){var o=new r,s=new r;this.m_shape.ComputeAABB(o,n),this.m_shape.ComputeAABB(s,i),this.m_aabb.Combine(o,s);var a=t.SubtractVV(i.position,n.position);e.MoveProxy(this.m_proxy,this.m_aabb,a)}},D.b2FixtureDef=function(){this.filter=new S},D.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},B.b2Island=function(){},B.prototype.b2Island=function(){this.m_bodies=new Vector,this.m_contacts=new Vector,this.m_joints=new Vector},B.prototype.Initialize=function(t,e,n,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=n,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=i,this.m_listener=o,this.m_contactSolver=s,r=this.m_bodies.length;t>r;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;e>r;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;n>r;r++)this.m_joints[r]=null},B.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},B.prototype.Solve=function(e,n,i){var o,r,a=0,l=0;for(a=0;this.m_bodyCount>a;++a)o=this.m_bodies[a],o.GetType()==y.b2_dynamicBody&&(o.m_linearVelocity.x+=e.dt*(n.x+o.m_invMass*o.m_force.x),o.m_linearVelocity.y+=e.dt*(n.y+o.m_invMass*o.m_force.y),o.m_angularVelocity+=e.dt*o.m_invI*o.m_torque,o.m_linearVelocity.Multiply(t.Clamp(1-e.dt*o.m_linearDamping,0,1)),o.m_angularVelocity*=t.Clamp(1-e.dt*o.m_angularDamping,0,1));this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var c=this.m_contactSolver;for(c.InitVelocityConstraints(e),a=0;this.m_jointCount>a;++a)r=this.m_joints[a],r.InitVelocityConstraints(e);for(a=0;e.velocityIterations>a;++a){for(l=0;this.m_jointCount>l;++l)r=this.m_joints[l],r.SolveVelocityConstraints(e);c.SolveVelocityConstraints()}for(a=0;this.m_jointCount>a;++a)r=this.m_joints[a],r.FinalizeVelocityConstraints();for(c.FinalizeVelocityConstraints(),a=0;this.m_bodyCount>a;++a)if(o=this.m_bodies[a],o.GetType()!=y.b2_staticBody){var u=e.dt*o.m_linearVelocity.x,h=e.dt*o.m_linearVelocity.y;u*u+h*h>s.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=s.b2_maxTranslation*e.inv_dt,o.m_linearVelocity.y*=s.b2_maxTranslation*e.inv_dt);var p=e.dt*o.m_angularVelocity;p*p>s.b2_maxRotationSquared&&(o.m_angularVelocity=0>o.m_angularVelocity?-s.b2_maxRotation*e.inv_dt:s.b2_maxRotation*e.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=e.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=e.dt*o.m_linearVelocity.y,o.m_sweep.a+=e.dt*o.m_angularVelocity,o.SynchronizeTransform()}for(a=0;e.positionIterations>a;++a){var m=c.SolvePositionConstraints(s.b2_contactBaumgarte),f=!0;for(l=0;this.m_jointCount>l;++l){r=this.m_joints[l];var d=r.SolvePositionConstraints(s.b2_contactBaumgarte);f=f&&d}if(m&&f)break}if(this.Report(c.m_constraints),i){var _=Number.MAX_VALUE,g=s.b2_linearSleepTolerance*s.b2_linearSleepTolerance,x=s.b2_angularSleepTolerance*s.b2_angularSleepTolerance;for(a=0;this.m_bodyCount>a;++a)o=this.m_bodies[a],o.GetType()!=y.b2_staticBody&&(0==(o.m_flags&y.e_allowSleepFlag)&&(o.m_sleepTime=0,_=0),0==(o.m_flags&y.e_allowSleepFlag)||o.m_angularVelocity*o.m_angularVelocity>x||t.Dot(o.m_linearVelocity,o.m_linearVelocity)>g?(o.m_sleepTime=0,_=0):(o.m_sleepTime+=e.dt,_=t.Min(_,o.m_sleepTime)));if(_>=s.b2_timeToSleep)for(a=0;this.m_bodyCount>a;++a)o=this.m_bodies[a],o.SetAwake(!1)}},B.prototype.SolveTOI=function(t){var e=0,n=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var i=this.m_contactSolver;for(e=0;this.m_jointCount>e;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;t.velocityIterations>e;++e)for(i.SolveVelocityConstraints(),n=0;this.m_jointCount>n;++n)this.m_joints[n].SolveVelocityConstraints(t);for(e=0;this.m_bodyCount>e;++e){var o=this.m_bodies[e];if(o.GetType()!=y.b2_staticBody){var r=t.dt*o.m_linearVelocity.x,a=t.dt*o.m_linearVelocity.y;r*r+a*a>s.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=s.b2_maxTranslation*t.inv_dt,o.m_linearVelocity.y*=s.b2_maxTranslation*t.inv_dt);var l=t.dt*o.m_angularVelocity;l*l>s.b2_maxRotationSquared&&(o.m_angularVelocity=0>o.m_angularVelocity?-s.b2_maxRotation*t.inv_dt:s.b2_maxRotation*t.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=t.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=t.dt*o.m_linearVelocity.y,o.m_sweep.a+=t.dt*o.m_angularVelocity,o.SynchronizeTransform()}}var c=.75;for(e=0;t.positionIterations>e;++e){var u=i.SolvePositionConstraints(c),h=!0;for(n=0;this.m_jointCount>n;++n){var p=this.m_joints[n].SolvePositionConstraints(s.b2_contactBaumgarte);h=h&&p}if(u&&h)break}this.Report(i.m_constraints)},B.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;this.m_contactCount>e;++e){for(var n=this.m_contacts[e],i=t[e],o=0;i.pointCount>o;++o)B.s_impulse.normalImpulses[o]=i.points[o].normalImpulse,B.s_impulse.tangentImpulses[o]=i.points[o].tangentImpulse;this.m_listener.PostSolve(n,B.s_impulse)}},B.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},B.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},B.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Island.s_impulse=new x}),E.b2TimeStep=function(){},E.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},k.b2World=function(){this.s_stack=new Vector,this.m_contactManager=new b,this.m_contactSolver=new L,this.m_island=new B},k.prototype.b2World=function(t,e){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,k.m_warmStarting=!0,k.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var n=new _;this.m_groundBody=this.CreateBody(n)},k.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},k.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},k.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},k.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},k.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var n=this.m_bodyList;n;n=n.m_next)for(var i=n.m_fixtureList;i;i=i.m_next)i.m_proxy=t.CreateProxy(e.GetFatAABB(i.m_proxy),i)},k.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},k.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},k.prototype.CreateBody=function(t){if(1==this.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),null;var e=new y(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},k.prototype.DestroyBody=function(t){if(1==this.IsLocked())return Logger.log("TRIED TO EDIT PHYSICS WHILE WORLD IS LOCKED!"),void 0;for(var e=t.m_jointList;e;){var n=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(n.joint),this.DestroyJoint(n.joint)}for(var i=t.m_controllerList;i;){var o=i;i=i.nextController,o.controller.RemoveBody(t)}for(var s=t.m_contactList;s;){var r=s;s=s.next,this.m_contactManager.Destroy(r.contact)}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var l=a;a=a.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(l),l.DestroyProxy(this.m_contactManager.m_broadPhase),l.Destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount},k.prototype.CreateJoint=function(t){var e=I.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var n=t.bodyA,i=t.bodyB;if(0==t.collideConnected)for(var o=i.GetContactList();o;)o.other==n&&o.contact.FlagForFiltering(),o=o.next;return e},k.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var n=t.m_bodyA,i=t.m_bodyB;if(n.SetAwake(!0),i.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==n.m_jointList&&(n.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,I.Destroy(t,null),--this.m_jointCount,0==e)for(var o=i.GetContactList();o;)o.other==n&&o.contact.FlagForFiltering(),o=o.next},k.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},k.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},k.prototype.CreateController=function(t){if(t.m_world!=this)throw Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},k.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},k.prototype.SetWarmStarting=function(t){k.m_warmStarting=t},k.prototype.SetContinuousPhysics=function(t){k.m_continuousPhysics=t},k.prototype.GetBodyCount=function(){return this.m_bodyCount},k.prototype.GetJointCount=function(){return this.m_jointCount},k.prototype.GetContactCount=function(){return this.m_contactCount},k.prototype.SetGravity=function(t){this.m_gravity=t},k.prototype.GetGravity=function(){return this.m_gravity},k.prototype.GetGroundBody=function(){return this.m_groundBody},k.prototype.Step=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.m_flags&k.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~k.e_newFixture),this.m_flags|=k.e_locked;var i=k.s_timestep2;i.dt=t,i.velocityIterations=e,i.positionIterations=n,i.inv_dt=t>0?1/t:0,i.dtRatio=this.m_inv_dt0*t,i.warmStarting=k.m_warmStarting,this.m_contactManager.Collide(),i.dt>0&&this.Solve(i),k.m_continuousPhysics&&i.dt>0&&this.SolveTOI(i),i.dt>0&&(this.m_inv_dt0=i.inv_dt),this.m_flags&=~k.e_locked},k.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},k.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,n,s,a,l=this.m_debugDraw.GetFlags();new i,new i,new i;var c;new r,new r;var u=[new i,new i,new i,new i],h=new o(0,0,0);if(l&w.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(c=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)n=e.GetShape(),0==t.IsActive()?(h.Set(.5,.5,.3),this.DrawShape(n,c,h)):t.GetType()==y.b2_staticBody?(h.Set(.5,.9,.5),this.DrawShape(n,c,h)):t.GetType()==y.b2_kinematicBody?(h.Set(.5,.5,.9),this.DrawShape(n,c,h)):0==t.IsAwake()?(h.Set(.6,.6,.6),this.DrawShape(n,c,h)):(h.Set(.9,.7,.7),this.DrawShape(n,c,h));if(l&w.e_jointBit)for(s=this.m_jointList;s;s=s.m_next)this.DrawJoint(s);if(l&w.e_controllerBit)for(var p=this.m_controllerList;p;p=p.m_next)p.Draw(this.m_debugDraw);if(l&w.e_pairBit){h.Set(.3,.9,.9);for(var m=this.m_contactManager.m_contactList;m;m=m.GetNext()){var f=m.GetFixtureA(),d=m.GetFixtureB(),_=f.GetAABB().GetCenter(),g=d.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(_,g,h)}}if(l&w.e_aabbBit)for(a=this.m_contactManager.m_broadPhase,u=[new i,new i,new i,new i],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var x=a.GetFatAABB(e.m_proxy);u[0].Set(x.lowerBound.x,x.lowerBound.y),u[1].Set(x.upperBound.x,x.lowerBound.y),u[2].Set(x.upperBound.x,x.upperBound.y),u[3].Set(x.lowerBound.x,x.upperBound.y),this.m_debugDraw.DrawPolygon(u,4,h)}if(l&w.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)c=k.s_xf,c.R=t.m_xf.R,c.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(c)}},k.prototype.QueryAABB=function(t,e){function n(e){return t(o.GetUserData(e))}var i=this,o=i.m_contactManager.m_broadPhase;o.Query(n,e)},k.prototype.QueryShape=function(t,e,i){function o(n){var o=a.GetUserData(n)instanceof A?a.GetUserData(n):null;return d.TestOverlap(e,i,o.GetShape(),o.GetBody().GetTransform())?t(o):!0}var s=this;void 0===i&&(i=null),null==i&&(i=new n,i.SetIdentity());var a=s.m_contactManager.m_broadPhase,l=new r;e.ComputeAABB(l,i),a.Query(o,l)},k.prototype.QueryPoint=function(t,e){function n(n){var i=o.GetUserData(n)instanceof A?o.GetUserData(n):null;return i.TestPoint(e)?t(i):!0}var i=this,o=i.m_contactManager.m_broadPhase,a=new r;a.lowerBound.Set(e.x-s.b2_linearSlop,e.y-s.b2_linearSlop),a.upperBound.Set(e.x+s.b2_linearSlop,e.y+s.b2_linearSlop),o.Query(n,a)},k.prototype.RayCast=function(t,e,n){function o(o,s){var l=r.GetUserData(s),c=l instanceof A?l:null,u=c.RayCast(a,o);if(u){var h=a.fraction,p=new i((1-h)*e.x+h*n.x,(1-h)*e.y+h*n.y);return t(c,p,a.normal,h)}return o.maxFraction}var s=this,r=s.m_contactManager.m_broadPhase,a=new u,l=new c(e,n);r.RayCast(o,l)},k.prototype.RayCastOne=function(t,e){function n(t,e,n,o){return void 0===o&&(o=0),i=t,o}var i,o=this;return o.RayCast(n,t,e),i},k.prototype.RayCastAll=function(t,e){function n(t,e,n,i){return void 0===i&&(i=0),o[o.length]=t,1}var i=this,o=new Vector;return i.RayCast(n,t,e),o},k.prototype.GetBodyList=function(){return this.m_bodyList},k.prototype.GetJointList=function(){return this.m_jointList},k.prototype.GetContactList=function(){return this.m_contactList},k.prototype.IsLocked=function(){return(this.m_flags&k.e_locked)>0},k.prototype.Solve=function(t){for(var e,n=this.m_controllerList;n;n=n.m_next)n.Step(t);var i=this.m_island;for(i.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~y.e_islandFlag;for(var o=this.m_contactList;o;o=o.m_next)o.m_flags&=~T.e_islandFlag;for(var s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;parseInt(this.m_bodyCount);for(var r=this.s_stack,a=this.m_bodyList;a;a=a.m_next)if(!(a.m_flags&y.e_islandFlag)&&0!=a.IsAwake()&&0!=a.IsActive()&&a.GetType()!=y.b2_staticBody){i.Clear();var l=0;for(r[l++]=a,a.m_flags|=y.e_islandFlag;l>0;)if(e=r[--l],i.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=y.b2_staticBody){for(var c,u=e.m_contactList;u;u=u.next)u.contact.m_flags&T.e_islandFlag||1!=u.contact.IsSensor()&&0!=u.contact.IsEnabled()&&0!=u.contact.IsTouching()&&(i.AddContact(u.contact),u.contact.m_flags|=T.e_islandFlag,c=u.other,c.m_flags&y.e_islandFlag||(r[l++]=c,c.m_flags|=y.e_islandFlag));for(var h=e.m_jointList;h;h=h.next)1!=h.joint.m_islandFlag&&(c=h.other,0!=c.IsActive()&&(i.AddJoint(h.joint),h.joint.m_islandFlag=!0,c.m_flags&y.e_islandFlag||(r[l++]=c,c.m_flags|=y.e_islandFlag)))}i.Solve(t,this.m_gravity,this.m_allowSleep);for(var p=0;i.m_bodyCount>p;++p)e=i.m_bodies[p],e.GetType()==y.b2_staticBody&&(e.m_flags&=~y.e_islandFlag)}for(p=0;r.length>p&&r[p];++p)r[p]=null;for(e=this.m_bodyList;e;e=e.m_next)0!=e.IsAwake()&&0!=e.IsActive()&&e.GetType()!=y.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},k.prototype.SolveTOI=function(t){var e,n,i,o,r,a,l,c=this.m_island;c.Initialize(this.m_bodyCount,s.b2_maxTOIContactsPerIsland,s.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var u=k.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~y.e_islandFlag,e.m_sweep.t0=0;var h;for(h=this.m_contactList;h;h=h.m_next)h.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(l=this.m_jointList;l;l=l.m_next)l.m_islandFlag=!1;for(;;){var p=null,m=1;for(h=this.m_contactList;h;h=h.m_next)if(1!=h.IsSensor()&&0!=h.IsEnabled()&&0!=h.IsContinuous()){var f=1;if(h.m_flags&T.e_toiFlag)f=h.m_toi;else{if(n=h.m_fixtureA,i=h.m_fixtureB,o=n.m_body,r=i.m_body,!(o.GetType()==y.b2_dynamicBody&&0!=o.IsAwake()||r.GetType()==y.b2_dynamicBody&&0!=r.IsAwake()))continue;var d=o.m_sweep.t0;o.m_sweep.t0<r.m_sweep.t0?(d=r.m_sweep.t0,o.m_sweep.Advance(d)):r.m_sweep.t0<o.m_sweep.t0&&(d=o.m_sweep.t0,r.m_sweep.Advance(d)),f=h.ComputeTOI(o.m_sweep,r.m_sweep),s.b2Assert(f>=0&&1>=f),f>0&&1>f&&(f=(1-f)*d+f,f>1&&(f=1)),h.m_toi=f,h.m_flags|=T.e_toiFlag}f>Number.MIN_VALUE&&m>f&&(p=h,m=f)}if(null==p||m>1-100*Number.MIN_VALUE)break;if(n=p.m_fixtureA,i=p.m_fixtureB,o=n.m_body,r=i.m_body,k.s_backupA.Set(o.m_sweep),k.s_backupB.Set(r.m_sweep),o.Advance(m),r.Advance(m),p.Update(this.m_contactManager.m_contactListener),p.m_flags&=~T.e_toiFlag,1!=p.IsSensor()&&0!=p.IsEnabled()){if(0!=p.IsTouching()){var _=o;_.GetType()!=y.b2_dynamicBody&&(_=r),c.Clear();var g=0,x=0;for(u[g+x++]=_,_.m_flags|=y.e_islandFlag;x>0;)if(e=u[g++],--x,c.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==y.b2_dynamicBody){for(a=e.m_contactList;a&&c.m_contactCount!=c.m_contactCapacity;a=a.next)if(!(a.contact.m_flags&T.e_islandFlag)&&1!=a.contact.IsSensor()&&0!=a.contact.IsEnabled()&&0!=a.contact.IsTouching()){c.AddContact(a.contact),a.contact.m_flags|=T.e_islandFlag;var v=a.other;v.m_flags&y.e_islandFlag||(v.GetType()!=y.b2_staticBody&&(v.Advance(m),v.SetAwake(!0)),u[g+x]=v,++x,v.m_flags|=y.e_islandFlag)}for(var b=e.m_jointList;b;b=b.next)c.m_jointCount!=c.m_jointCapacity&&1!=b.joint.m_islandFlag&&(v=b.other,0!=v.IsActive()&&(c.AddJoint(b.joint),b.joint.m_islandFlag=!0,v.m_flags&y.e_islandFlag||(v.GetType()!=y.b2_staticBody&&(v.Advance(m),v.SetAwake(!0)),u[g+x]=v,++x,v.m_flags|=y.e_islandFlag)))}var w=k.s_timestep;w.warmStarting=!1,w.dt=(1-m)*t.dt,w.inv_dt=1/w.dt,w.dtRatio=0,w.velocityIterations=t.velocityIterations,w.positionIterations=t.positionIterations,c.SolveTOI(w);var C=0;for(C=0;c.m_bodyCount>C;++C)if(e=c.m_bodies[C],e.m_flags&=~y.e_islandFlag,0!=e.IsAwake()&&e.GetType()==y.b2_dynamicBody)for(e.SynchronizeFixtures(),a=e.m_contactList;a;a=a.next)a.contact.m_flags&=~T.e_toiFlag;for(C=0;c.m_contactCount>C;++C)h=c.m_contacts[C],h.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(C=0;c.m_jointCount>C;++C)l=c.m_joints[C],l.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}else o.m_sweep.Set(k.s_backupA),r.m_sweep.Set(k.s_backupB),o.SynchronizeTransform(),r.SynchronizeTransform()}},k.prototype.DrawJoint=function(t){var e=t.GetBodyA(),n=t.GetBodyB(),i=e.m_xf,o=n.m_xf,s=i.position,r=o.position,a=t.GetAnchorA(),l=t.GetAnchorB(),c=k.s_jointColor;switch(t.m_type){case I.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,c);break;case I.e_pulleyJoint:var u=t instanceof j?t:null,h=u.GetGroundAnchorA(),p=u.GetGroundAnchorB();this.m_debugDraw.DrawSegment(h,a,c),this.m_debugDraw.DrawSegment(p,l,c),this.m_debugDraw.DrawSegment(h,p,c);break;case I.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,c);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,a,c),this.m_debugDraw.DrawSegment(a,l,c),n!=this.m_groundBody&&this.m_debugDraw.DrawSegment(r,l,c)}},k.prototype.DrawShape=function(e,n,i){switch(e.m_type){case d.e_circleShape:var o=e instanceof h?e:null,s=t.MulX(n,o.m_p),r=o.m_radius,a=n.R.col1;this.m_debugDraw.DrawSolidCircle(s,r,a,i);break;case d.e_polygonShape:var l=0,c=e instanceof f?e:null,u=parseInt(c.GetVertexCount()),m=c.GetVertices(),y=new Vector(u);for(l=0;u>l;++l)y[l]=t.MulX(n,m[l]);this.m_debugDraw.DrawSolidPolygon(y,u,i);break;case d.e_edgeShape:var _=e instanceof p?e:null;this.m_debugDraw.DrawSegment(t.MulX(n,_.GetVertex1()),t.MulX(n,_.GetVertex2()),i)}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2World.s_timestep2=new E,Box2D.Dynamics.b2World.s_xf=new n,Box2D.Dynamics.b2World.s_backupA=new e,Box2D.Dynamics.b2World.s_backupB=new e,Box2D.Dynamics.b2World.s_timestep=new E,Box2D.Dynamics.b2World.s_queue=new Vector,Box2D.Dynamics.b2World.s_jointColor=new o(.5,.8,.8),Box2D.Dynamics.b2World.e_newFixture=1,Box2D.Dynamics.b2World.e_locked=2})}(),function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape),n=(Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),i=Box2D.Collision.Shapes.b2Shape,o=Box2D.Dynamics.Contacts.b2CircleContact,s=Box2D.Dynamics.Contacts.b2Contact,r=Box2D.Dynamics.Contacts.b2ContactConstraint,a=Box2D.Dynamics.Contacts.b2ContactConstraintPoint,l=Box2D.Dynamics.Contacts.b2ContactEdge,c=Box2D.Dynamics.Contacts.b2ContactFactory,u=Box2D.Dynamics.Contacts.b2ContactRegister,h=Box2D.Dynamics.Contacts.b2ContactResult,p=Box2D.Dynamics.Contacts.b2ContactSolver,m=Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,f=Box2D.Dynamics.Contacts.b2NullContact,d=Box2D.Dynamics.Contacts.b2PolyAndCircleContact,y=Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,_=Box2D.Dynamics.Contacts.b2PolygonContact,g=Box2D.Dynamics.Contacts.b2PositionSolverManifold,x=Box2D.Dynamics.b2Body,v=(Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep),b=(Box2D.Dynamics.b2World,Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),w=Box2D.Common.Math.b2Mat22,C=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),S=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),A=(Box2D.Common.Math.b2Vec3,Box2D.Collision.b2AABB,Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision),D=Box2D.Collision.b2ContactID,B=(Box2D.Collision.b2ContactPoint,Box2D.Collision.b2Distance,Box2D.Collision.b2DistanceInput,Box2D.Collision.b2DistanceOutput,Box2D.Collision.b2DistanceProxy,Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase,Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold),E=(Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput,Box2D.Collision.b2RayCastOutput,Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache,Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact),k=Box2D.Collision.b2TOIInput,T=Box2D.Collision.b2WorldManifold;Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.inherit(o,Box2D.Dynamics.Contacts.b2Contact),o.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,o.b2CircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},o.Create=function(){return new o},o.Destroy=function(){},o.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},o.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();A.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},s.b2Contact=function(){this.m_nodeA=new l,this.m_nodeB=new l,this.m_manifold=new B,this.m_oldManifold=new B},s.prototype.GetManifold=function(){return this.m_manifold},s.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody(),i=this.m_fixtureA.GetShape(),o=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),i.m_radius,n.GetTransform(),o.m_radius)},s.prototype.IsTouching=function(){return(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag},s.prototype.IsContinuous=function(){return(this.m_flags&s.e_continuousFlag)==s.e_continuousFlag},s.prototype.SetSensor=function(t){t?this.m_flags|=s.e_sensorFlag:this.m_flags&=~s.e_sensorFlag},s.prototype.IsSensor=function(){return(this.m_flags&s.e_sensorFlag)==s.e_sensorFlag},s.prototype.SetEnabled=function(t){t?this.m_flags|=s.e_enabledFlag:this.m_flags&=~s.e_enabledFlag},s.prototype.IsEnabled=function(){return(this.m_flags&s.e_enabledFlag)==s.e_enabledFlag},s.prototype.GetNext=function(){return this.m_next},s.prototype.GetFixtureA=function(){return this.m_fixtureA},s.prototype.GetFixtureB=function(){return this.m_fixtureB},s.prototype.FlagForFiltering=function(){this.m_flags|=s.e_filterFlag},s.prototype.b2Contact=function(){},s.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=s.e_enabledFlag,!t||!e)return this.m_fixtureA=null,this.m_fixtureB=null,void 0;(t.IsSensor()||e.IsSensor())&&(this.m_flags|=s.e_sensorFlag);var n=t.GetBody(),i=e.GetBody();(n.GetType()!=x.b2_dynamicBody||n.IsBullet()||i.GetType()!=x.b2_dynamicBody||i.IsBullet())&&(this.m_flags|=s.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},s.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=s.e_enabledFlag;var n=!1,o=(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag,r=this.m_fixtureA.m_body,a=this.m_fixtureB.m_body,l=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);
if(this.m_flags&s.e_sensorFlag){if(l){var c=this.m_fixtureA.GetShape(),u=this.m_fixtureB.GetShape(),h=r.GetTransform(),p=a.GetTransform();n=i.TestOverlap(c,h,u,p)}this.m_manifold.m_pointCount=0}else{if(r.GetType()!=x.b2_dynamicBody||r.IsBullet()||a.GetType()!=x.b2_dynamicBody||a.IsBullet()?this.m_flags|=s.e_continuousFlag:this.m_flags&=~s.e_continuousFlag,l){this.Evaluate(),n=this.m_manifold.m_pointCount>0;for(var m=0;this.m_manifold.m_pointCount>m;++m){var f=this.m_manifold.m_points[m];f.m_normalImpulse=0,f.m_tangentImpulse=0;for(var d=f.m_id,y=0;this.m_oldManifold.m_pointCount>y;++y){var _=this.m_oldManifold.m_points[y];if(_.m_id.key==d.key){f.m_normalImpulse=_.m_normalImpulse,f.m_tangentImpulse=_.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;n!=o&&(r.SetAwake(!0),a.SetAwake(!0))}n?this.m_flags|=s.e_touchingFlag:this.m_flags&=~s.e_touchingFlag,0==o&&1==n&&t.BeginContact(this),1==o&&0==n&&t.EndContact(this),0==(this.m_flags&s.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},s.prototype.Evaluate=function(){},s.prototype.ComputeTOI=function(t,e){return s.s_input.proxyA.Set(this.m_fixtureA.GetShape()),s.s_input.proxyB.Set(this.m_fixtureB.GetShape()),s.s_input.sweepA=t,s.s_input.sweepB=e,s.s_input.tolerance=b.b2_linearSlop,E.TimeOfImpact(s.s_input)},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag=1,Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag=2,Box2D.Dynamics.Contacts.b2Contact.e_islandFlag=4,Box2D.Dynamics.Contacts.b2Contact.e_toiFlag=8,Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag=16,Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag=32,Box2D.Dynamics.Contacts.b2Contact.e_filterFlag=64,Box2D.Dynamics.Contacts.b2Contact.s_input=new k}),r.b2ContactConstraint=function(){this.localPlaneNormal=new S,this.localPoint=new S,this.normal=new S,this.normalMass=new w,this.K=new w},r.prototype.b2ContactConstraint=function(){this.points=new Vector(b.b2_maxManifoldPoints);for(var t=0;b.b2_maxManifoldPoints>t;t++)this.points[t]=new a},a.b2ContactConstraintPoint=function(){this.localPoint=new S,this.rA=new S,this.rB=new S},l.b2ContactEdge=function(){},c.b2ContactFactory=function(){},c.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},c.prototype.AddType=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!0,n!=i&&(this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!1)},c.prototype.InitializeRegisters=function(){this.m_registers=new Vector(i.e_shapeTypeCount);for(var t=0;i.e_shapeTypeCount>t;t++){this.m_registers[t]=new Vector(i.e_shapeTypeCount);for(var e=0;i.e_shapeTypeCount>e;e++)this.m_registers[t][e]=new u}this.AddType(o.Create,o.Destroy,i.e_circleShape,i.e_circleShape),this.AddType(d.Create,d.Destroy,i.e_polygonShape,i.e_circleShape),this.AddType(_.Create,_.Destroy,i.e_polygonShape,i.e_polygonShape),this.AddType(m.Create,m.Destroy,i.e_edgeShape,i.e_circleShape),this.AddType(y.Create,y.Destroy,i.e_polygonShape,i.e_edgeShape)},c.prototype.Create=function(t,e){var n,i=parseInt(t.GetType()),o=parseInt(e.GetType()),s=this.m_registers[i][o];if(s.pool)return n=s.pool,s.pool=n.m_next,s.poolCount--,n.Reset(t,e),n;var r=s.createFcn;return null!=r?s.primary?(n=r(this.m_allocator),n.Reset(t,e),n):(n=r(this.m_allocator),n.Reset(e,t),n):null},c.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),n=parseInt(t.m_fixtureB.GetType()),i=this.m_registers[e][n];i.poolCount++,t.m_next=i.pool,i.pool=t;var o=i.destroyFcn;o(t,this.m_allocator)},u.b2ContactRegister=function(){},h.b2ContactResult=function(){this.position=new S,this.normal=new S,this.id=new D},p.b2ContactSolver=function(){this.m_step=new v,this.m_constraints=new Vector},p.prototype.b2ContactSolver=function(){},p.prototype.Initialize=function(t,e,n,i){void 0===n&&(n=0);var o;this.m_step.Set(t),this.m_allocator=i;var s=0;for(this.m_constraintCount=n;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new r;for(s=0;n>s;++s){o=e[s];var a=o.m_fixtureA,l=o.m_fixtureB,c=a.m_shape,u=l.m_shape,h=c.m_radius,m=u.m_radius,f=a.m_body,d=l.m_body,y=o.GetManifold(),_=b.b2MixFriction(a.GetFriction(),l.GetFriction()),g=b.b2MixRestitution(a.GetRestitution(),l.GetRestitution()),x=f.m_linearVelocity.x,v=f.m_linearVelocity.y,w=d.m_linearVelocity.x,C=d.m_linearVelocity.y,S=f.m_angularVelocity,A=d.m_angularVelocity;b.b2Assert(y.m_pointCount>0),p.s_worldManifold.Initialize(y,f.m_xf,h,d.m_xf,m);var D=p.s_worldManifold.m_normal.x,B=p.s_worldManifold.m_normal.y,E=this.m_constraints[s];E.bodyA=f,E.bodyB=d,E.manifold=y,E.normal.x=D,E.normal.y=B,E.pointCount=y.m_pointCount,E.friction=_,E.restitution=g,E.localPlaneNormal.x=y.m_localPlaneNormal.x,E.localPlaneNormal.y=y.m_localPlaneNormal.y,E.localPoint.x=y.m_localPoint.x,E.localPoint.y=y.m_localPoint.y,E.radius=h+m,E.type=y.m_type;for(var k=0;E.pointCount>k;++k){var T=y.m_points[k],M=E.points[k];M.normalImpulse=T.m_normalImpulse,M.tangentImpulse=T.m_tangentImpulse,M.localPoint.SetV(T.m_localPoint);var L=M.rA.x=p.s_worldManifold.m_points[k].x-f.m_sweep.c.x,I=M.rA.y=p.s_worldManifold.m_points[k].y-f.m_sweep.c.y,j=M.rB.x=p.s_worldManifold.m_points[k].x-d.m_sweep.c.x,P=M.rB.y=p.s_worldManifold.m_points[k].y-d.m_sweep.c.y,V=L*B-I*D,R=j*B-P*D;V*=V,R*=R;var N=f.m_invMass+d.m_invMass+f.m_invI*V+d.m_invI*R;M.normalMass=1/N;var O=f.m_mass*f.m_invMass+d.m_mass*d.m_invMass;O+=f.m_mass*f.m_invI*V+d.m_mass*d.m_invI*R,M.equalizedMass=1/O;var F=B,G=-D,J=L*G-I*F,q=j*G-P*F;J*=J,q*=q;var H=f.m_invMass+d.m_invMass+f.m_invI*J+d.m_invI*q;M.tangentMass=1/H,M.velocityBias=0;var z=w+-A*P-x- -S*I,U=C+A*j-v-S*L,$=E.normal.x*z+E.normal.y*U;-b.b2_velocityThreshold>$&&(M.velocityBias+=-E.restitution*$)}if(2==E.pointCount){var W=E.points[0],X=E.points[1],Q=f.m_invMass,K=f.m_invI,Y=d.m_invMass,Z=d.m_invI,te=W.rA.x*B-W.rA.y*D,ee=W.rB.x*B-W.rB.y*D,ne=X.rA.x*B-X.rA.y*D,ie=X.rB.x*B-X.rB.y*D,oe=Q+Y+K*te*te+Z*ee*ee,se=Q+Y+K*ne*ne+Z*ie*ie,re=Q+Y+K*te*ne+Z*ee*ie,ae=100;ae*(oe*se-re*re)>oe*oe?(E.K.col1.Set(oe,re),E.K.col2.Set(re,se),E.K.GetInverse(E.normalMass)):E.pointCount=1}}},p.prototype.InitVelocityConstraints=function(t){for(var e=0;this.m_constraintCount>e;++e){var n=this.m_constraints[e],i=n.bodyA,o=n.bodyB,s=i.m_invMass,r=i.m_invI,a=o.m_invMass,l=o.m_invI,c=n.normal.x,u=n.normal.y,h=u,p=-c,m=0,f=0;if(t.warmStarting)for(f=n.pointCount,m=0;f>m;++m){var d=n.points[m];d.normalImpulse*=t.dtRatio,d.tangentImpulse*=t.dtRatio;var y=d.normalImpulse*c+d.tangentImpulse*h,_=d.normalImpulse*u+d.tangentImpulse*p;i.m_angularVelocity-=r*(d.rA.x*_-d.rA.y*y),i.m_linearVelocity.x-=s*y,i.m_linearVelocity.y-=s*_,o.m_angularVelocity+=l*(d.rB.x*_-d.rB.y*y),o.m_linearVelocity.x+=a*y,o.m_linearVelocity.y+=a*_}else for(f=n.pointCount,m=0;f>m;++m){var g=n.points[m];g.normalImpulse=0,g.tangentImpulse=0}}},p.prototype.SolveVelocityConstraints=function(){for(var t,e,n=0,i=0,o=0,s=0,r=0,a=0,l=0,c=0,u=0,h=0,p=0,m=0,f=0,d=0,y=0,_=0,g=0;this.m_constraintCount>g;++g){var x=this.m_constraints[g],v=x.bodyA,b=x.bodyB,w=v.m_angularVelocity,S=b.m_angularVelocity,A=v.m_linearVelocity,D=b.m_linearVelocity,B=v.m_invMass,E=v.m_invI,k=b.m_invMass,T=b.m_invI,M=x.normal.x,L=x.normal.y,I=L,j=-M,P=x.friction;for(n=0;x.pointCount>n;n++)t=x.points[n],i=D.x-S*t.rB.y-A.x+w*t.rA.y,o=D.y+S*t.rB.x-A.y-w*t.rA.x,r=i*I+o*j,a=t.tangentMass*-r,l=P*t.normalImpulse,c=C.Clamp(t.tangentImpulse+a,-l,l),a=c-t.tangentImpulse,u=a*I,h=a*j,A.x-=B*u,A.y-=B*h,w-=E*(t.rA.x*h-t.rA.y*u),D.x+=k*u,D.y+=k*h,S+=T*(t.rB.x*h-t.rB.y*u),t.tangentImpulse=c;if(parseInt(x.pointCount),1==x.pointCount)t=x.points[0],i=D.x+-S*t.rB.y-A.x- -w*t.rA.y,o=D.y+S*t.rB.x-A.y-w*t.rA.x,s=i*M+o*L,a=-t.normalMass*(s-t.velocityBias),c=t.normalImpulse+a,c=c>0?c:0,a=c-t.normalImpulse,u=a*M,h=a*L,A.x-=B*u,A.y-=B*h,w-=E*(t.rA.x*h-t.rA.y*u),D.x+=k*u,D.y+=k*h,S+=T*(t.rB.x*h-t.rB.y*u),t.normalImpulse=c;else{var V=x.points[0],R=x.points[1],N=V.normalImpulse,O=R.normalImpulse,F=D.x-S*V.rB.y-A.x+w*V.rA.y,G=D.y+S*V.rB.x-A.y-w*V.rA.x,J=D.x-S*R.rB.y-A.x+w*R.rA.y,q=D.y+S*R.rB.x-A.y-w*R.rA.x,H=F*M+G*L,z=J*M+q*L,U=H-V.velocityBias,$=z-R.velocityBias;for(e=x.K,U-=e.col1.x*N+e.col2.x*O,$-=e.col1.y*N+e.col2.y*O;;){e=x.normalMass;var W=-(e.col1.x*U+e.col2.x*$),X=-(e.col1.y*U+e.col2.y*$);if(W>=0&&X>=0){p=W-N,m=X-O,f=p*M,d=p*L,y=m*M,_=m*L,A.x-=B*(f+y),A.y-=B*(d+_),w-=E*(V.rA.x*d-V.rA.y*f+R.rA.x*_-R.rA.y*y),D.x+=k*(f+y),D.y+=k*(d+_),S+=T*(V.rB.x*d-V.rB.y*f+R.rB.x*_-R.rB.y*y),V.normalImpulse=W,R.normalImpulse=X;break}if(W=-V.normalMass*U,X=0,H=0,z=x.K.col1.y*W+$,W>=0&&z>=0){p=W-N,m=X-O,f=p*M,d=p*L,y=m*M,_=m*L,A.x-=B*(f+y),A.y-=B*(d+_),w-=E*(V.rA.x*d-V.rA.y*f+R.rA.x*_-R.rA.y*y),D.x+=k*(f+y),D.y+=k*(d+_),S+=T*(V.rB.x*d-V.rB.y*f+R.rB.x*_-R.rB.y*y),V.normalImpulse=W,R.normalImpulse=X;break}if(W=0,X=-R.normalMass*$,H=x.K.col2.x*X+U,z=0,X>=0&&H>=0){p=W-N,m=X-O,f=p*M,d=p*L,y=m*M,_=m*L,A.x-=B*(f+y),A.y-=B*(d+_),w-=E*(V.rA.x*d-V.rA.y*f+R.rA.x*_-R.rA.y*y),D.x+=k*(f+y),D.y+=k*(d+_),S+=T*(V.rB.x*d-V.rB.y*f+R.rB.x*_-R.rB.y*y),V.normalImpulse=W,R.normalImpulse=X;break}if(W=0,X=0,H=U,z=$,H>=0&&z>=0){p=W-N,m=X-O,f=p*M,d=p*L,y=m*M,_=m*L,A.x-=B*(f+y),A.y-=B*(d+_),w-=E*(V.rA.x*d-V.rA.y*f+R.rA.x*_-R.rA.y*y),D.x+=k*(f+y),D.y+=k*(d+_),S+=T*(V.rB.x*d-V.rB.y*f+R.rB.x*_-R.rB.y*y),V.normalImpulse=W,R.normalImpulse=X;break}break}}v.m_angularVelocity=w,b.m_angularVelocity=S}},p.prototype.FinalizeVelocityConstraints=function(){for(var t=0;this.m_constraintCount>t;++t)for(var e=this.m_constraints[t],n=e.manifold,i=0;e.pointCount>i;++i){var o=n.m_points[i],s=e.points[i];o.m_normalImpulse=s.normalImpulse,o.m_tangentImpulse=s.tangentImpulse}},p.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,n=0;this.m_constraintCount>n;n++){var i=this.m_constraints[n],o=i.bodyA,s=i.bodyB,r=o.m_mass*o.m_invMass,a=o.m_mass*o.m_invI,l=s.m_mass*s.m_invMass,c=s.m_mass*s.m_invI;p.s_psm.Initialize(i);for(var u=p.s_psm.m_normal,h=0;i.pointCount>h;h++){var m=i.points[h],f=p.s_psm.m_points[h],d=p.s_psm.m_separations[h],y=f.x-o.m_sweep.c.x,_=f.y-o.m_sweep.c.y,g=f.x-s.m_sweep.c.x,x=f.y-s.m_sweep.c.y;e=d>e?e:d;var v=C.Clamp(t*(d+b.b2_linearSlop),-b.b2_maxLinearCorrection,0),w=-m.equalizedMass*v,S=w*u.x,A=w*u.y;o.m_sweep.c.x-=r*S,o.m_sweep.c.y-=r*A,o.m_sweep.a-=a*(y*A-_*S),o.SynchronizeTransform(),s.m_sweep.c.x+=l*S,s.m_sweep.c.y+=l*A,s.m_sweep.a+=c*(g*A-x*S),s.SynchronizeTransform()}}return e>-1.5*b.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new T,Box2D.Dynamics.Contacts.b2ContactSolver.s_psm=new g}),Box2D.inherit(m,Box2D.Dynamics.Contacts.b2Contact),m.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,m.b2EdgeAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},m.Create=function(){return new m},m.Destroy=function(){},m.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},m.prototype.Evaluate=function(){var n=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,n.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},m.prototype.b2CollideEdgeAndCircle=function(){},Box2D.inherit(f,Box2D.Dynamics.Contacts.b2Contact),f.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,f.b2NullContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},f.prototype.Evaluate=function(){},Box2D.inherit(d,Box2D.Dynamics.Contacts.b2Contact),d.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,d.b2PolyAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},d.Create=function(){return new d},d.Destroy=function(){},d.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),b.b2Assert(t.GetType()==i.e_polygonShape),b.b2Assert(e.GetType()==i.e_circleShape)},d.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body;A.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},Box2D.inherit(y,Box2D.Dynamics.Contacts.b2Contact),y.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,y.b2PolyAndEdgeContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(){return new y},y.Destroy=function(){},y.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),b.b2Assert(t.GetType()==i.e_polygonShape),b.b2Assert(e.GetType()==i.e_edgeShape)},y.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,i.m_xf)},y.prototype.b2CollidePolyAndEdge=function(){},Box2D.inherit(_,Box2D.Dynamics.Contacts.b2Contact),_.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,_.b2PolygonContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},_.Create=function(){return new _},_.Destroy=function(){},_.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},_.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();A.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof n?this.m_fixtureB.GetShape():null,e.m_xf)},g.b2PositionSolverManifold=function(){},g.prototype.b2PositionSolverManifold=function(){this.m_normal=new S,this.m_separations=new Vector_a2j_Number(b.b2_maxManifoldPoints),this.m_points=new Vector(b.b2_maxManifoldPoints);for(var t=0;b.b2_maxManifoldPoints>t;t++)this.m_points[t]=new S},g.prototype.Initialize=function(t){b.b2Assert(t.pointCount>0);var e,n,i=0,o=0,s=0,r=0,a=0;switch(t.type){case B.e_circles:e=t.bodyA.m_xf.R,n=t.localPoint;var l=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),c=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y);e=t.bodyB.m_xf.R,n=t.points[0].localPoint;var u=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),h=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),p=u-l,m=h-c,f=p*p+m*m;if(f>Number.MIN_VALUE*Number.MIN_VALUE){var d=Math.sqrt(f);this.m_normal.x=p/d,this.m_normal.y=m/d}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(l+u),this.m_points[0].y=.5*(c+h),this.m_separations[0]=p*this.m_normal.x+m*this.m_normal.y-t.radius;break;case B.e_faceA:for(e=t.bodyA.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=e.col1.x*n.x+e.col2.x*n.y,this.m_normal.y=e.col1.y*n.x+e.col2.y*n.y,e=t.bodyA.m_xf.R,n=t.localPoint,r=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),a=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),e=t.bodyB.m_xf.R,i=0;t.pointCount>i;++i)n=t.points[i].localPoint,o=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),s=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),this.m_separations[i]=(o-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[i].x=o,this.m_points[i].y=s;break;case B.e_faceB:for(e=t.bodyB.m_xf.R,n=t.localPlaneNormal,this.m_normal.x=e.col1.x*n.x+e.col2.x*n.y,this.m_normal.y=e.col1.y*n.x+e.col2.y*n.y,e=t.bodyB.m_xf.R,n=t.localPoint,r=t.bodyB.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),a=t.bodyB.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),e=t.bodyA.m_xf.R,i=0;t.pointCount>i;++i)n=t.points[i].localPoint,o=t.bodyA.m_xf.position.x+(e.col1.x*n.x+e.col2.x*n.y),s=t.bodyA.m_xf.position.y+(e.col1.y*n.x+e.col2.y*n.y),this.m_separations[i]=(o-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[i].Set(o,s);this.m_normal.x*=-1,this.m_normal.y*=-1}},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new S,Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new S})}(),function(){var t=(Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.Common.Math.b2Mat22),e=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),n=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),i=(Box2D.Common.Math.b2Vec3,Box2D.Common.b2Color),o=(Box2D.Common.b2internal,Box2D.Common.b2Settings,Box2D.Collision.Shapes.b2CircleShape,Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Collision.Shapes.b2Shape,Box2D.Dynamics.Controllers.b2BuoyancyController),s=Box2D.Dynamics.Controllers.b2ConstantAccelController,r=Box2D.Dynamics.Controllers.b2ConstantForceController,a=Box2D.Dynamics.Controllers.b2Controller,l=Box2D.Dynamics.Controllers.b2ControllerEdge,c=Box2D.Dynamics.Controllers.b2GravityController,u=Box2D.Dynamics.Controllers.b2TensorDampingController;Box2D.inherit(o,Box2D.Dynamics.Controllers.b2Controller),o.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,o.b2BuoyancyController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new n(0,-1),this.offset=0,this.density=0,this.velocity=new n(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},o.prototype.Step=function(){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;if(0!=e.IsAwake()){for(var i=new n,o=new n,s=0,r=0,a=e.GetFixtureList();a;a=a.GetNext()){var l=new n,c=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),l);s+=c,i.x+=c*l.x,i.y+=c*l.y;var u=0;u=this.useDensity?1:1,r+=c*u,o.x+=c*l.x*u,o.y+=c*l.y*u}if(i.x/=s,i.y/=s,o.x/=r,o.y/=r,!(Number.MIN_VALUE>s)){var h=this.gravity.GetNegative();h.Multiply(this.density*s),e.ApplyForce(h,o);var p=e.GetLinearVelocityFromWorldPoint(i);p.Subtract(this.velocity),p.Multiply(-this.linearDrag*s),e.ApplyForce(p,i),e.ApplyTorque(-e.GetInertia()/e.GetMass()*s*e.GetAngularVelocity()*this.angularDrag)}}}}},o.prototype.Draw=function(t){var e=1e3,o=new n,s=new n;o.x=this.normal.x*this.offset+this.normal.y*e,o.y=this.normal.y*this.offset-this.normal.x*e,s.x=this.normal.x*this.offset-this.normal.y*e,s.y=this.normal.y*this.offset+this.normal.x*e;var r=new i(0,0,1);t.DrawSegment(o,s,r)},Box2D.inherit(s,Box2D.Dynamics.Controllers.b2Controller),s.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,s.b2ConstantAccelController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new n(0,0)},s.prototype.Step=function(t){for(var e=new n(this.A.x*t.dt,this.A.y*t.dt),i=this.m_bodyList;i;i=i.nextBody){var o=i.body;o.IsAwake()&&o.SetLinearVelocity(new n(o.GetLinearVelocity().x+e.x,o.GetLinearVelocity().y+e.y))}},Box2D.inherit(r,Box2D.Dynamics.Controllers.b2Controller),r.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantForceController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new n(0,0)},r.prototype.Step=function(){for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;e.IsAwake()&&e.ApplyForce(this.F,e.GetWorldCenter())}},a.b2Controller=function(){},a.prototype.Step=function(){},a.prototype.Draw=function(){},a.prototype.AddBody=function(t){var e=new l;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},a.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},a.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetWorld=function(){return this.m_world},a.prototype.GetBodyList=function(){return this.m_bodyList},l.b2ControllerEdge=function(){},Box2D.inherit(c,Box2D.Dynamics.Controllers.b2Controller),c.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,c.b2GravityController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},c.prototype.Step=function(){var t=null,e=null,i=null,o=0,s=null,r=null,a=null,l=0,c=0,u=0,h=null;if(this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,i=e.GetWorldCenter(),o=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-i.x,c=a.y-i.y,u=l*l+c*c,Number.MIN_VALUE>u||(h=new n(l,c),h.Multiply(this.G/u/Math.sqrt(u)*o*r.GetMass()),e.IsAwake()&&e.ApplyForce(h,i),h.Multiply(-1),r.IsAwake()&&r.ApplyForce(h,a));else for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,i=e.GetWorldCenter(),o=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-i.x,c=a.y-i.y,u=l*l+c*c,Number.MIN_VALUE>u||(h=new n(l,c),h.Multiply(this.G/u*o*r.GetMass()),e.IsAwake()&&e.ApplyForce(h,i),h.Multiply(-1),r.IsAwake()&&r.ApplyForce(h,a))},Box2D.inherit(u,Box2D.Dynamics.Controllers.b2Controller),u.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,u.b2TensorDampingController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},u.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},u.prototype.Step=function(t){var i=t.dt;if(!(Number.MIN_VALUE>=i)){i>this.maxTimestep&&this.maxTimestep>0&&(i=this.maxTimestep);for(var o=this.m_bodyList;o;o=o.nextBody){var s=o.body;if(s.IsAwake()){var r=s.GetWorldVector(e.MulMV(this.T,s.GetLocalVector(s.GetLinearVelocity())));s.SetLinearVelocity(new n(s.GetLinearVelocity().x+r.x*i,s.GetLinearVelocity().y+r.y*i))}}}}}(),function(){var t=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),e=Box2D.Common.Math.b2Mat22,n=Box2D.Common.Math.b2Mat33,i=Box2D.Common.Math.b2Math,o=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),s=Box2D.Common.Math.b2Vec3,r=Box2D.Dynamics.Joints.b2DistanceJoint,a=Box2D.Dynamics.Joints.b2DistanceJointDef,l=Box2D.Dynamics.Joints.b2FrictionJoint,c=Box2D.Dynamics.Joints.b2FrictionJointDef,u=Box2D.Dynamics.Joints.b2GearJoint,h=Box2D.Dynamics.Joints.b2GearJointDef,p=Box2D.Dynamics.Joints.b2Jacobian,m=Box2D.Dynamics.Joints.b2Joint,f=Box2D.Dynamics.Joints.b2JointDef,d=Box2D.Dynamics.Joints.b2JointEdge,y=Box2D.Dynamics.Joints.b2LineJoint,_=Box2D.Dynamics.Joints.b2LineJointDef,g=Box2D.Dynamics.Joints.b2MouseJoint,x=Box2D.Dynamics.Joints.b2MouseJointDef,v=Box2D.Dynamics.Joints.b2PrismaticJoint,b=Box2D.Dynamics.Joints.b2PrismaticJointDef,w=Box2D.Dynamics.Joints.b2PulleyJoint,C=Box2D.Dynamics.Joints.b2PulleyJointDef,S=Box2D.Dynamics.Joints.b2RevoluteJoint,A=Box2D.Dynamics.Joints.b2RevoluteJointDef,D=Box2D.Dynamics.Joints.b2WeldJoint,B=Box2D.Dynamics.Joints.b2WeldJointDef;Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.inherit(r,Box2D.Dynamics.Joints.b2Joint),r.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,r.b2DistanceJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u=new o},r.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},r.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},r.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},r.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},r.prototype.GetLength=function(){return this.m_length},r.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},r.prototype.GetFrequency=function(){return this.m_frequencyHz},r.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},r.prototype.GetDampingRatio=function(){return this.m_dampingRatio},r.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},r.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},r.prototype.InitVelocityConstraints=function(e){var n,i=0,o=this.m_bodyA,s=this.m_bodyB;n=o.m_xf.R;var r=this.m_localAnchor1.x-o.m_sweep.localCenter.x,a=this.m_localAnchor1.y-o.m_sweep.localCenter.y;i=n.col1.x*r+n.col2.x*a,a=n.col1.y*r+n.col2.y*a,r=i,n=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;i=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=i,this.m_u.x=s.m_sweep.c.x+l-o.m_sweep.c.x-r,this.m_u.y=s.m_sweep.c.y+c-o.m_sweep.c.y-a;var u=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);u>t.b2_linearSlop?this.m_u.Multiply(1/u):this.m_u.SetZero();var h=r*this.m_u.y-a*this.m_u.x,p=l*this.m_u.y-c*this.m_u.x,m=o.m_invMass+o.m_invI*h*h+s.m_invMass+s.m_invI*p*p;if(this.m_mass=0!=m?1/m:0,this.m_frequencyHz>0){var f=u-this.m_length,d=2*Math.PI*this.m_frequencyHz,y=2*this.m_mass*this.m_dampingRatio*d,_=this.m_mass*d*d;this.m_gamma=e.dt*(y+e.dt*_),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*e.dt*_*this.m_gamma,this.m_mass=m+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}if(e.warmStarting){this.m_impulse*=e.dtRatio;var g=this.m_impulse*this.m_u.x,x=this.m_impulse*this.m_u.y;o.m_linearVelocity.x-=o.m_invMass*g,o.m_linearVelocity.y-=o.m_invMass*x,o.m_angularVelocity-=o.m_invI*(r*x-a*g),s.m_linearVelocity.x+=s.m_invMass*g,s.m_linearVelocity.y+=s.m_invMass*x,s.m_angularVelocity+=s.m_invI*(l*x-c*g)}else this.m_impulse=0},r.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var i=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*i+t.col2.x*o;o=t.col1.y*i+t.col2.y*o,i=s,t=n.m_xf.R;var r=this.m_localAnchor2.x-n.m_sweep.localCenter.x,a=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_linearVelocity.x+-e.m_angularVelocity*o,c=e.m_linearVelocity.y+e.m_angularVelocity*i,u=n.m_linearVelocity.x+-n.m_angularVelocity*a,h=n.m_linearVelocity.y+n.m_angularVelocity*r,p=this.m_u.x*(u-l)+this.m_u.y*(h-c),m=-this.m_mass*(p+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=m;var f=m*this.m_u.x,d=m*this.m_u.y;e.m_linearVelocity.x-=e.m_invMass*f,e.m_linearVelocity.y-=e.m_invMass*d,e.m_angularVelocity-=e.m_invI*(i*d-o*f),n.m_linearVelocity.x+=n.m_invMass*f,n.m_linearVelocity.y+=n.m_invMass*d,n.m_angularVelocity+=n.m_invI*(r*d-a*f)},r.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var n;if(this.m_frequencyHz>0)return!0;var o=this.m_bodyA,s=this.m_bodyB;n=o.m_xf.R;var r=this.m_localAnchor1.x-o.m_sweep.localCenter.x,a=this.m_localAnchor1.y-o.m_sweep.localCenter.y,l=n.col1.x*r+n.col2.x*a;a=n.col1.y*r+n.col2.y*a,r=l,n=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,u=this.m_localAnchor2.y-s.m_sweep.localCenter.y;l=n.col1.x*c+n.col2.x*u,u=n.col1.y*c+n.col2.y*u,c=l;var h=s.m_sweep.c.x+c-o.m_sweep.c.x-r,p=s.m_sweep.c.y+u-o.m_sweep.c.y-a,m=Math.sqrt(h*h+p*p);h/=m,p/=m;var f=m-this.m_length;f=i.Clamp(f,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var d=-this.m_mass*f;this.m_u.Set(h,p);var y=d*this.m_u.x,_=d*this.m_u.y;return o.m_sweep.c.x-=o.m_invMass*y,o.m_sweep.c.y-=o.m_invMass*_,o.m_sweep.a-=o.m_invI*(r*_-a*y),s.m_sweep.c.x+=s.m_invMass*y,s.m_sweep.c.y+=s.m_invMass*_,s.m_sweep.a+=s.m_invI*(c*_-u*y),o.SynchronizeTransform(),s.SynchronizeTransform(),i.Abs(f)<t.b2_linearSlop},Box2D.inherit(a,Box2D.Dynamics.Joints.b2JointDef),a.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,a.b2DistanceJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},a.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},a.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i));var o=i.x-n.x,s=i.y-n.y;this.length=Math.sqrt(o*o+s*s),this.frequencyHz=0,this.dampingRatio=0},Box2D.inherit(l,Box2D.Dynamics.Joints.b2Joint),l.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,l.b2FrictionJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_linearMass=new e,this.m_linearImpulse=new o},l.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},l.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},l.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},l.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},l.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},l.prototype.GetMaxForce=function(){return this.m_maxForce},l.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},l.prototype.GetMaxTorque=function(){return this.m_maxTorque},l.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},l.prototype.InitVelocityConstraints=function(t){var n,i=0,o=this.m_bodyA,s=this.m_bodyB;n=o.m_xf.R;var r=this.m_localAnchorA.x-o.m_sweep.localCenter.x,a=this.m_localAnchorA.y-o.m_sweep.localCenter.y;i=n.col1.x*r+n.col2.x*a,a=n.col1.y*r+n.col2.y*a,r=i,n=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;i=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=i;var u=o.m_invMass,h=s.m_invMass,p=o.m_invI,m=s.m_invI,f=new e;if(f.col1.x=u+h,f.col2.x=0,f.col1.y=0,f.col2.y=u+h,f.col1.x+=p*a*a,f.col2.x+=-p*r*a,f.col1.y+=-p*r*a,f.col2.y+=p*r*r,f.col1.x+=m*c*c,f.col2.x+=-m*l*c,f.col1.y+=-m*l*c,f.col2.y+=m*l*l,f.GetInverse(this.m_linearMass),this.m_angularMass=p+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var d=this.m_linearImpulse;o.m_linearVelocity.x-=u*d.x,o.m_linearVelocity.y-=u*d.y,o.m_angularVelocity-=p*(r*d.y-a*d.x+this.m_angularImpulse),s.m_linearVelocity.x+=h*d.x,s.m_linearVelocity.y+=h*d.y,s.m_angularVelocity+=m*(l*d.y-c*d.x+this.m_angularImpulse)
}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},l.prototype.SolveVelocityConstraints=function(t){var e,n=0,s=this.m_bodyA,r=this.m_bodyB,a=s.m_linearVelocity,l=s.m_angularVelocity,c=r.m_linearVelocity,u=r.m_angularVelocity,h=s.m_invMass,p=r.m_invMass,m=s.m_invI,f=r.m_invI;e=s.m_xf.R;var d=this.m_localAnchorA.x-s.m_sweep.localCenter.x,y=this.m_localAnchorA.y-s.m_sweep.localCenter.y;n=e.col1.x*d+e.col2.x*y,y=e.col1.y*d+e.col2.y*y,d=n,e=r.m_xf.R;var _=this.m_localAnchorB.x-r.m_sweep.localCenter.x,g=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*_+e.col2.x*g,g=e.col1.y*_+e.col2.y*g,_=n;var x=0,v=u-l,b=-this.m_angularMass*v,w=this.m_angularImpulse;x=t.dt*this.m_maxTorque,this.m_angularImpulse=i.Clamp(this.m_angularImpulse+b,-x,x),b=this.m_angularImpulse-w,l-=m*b,u+=f*b;var C=c.x-u*g-a.x+l*y,S=c.y+u*_-a.y-l*d,A=i.MulMV(this.m_linearMass,new o(-C,-S)),D=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(A),x=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>x*x&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(x)),A=i.SubtractVV(this.m_linearImpulse,D),a.x-=h*A.x,a.y-=h*A.y,l-=m*(d*A.y-y*A.x),c.x+=p*A.x,c.y+=p*A.y,u+=f*(_*A.y-g*A.x),s.m_angularVelocity=l,r.m_angularVelocity=u},l.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},Box2D.inherit(c,Box2D.Dynamics.Joints.b2JointDef),c.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,c.b2FrictionJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},c.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_frictionJoint,this.maxForce=0,this.maxTorque=0},c.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n))},Box2D.inherit(u,Box2D.Dynamics.Joints.b2Joint),u.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,u.b2GearJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_J=new p},u.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},u.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},u.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},u.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,n=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,i=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,o=e.col1.x*n+e.col2.x*i;i=e.col1.y*n+e.col2.y*i,n=o;var s=this.m_impulse*this.m_J.linearB.x,r=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-n*r+i*s)},u.prototype.GetRatio=function(){return this.m_ratio},u.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},u.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),n=parseInt(t.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var i=0,o=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==m.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof S?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),i=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof v?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),i=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),n==m.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof S?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),o=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof v?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),o=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=i+this.m_ratio*o,this.m_impulse=0},u.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_ground1,o=this.m_ground2,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,u=0,h=0,p=0,m=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,m+=s.m_invI):(e=i.m_xf.R,n=this.m_prismatic1.m_localXAxis1,a=e.col1.x*n.x+e.col2.x*n.y,l=e.col1.y*n.x+e.col2.y*n.y,e=s.m_xf.R,c=this.m_localAnchor1.x-s.m_sweep.localCenter.x,u=this.m_localAnchor1.y-s.m_sweep.localCenter.y,p=e.col1.x*c+e.col2.x*u,u=e.col1.y*c+e.col2.y*u,c=p,h=c*l-u*a,this.m_J.linearA.Set(-a,-l),this.m_J.angularA=-h,m+=s.m_invMass+s.m_invI*h*h),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,m+=this.m_ratio*this.m_ratio*r.m_invI):(e=o.m_xf.R,n=this.m_prismatic2.m_localXAxis1,a=e.col1.x*n.x+e.col2.x*n.y,l=e.col1.y*n.x+e.col2.y*n.y,e=r.m_xf.R,c=this.m_localAnchor2.x-r.m_sweep.localCenter.x,u=this.m_localAnchor2.y-r.m_sweep.localCenter.y,p=e.col1.x*c+e.col2.x*u,u=e.col1.y*c+e.col2.y*u,c=p,h=c*l-u*a,this.m_J.linearB.Set(-this.m_ratio*a,-this.m_ratio*l),this.m_J.angularB=-this.m_ratio*h,m+=this.m_ratio*this.m_ratio*(r.m_invMass+r.m_invI*h*h)),this.m_mass=m>0?1/m:0,t.warmStarting?(s.m_linearVelocity.x+=s.m_invMass*this.m_impulse*this.m_J.linearA.x,s.m_linearVelocity.y+=s.m_invMass*this.m_impulse*this.m_J.linearA.y,s.m_angularVelocity+=s.m_invI*this.m_impulse*this.m_J.angularA,r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linearB.x,r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linearB.y,r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},u.prototype.SolveVelocityConstraints=function(){var t=this.m_bodyA,e=this.m_bodyB,n=this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity),i=-this.m_mass*n;this.m_impulse+=i,t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*i*this.m_J.angularA,e.m_linearVelocity.x+=e.m_invMass*i*this.m_J.linearB.x,e.m_linearVelocity.y+=e.m_invMass*i*this.m_J.linearB.y,e.m_angularVelocity+=e.m_invI*i*this.m_J.angularB},u.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var n=0,i=this.m_bodyA,o=this.m_bodyB,s=0,r=0;s=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),r=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();var a=this.m_constant-(s+this.m_ratio*r),l=-this.m_mass*a;return i.m_sweep.c.x+=i.m_invMass*l*this.m_J.linearA.x,i.m_sweep.c.y+=i.m_invMass*l*this.m_J.linearA.y,i.m_sweep.a+=i.m_invI*l*this.m_J.angularA,o.m_sweep.c.x+=o.m_invMass*l*this.m_J.linearB.x,o.m_sweep.c.y+=o.m_invMass*l*this.m_J.linearB.y,o.m_sweep.a+=o.m_invI*l*this.m_J.angularB,i.SynchronizeTransform(),o.SynchronizeTransform(),t.b2_linearSlop>n},Box2D.inherit(h,Box2D.Dynamics.Joints.b2JointDef),h.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,h.b2GearJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},h.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},p.b2Jacobian=function(){this.linearA=new o,this.linearB=new o},p.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},p.prototype.Set=function(t,e,n,i){void 0===e&&(e=0),void 0===i&&(i=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(n),this.angularB=i},p.prototype.Compute=function(t,e,n,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*n.x+this.linearB.y*n.y)+this.angularB*i},m.b2Joint=function(){this.m_edgeA=new d,this.m_edgeB=new d,this.m_localCenterA=new o,this.m_localCenterB=new o},m.prototype.GetType=function(){return this.m_type},m.prototype.GetAnchorA=function(){return null},m.prototype.GetAnchorB=function(){return null},m.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),null},m.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},m.prototype.GetBodyA=function(){return this.m_bodyA},m.prototype.GetBodyB=function(){return this.m_bodyB},m.prototype.GetNext=function(){return this.m_next},m.prototype.GetUserData=function(){return this.m_userData},m.prototype.SetUserData=function(t){this.m_userData=t},m.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},m.Create=function(t){var e=null;switch(t.type){case m.e_distanceJoint:e=new r(t instanceof a?t:null);break;case m.e_mouseJoint:e=new g(t instanceof x?t:null);break;case m.e_prismaticJoint:e=new v(t instanceof b?t:null);break;case m.e_revoluteJoint:e=new S(t instanceof A?t:null);break;case m.e_pulleyJoint:e=new w(t instanceof C?t:null);break;case m.e_gearJoint:e=new u(t instanceof h?t:null);break;case m.e_lineJoint:e=new y(t instanceof _?t:null);break;case m.e_weldJoint:e=new D(t instanceof B?t:null);break;case m.e_frictionJoint:e=new l(t instanceof c?t:null);break;default:}return e},m.Destroy=function(){},m.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},m.prototype.InitVelocityConstraints=function(){},m.prototype.SolveVelocityConstraints=function(){},m.prototype.FinalizeVelocityConstraints=function(){},m.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!1},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2Joint.e_unknownJoint=0,Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint=1,Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint=2,Box2D.Dynamics.Joints.b2Joint.e_distanceJoint=3,Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint=4,Box2D.Dynamics.Joints.b2Joint.e_mouseJoint=5,Box2D.Dynamics.Joints.b2Joint.e_gearJoint=6,Box2D.Dynamics.Joints.b2Joint.e_lineJoint=7,Box2D.Dynamics.Joints.b2Joint.e_weldJoint=8,Box2D.Dynamics.Joints.b2Joint.e_frictionJoint=9,Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit=0,Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit=1,Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit=2,Box2D.Dynamics.Joints.b2Joint.e_equalLimits=3}),f.b2JointDef=function(){},f.prototype.b2JointDef=function(){this.type=m.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},d.b2JointEdge=function(){},Box2D.inherit(y,Box2D.Dynamics.Joints.b2Joint),y.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,y.b2LineJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new e,this.m_impulse=new o},y.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},y.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},y.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},y.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},y.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.GetWorldPoint(this.m_localAnchor1),i=e.GetWorldPoint(this.m_localAnchor2),o=i.x-n.x,s=i.y-n.y,r=t.GetWorldVector(this.m_localXAxis1),a=r.x*o+r.y*s;return a},y.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var i=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*i+t.col2.x*o;o=t.col1.y*i+t.col2.y*o,i=s,t=n.m_xf.R;var r=this.m_localAnchor2.x-n.m_sweep.localCenter.x,a=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+i,c=e.m_sweep.c.y+o,u=n.m_sweep.c.x+r,h=n.m_sweep.c.y+a,p=u-l,m=h-c,f=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,y=n.m_linearVelocity,_=e.m_angularVelocity,g=n.m_angularVelocity,x=p*-_*f.y+m*_*f.x+(f.x*(y.x+-g*a-d.x- -_*o)+f.y*(y.y+g*r-d.y-_*i));return x},y.prototype.IsLimitEnabled=function(){return this.m_enableLimit},y.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},y.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},y.prototype.GetUpperLimit=function(){return this.m_upperTranslation},y.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},y.prototype.IsMotorEnabled=function(){return this.m_enableMotor},y.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},y.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},y.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},y.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},y.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},y.prototype.GetMotorForce=function(){return this.m_motorImpulse},y.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},y.prototype.InitVelocityConstraints=function(e){var n,o=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(o.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=o.GetTransform();s.GetTransform(),n=o.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=r,n=s.m_xf.R;var u=this.m_localAnchor2.x-this.m_localCenterB.x,h=this.m_localAnchor2.y-this.m_localCenterB.y;r=n.col1.x*u+n.col2.x*h,h=n.col1.y*u+n.col2.y*h,u=r;var p=s.m_sweep.c.x+u-o.m_sweep.c.x-l,f=s.m_sweep.c.y+h-o.m_sweep.c.y-c;this.m_invMassA=o.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=o.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(i.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(p+l)*this.m_axis.y-(f+c)*this.m_axis.x,this.m_a2=u*this.m_axis.y-h*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(i.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(p+l)*this.m_perp.y-(f+c)*this.m_perp.x,this.m_s2=u*this.m_perp.y-h*this.m_perp.x;var d=this.m_invMassA,y=this.m_invMassB,_=this.m_invIA,g=this.m_invIB;if(this.m_K.col1.x=d+y+_*this.m_s1*this.m_s1+g*this.m_s2*this.m_s2,this.m_K.col1.y=_*this.m_s1*this.m_a1+g*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=d+y+_*this.m_a1*this.m_a1+g*this.m_a2*this.m_a2,this.m_enableLimit){var x=this.m_axis.x*p+this.m_axis.y*f;i.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=m.e_equalLimits:this.m_lowerTranslation>=x?this.m_limitState!=m.e_atLowerLimit&&(this.m_limitState=m.e_atLowerLimit,this.m_impulse.y=0):x>=this.m_upperTranslation?this.m_limitState!=m.e_atUpperLimit&&(this.m_limitState=m.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=m.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var v=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,b=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,w=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,C=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;o.m_linearVelocity.x-=this.m_invMassA*v,o.m_linearVelocity.y-=this.m_invMassA*b,o.m_angularVelocity-=this.m_invIA*w,s.m_linearVelocity.x+=this.m_invMassB*v,s.m_linearVelocity.y+=this.m_invMassB*b,s.m_angularVelocity+=this.m_invIB*C}else this.m_impulse.SetZero(),this.m_motorImpulse=0},y.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,n=this.m_bodyB,s=e.m_linearVelocity,r=e.m_angularVelocity,a=n.m_linearVelocity,l=n.m_angularVelocity,c=0,u=0,h=0,p=0;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var f=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,d=this.m_motorMass*(this.m_motorSpeed-f),y=this.m_motorImpulse,_=t.dt*this.m_maxMotorForce;this.m_motorImpulse=i.Clamp(this.m_motorImpulse+d,-_,_),d=this.m_motorImpulse-y,c=d*this.m_axis.x,u=d*this.m_axis.y,h=d*this.m_a1,p=d*this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*u,r-=this.m_invIA*h,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*u,l+=this.m_invIB*p}var g=this.m_perp.x*(a.x-s.x)+this.m_perp.y*(a.y-s.y)+this.m_s2*l-this.m_s1*r;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var x=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,v=this.m_impulse.Copy(),b=this.m_K.Solve(new o,-g,-x);this.m_impulse.Add(b),this.m_limitState==m.e_atLowerLimit?this.m_impulse.y=i.Max(this.m_impulse.y,0):this.m_limitState==m.e_atUpperLimit&&(this.m_impulse.y=i.Min(this.m_impulse.y,0));var w=-g-(this.m_impulse.y-v.y)*this.m_K.col2.x,C=0;C=0!=this.m_K.col1.x?w/this.m_K.col1.x+v.x:v.x,this.m_impulse.x=C,b.x=this.m_impulse.x-v.x,b.y=this.m_impulse.y-v.y,c=b.x*this.m_perp.x+b.y*this.m_axis.x,u=b.x*this.m_perp.y+b.y*this.m_axis.y,h=b.x*this.m_s1+b.y*this.m_a1,p=b.x*this.m_s2+b.y*this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*u,r-=this.m_invIA*h,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*u,l+=this.m_invIB*p}else{var S=0;S=0!=this.m_K.col1.x?-g/this.m_K.col1.x:0,this.m_impulse.x+=S,c=S*this.m_perp.x,u=S*this.m_perp.y,h=S*this.m_s1,p=S*this.m_s2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*u,r-=this.m_invIA*h,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*u,l+=this.m_invIB*p}e.m_linearVelocity.SetV(s),e.m_angularVelocity=r,n.m_linearVelocity.SetV(a),n.m_angularVelocity=l},y.prototype.SolvePositionConstraints=function(n){void 0===n&&(n=0);var s,r=this.m_bodyA,a=this.m_bodyB,l=r.m_sweep.c,c=r.m_sweep.a,u=a.m_sweep.c,h=a.m_sweep.a,p=0,m=0,f=0,d=0,y=0,_=0,g=0,x=!1,v=0,b=e.FromAngle(c),w=e.FromAngle(h);s=b;var C=this.m_localAnchor1.x-this.m_localCenterA.x,S=this.m_localAnchor1.y-this.m_localCenterA.y;p=s.col1.x*C+s.col2.x*S,S=s.col1.y*C+s.col2.y*S,C=p,s=w;var A=this.m_localAnchor2.x-this.m_localCenterB.x,D=this.m_localAnchor2.y-this.m_localCenterB.y;p=s.col1.x*A+s.col2.x*D,D=s.col1.y*A+s.col2.y*D,A=p;var B=u.x+A-l.x-C,E=u.y+D-l.y-S;if(this.m_enableLimit){this.m_axis=i.MulMV(b,this.m_localXAxis1),this.m_a1=(B+C)*this.m_axis.y-(E+S)*this.m_axis.x,this.m_a2=A*this.m_axis.y-D*this.m_axis.x;var k=this.m_axis.x*B+this.m_axis.y*E;i.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(v=i.Clamp(k,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),_=i.Abs(k),x=!0):this.m_lowerTranslation>=k?(v=i.Clamp(k-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),_=this.m_lowerTranslation-k,x=!0):k>=this.m_upperTranslation&&(v=i.Clamp(k-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),_=k-this.m_upperTranslation,x=!0)}this.m_perp=i.MulMV(b,this.m_localYAxis1),this.m_s1=(B+C)*this.m_perp.y-(E+S)*this.m_perp.x,this.m_s2=A*this.m_perp.y-D*this.m_perp.x;var T=new o,M=this.m_perp.x*B+this.m_perp.y*E;if(_=i.Max(_,i.Abs(M)),g=0,x)m=this.m_invMassA,f=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,this.m_K.col1.x=m+f+d*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=m+f+d*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_K.Solve(T,-M,-v);else{m=this.m_invMassA,f=this.m_invMassB,d=this.m_invIA,y=this.m_invIB;var L=m+f+d*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,I=0;I=0!=L?-M/L:0,T.x=I,T.y=0}var j=T.x*this.m_perp.x+T.y*this.m_axis.x,P=T.x*this.m_perp.y+T.y*this.m_axis.y,V=T.x*this.m_s1+T.y*this.m_a1,R=T.x*this.m_s2+T.y*this.m_a2;return l.x-=this.m_invMassA*j,l.y-=this.m_invMassA*P,c-=this.m_invIA*V,u.x+=this.m_invMassB*j,u.y+=this.m_invMassB*P,h+=this.m_invIB*R,r.m_sweep.a=c,a.m_sweep.a=h,r.SynchronizeTransform(),a.SynchronizeTransform(),t.b2_linearSlop>=_&&t.b2_angularSlop>=g},Box2D.inherit(_,Box2D.Dynamics.Joints.b2JointDef),_.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,_.b2LineJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},_.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},_.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(i)},Box2D.inherit(g,Box2D.Dynamics.Joints.b2Joint),g.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,g.b2MouseJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new o,this.m_target=new o,this.m_impulse=new o,this.m_mass=new e,this.m_C=new o},g.prototype.GetAnchorA=function(){return this.m_target},g.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},g.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},g.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},g.prototype.GetTarget=function(){return this.m_target},g.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},g.prototype.GetMaxForce=function(){return this.m_maxForce},g.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},g.prototype.GetFrequency=function(){return this.m_frequencyHz},g.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},g.prototype.GetDampingRatio=function(){return this.m_dampingRatio},g.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},g.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,n=this.m_target.y-this.m_bodyB.m_xf.position.y,i=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*i.col1.x+n*i.col1.y,this.m_localAnchor.y=e*i.col2.x+n*i.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},g.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,n=e.GetMass(),i=2*Math.PI*this.m_frequencyHz,o=2*n*this.m_dampingRatio*i,s=n*i*i;this.m_gamma=t.dt*(o+t.dt*s),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*s*this.m_gamma;var r;r=e.m_xf.R;var a=this.m_localAnchor.x-e.m_sweep.localCenter.x,l=this.m_localAnchor.y-e.m_sweep.localCenter.y,c=r.col1.x*a+r.col2.x*l;l=r.col1.y*a+r.col2.y*l,a=c;var u=e.m_invMass,h=e.m_invI;this.K1.col1.x=u,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=u,this.K2.col1.x=h*l*l,this.K2.col2.x=-h*a*l,this.K2.col1.y=-h*a*l,this.K2.col2.y=h*a*a,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+a-this.m_target.x,this.m_C.y=e.m_sweep.c.y+l-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=u*this.m_impulse.x,e.m_linearVelocity.y+=u*this.m_impulse.y,e.m_angularVelocity+=h*(a*this.m_impulse.y-l*this.m_impulse.x)},g.prototype.SolveVelocityConstraints=function(t){var e,n=this.m_bodyB,i=0,o=0;e=n.m_xf.R;var s=this.m_localAnchor.x-n.m_sweep.localCenter.x,r=this.m_localAnchor.y-n.m_sweep.localCenter.y;i=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=i;var a=n.m_linearVelocity.x+-n.m_angularVelocity*r,l=n.m_linearVelocity.y+n.m_angularVelocity*s;e=this.m_mass,i=a+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,o=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var c=-(e.col1.x*i+e.col2.x*o),u=-(e.col1.y*i+e.col2.y*o),h=this.m_impulse.x,p=this.m_impulse.y;this.m_impulse.x+=c,this.m_impulse.y+=u;var m=t.dt*this.m_maxForce;this.m_impulse.LengthSquared()>m*m&&this.m_impulse.Multiply(m/this.m_impulse.Length()),c=this.m_impulse.x-h,u=this.m_impulse.y-p,n.m_linearVelocity.x+=n.m_invMass*c,n.m_linearVelocity.y+=n.m_invMass*u,n.m_angularVelocity+=n.m_invI*(s*u-r*c)},g.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},Box2D.inherit(x,Box2D.Dynamics.Joints.b2JointDef),x.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,x.b2MouseJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new o},x.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},Box2D.inherit(v,Box2D.Dynamics.Joints.b2Joint),v.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,v.b2PrismaticJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new n,this.m_impulse=new s},v.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},v.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},v.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},v.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},v.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.GetWorldPoint(this.m_localAnchor1),i=e.GetWorldPoint(this.m_localAnchor2),o=i.x-n.x,s=i.y-n.y,r=t.GetWorldVector(this.m_localXAxis1),a=r.x*o+r.y*s;return a},v.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var i=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*i+t.col2.x*o;o=t.col1.y*i+t.col2.y*o,i=s,t=n.m_xf.R;var r=this.m_localAnchor2.x-n.m_sweep.localCenter.x,a=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+i,c=e.m_sweep.c.y+o,u=n.m_sweep.c.x+r,h=n.m_sweep.c.y+a,p=u-l,m=h-c,f=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,y=n.m_linearVelocity,_=e.m_angularVelocity,g=n.m_angularVelocity,x=p*-_*f.y+m*_*f.x+(f.x*(y.x+-g*a-d.x- -_*o)+f.y*(y.y+g*r-d.y-_*i));return x},v.prototype.IsLimitEnabled=function(){return this.m_enableLimit},v.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},v.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},v.prototype.GetUpperLimit=function(){return this.m_upperTranslation},v.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},v.prototype.IsMotorEnabled=function(){return this.m_enableMotor},v.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},v.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},v.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},v.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},v.prototype.GetMotorForce=function(){return this.m_motorImpulse},v.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},v.prototype.InitVelocityConstraints=function(e){var n,o=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(o.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=o.GetTransform();s.GetTransform(),n=o.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=r,n=s.m_xf.R;var u=this.m_localAnchor2.x-this.m_localCenterB.x,h=this.m_localAnchor2.y-this.m_localCenterB.y;r=n.col1.x*u+n.col2.x*h,h=n.col1.y*u+n.col2.y*h,u=r;var p=s.m_sweep.c.x+u-o.m_sweep.c.x-l,f=s.m_sweep.c.y+h-o.m_sweep.c.y-c;this.m_invMassA=o.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=o.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(i.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(p+l)*this.m_axis.y-(f+c)*this.m_axis.x,this.m_a2=u*this.m_axis.y-h*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(i.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(p+l)*this.m_perp.y-(f+c)*this.m_perp.x,this.m_s2=u*this.m_perp.y-h*this.m_perp.x;var d=this.m_invMassA,y=this.m_invMassB,_=this.m_invIA,g=this.m_invIB;if(this.m_K.col1.x=d+y+_*this.m_s1*this.m_s1+g*this.m_s2*this.m_s2,this.m_K.col1.y=_*this.m_s1+g*this.m_s2,this.m_K.col1.z=_*this.m_s1*this.m_a1+g*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=_+g,this.m_K.col2.z=_*this.m_a1+g*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=d+y+_*this.m_a1*this.m_a1+g*this.m_a2*this.m_a2,this.m_enableLimit){var x=this.m_axis.x*p+this.m_axis.y*f;i.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=m.e_equalLimits:this.m_lowerTranslation>=x?this.m_limitState!=m.e_atLowerLimit&&(this.m_limitState=m.e_atLowerLimit,this.m_impulse.z=0):x>=this.m_upperTranslation?this.m_limitState!=m.e_atUpperLimit&&(this.m_limitState=m.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=m.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var v=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,b=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,w=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,C=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;
o.m_linearVelocity.x-=this.m_invMassA*v,o.m_linearVelocity.y-=this.m_invMassA*b,o.m_angularVelocity-=this.m_invIA*w,s.m_linearVelocity.x+=this.m_invMassB*v,s.m_linearVelocity.y+=this.m_invMassB*b,s.m_angularVelocity+=this.m_invIB*C}else this.m_impulse.SetZero(),this.m_motorImpulse=0},v.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,n=this.m_bodyB,r=e.m_linearVelocity,a=e.m_angularVelocity,l=n.m_linearVelocity,c=n.m_angularVelocity,u=0,h=0,p=0,f=0;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var d=this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a,y=this.m_motorMass*(this.m_motorSpeed-d),_=this.m_motorImpulse,g=t.dt*this.m_maxMotorForce;this.m_motorImpulse=i.Clamp(this.m_motorImpulse+y,-g,g),y=this.m_motorImpulse-_,u=y*this.m_axis.x,h=y*this.m_axis.y,p=y*this.m_a1,f=y*this.m_a2,r.x-=this.m_invMassA*u,r.y-=this.m_invMassA*h,a-=this.m_invIA*p,l.x+=this.m_invMassB*u,l.y+=this.m_invMassB*h,c+=this.m_invIB*f}var x=this.m_perp.x*(l.x-r.x)+this.m_perp.y*(l.y-r.y)+this.m_s2*c-this.m_s1*a,v=c-a;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var b=this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a,w=this.m_impulse.Copy(),C=this.m_K.Solve33(new s,-x,-v,-b);this.m_impulse.Add(C),this.m_limitState==m.e_atLowerLimit?this.m_impulse.z=i.Max(this.m_impulse.z,0):this.m_limitState==m.e_atUpperLimit&&(this.m_impulse.z=i.Min(this.m_impulse.z,0));var S=-x-(this.m_impulse.z-w.z)*this.m_K.col3.x,A=-v-(this.m_impulse.z-w.z)*this.m_K.col3.y,D=this.m_K.Solve22(new o,S,A);D.x+=w.x,D.y+=w.y,this.m_impulse.x=D.x,this.m_impulse.y=D.y,C.x=this.m_impulse.x-w.x,C.y=this.m_impulse.y-w.y,C.z=this.m_impulse.z-w.z,u=C.x*this.m_perp.x+C.z*this.m_axis.x,h=C.x*this.m_perp.y+C.z*this.m_axis.y,p=C.x*this.m_s1+C.y+C.z*this.m_a1,f=C.x*this.m_s2+C.y+C.z*this.m_a2,r.x-=this.m_invMassA*u,r.y-=this.m_invMassA*h,a-=this.m_invIA*p,l.x+=this.m_invMassB*u,l.y+=this.m_invMassB*h,c+=this.m_invIB*f}else{var B=this.m_K.Solve22(new o,-x,-v);this.m_impulse.x+=B.x,this.m_impulse.y+=B.y,u=B.x*this.m_perp.x,h=B.x*this.m_perp.y,p=B.x*this.m_s1+B.y,f=B.x*this.m_s2+B.y,r.x-=this.m_invMassA*u,r.y-=this.m_invMassA*h,a-=this.m_invIA*p,l.x+=this.m_invMassB*u,l.y+=this.m_invMassB*h,c+=this.m_invIB*f}e.m_linearVelocity.SetV(r),e.m_angularVelocity=a,n.m_linearVelocity.SetV(l),n.m_angularVelocity=c},v.prototype.SolvePositionConstraints=function(n){void 0===n&&(n=0);var r,a=this.m_bodyA,l=this.m_bodyB,c=a.m_sweep.c,u=a.m_sweep.a,h=l.m_sweep.c,p=l.m_sweep.a,m=0,f=0,d=0,y=0,_=0,g=0,x=0,v=!1,b=0,w=e.FromAngle(u),C=e.FromAngle(p);r=w;var S=this.m_localAnchor1.x-this.m_localCenterA.x,A=this.m_localAnchor1.y-this.m_localCenterA.y;m=r.col1.x*S+r.col2.x*A,A=r.col1.y*S+r.col2.y*A,S=m,r=C;var D=this.m_localAnchor2.x-this.m_localCenterB.x,B=this.m_localAnchor2.y-this.m_localCenterB.y;m=r.col1.x*D+r.col2.x*B,B=r.col1.y*D+r.col2.y*B,D=m;var E=h.x+D-c.x-S,k=h.y+B-c.y-A;if(this.m_enableLimit){this.m_axis=i.MulMV(w,this.m_localXAxis1),this.m_a1=(E+S)*this.m_axis.y-(k+A)*this.m_axis.x,this.m_a2=D*this.m_axis.y-B*this.m_axis.x;var T=this.m_axis.x*E+this.m_axis.y*k;i.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(b=i.Clamp(T,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),g=i.Abs(T),v=!0):this.m_lowerTranslation>=T?(b=i.Clamp(T-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),g=this.m_lowerTranslation-T,v=!0):T>=this.m_upperTranslation&&(b=i.Clamp(T-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),g=T-this.m_upperTranslation,v=!0)}this.m_perp=i.MulMV(w,this.m_localYAxis1),this.m_s1=(E+S)*this.m_perp.y-(k+A)*this.m_perp.x,this.m_s2=D*this.m_perp.y-B*this.m_perp.x;var M=new s,L=this.m_perp.x*E+this.m_perp.y*k,I=p-u-this.m_refAngle;if(g=i.Max(g,i.Abs(L)),x=i.Abs(I),v)f=this.m_invMassA,d=this.m_invMassB,y=this.m_invIA,_=this.m_invIB,this.m_K.col1.x=f+d+y*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+_*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+_,this.m_K.col2.z=y*this.m_a1+_*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=f+d+y*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_K.Solve33(M,-L,-I,-b);else{f=this.m_invMassA,d=this.m_invMassB,y=this.m_invIA,_=this.m_invIB;var j=f+d+y*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,P=y*this.m_s1+_*this.m_s2,V=y+_;this.m_K.col1.Set(j,P,0),this.m_K.col2.Set(P,V,0);var R=this.m_K.Solve22(new o,-L,-I);M.x=R.x,M.y=R.y,M.z=0}var N=M.x*this.m_perp.x+M.z*this.m_axis.x,O=M.x*this.m_perp.y+M.z*this.m_axis.y,F=M.x*this.m_s1+M.y+M.z*this.m_a1,G=M.x*this.m_s2+M.y+M.z*this.m_a2;return c.x-=this.m_invMassA*N,c.y-=this.m_invMassA*O,u-=this.m_invIA*F,h.x+=this.m_invMassB*N,h.y+=this.m_invMassB*O,p+=this.m_invIB*G,a.m_sweep.a=u,l.m_sweep.a=p,a.SynchronizeTransform(),l.SynchronizeTransform(),t.b2_linearSlop>=g&&t.b2_angularSlop>=x},Box2D.inherit(b,Box2D.Dynamics.Joints.b2JointDef),b.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,b.b2PrismaticJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},b.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},b.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(w,Box2D.Dynamics.Joints.b2Joint),w.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,w.b2PulleyJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u1=new o,this.m_u2=new o},w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},w.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},w.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,i=t.x-e,o=t.y-n;return Math.sqrt(i*i+o*o)},w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,i=t.x-e,o=t.y-n;return Math.sqrt(i*i+o*o)},w.prototype.GetRatio=function(){return this.m_ratio},w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t),this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=i.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength),this.m_maxLength2=i.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},w.prototype.InitVelocityConstraints=function(e){var n,i=this.m_bodyA,o=this.m_bodyB;n=i.m_xf.R;var s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=n.col1.x*s+n.col2.x*r;r=n.col1.y*s+n.col2.y*r,s=a,n=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=a;var u=i.m_sweep.c.x+s,h=i.m_sweep.c.y+r,p=o.m_sweep.c.x+l,f=o.m_sweep.c.y+c,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,y=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,_=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,g=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(u-d,h-y),this.m_u2.Set(p-_,f-g);var x=this.m_u1.Length(),v=this.m_u2.Length();x>t.b2_linearSlop?this.m_u1.Multiply(1/x):this.m_u1.SetZero(),v>t.b2_linearSlop?this.m_u2.Multiply(1/v):this.m_u2.SetZero();var b=this.m_constant-x-this.m_ratio*v;b>0?(this.m_state=m.e_inactiveLimit,this.m_impulse=0):this.m_state=m.e_atUpperLimit,this.m_maxLength1>x?(this.m_limitState1=m.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=m.e_atUpperLimit,this.m_maxLength2>v?(this.m_limitState2=m.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=m.e_atUpperLimit;var w=s*this.m_u1.y-r*this.m_u1.x,C=l*this.m_u2.y-c*this.m_u2.x;if(this.m_limitMass1=i.m_invMass+i.m_invI*w*w,this.m_limitMass2=o.m_invMass+o.m_invI*C*C,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var S=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,A=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,D=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,B=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;i.m_linearVelocity.x+=i.m_invMass*S,i.m_linearVelocity.y+=i.m_invMass*A,i.m_angularVelocity+=i.m_invI*(s*A-r*S),o.m_linearVelocity.x+=o.m_invMass*D,o.m_linearVelocity.y+=o.m_invMass*B,o.m_angularVelocity+=o.m_invI*(l*B-c*D)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},w.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,r=t.col1.x*o+t.col2.x*s;s=t.col1.y*o+t.col2.y*s,o=r,t=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;r=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=r;var c=0,u=0,h=0,p=0,f=0,d=0,y=0,_=0,g=0,x=0,v=0;this.m_state==m.e_atUpperLimit&&(c=e.m_linearVelocity.x+-e.m_angularVelocity*s,u=e.m_linearVelocity.y+e.m_angularVelocity*o,h=n.m_linearVelocity.x+-n.m_angularVelocity*l,p=n.m_linearVelocity.y+n.m_angularVelocity*a,g=-(this.m_u1.x*c+this.m_u1.y*u)-this.m_ratio*(this.m_u2.x*h+this.m_u2.y*p),x=this.m_pulleyMass*-g,v=this.m_impulse,this.m_impulse=i.Max(0,this.m_impulse+x),x=this.m_impulse-v,f=-x*this.m_u1.x,d=-x*this.m_u1.y,y=-this.m_ratio*x*this.m_u2.x,_=-this.m_ratio*x*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*f,e.m_linearVelocity.y+=e.m_invMass*d,e.m_angularVelocity+=e.m_invI*(o*d-s*f),n.m_linearVelocity.x+=n.m_invMass*y,n.m_linearVelocity.y+=n.m_invMass*_,n.m_angularVelocity+=n.m_invI*(a*_-l*y)),this.m_limitState1==m.e_atUpperLimit&&(c=e.m_linearVelocity.x+-e.m_angularVelocity*s,u=e.m_linearVelocity.y+e.m_angularVelocity*o,g=-(this.m_u1.x*c+this.m_u1.y*u),x=-this.m_limitMass1*g,v=this.m_limitImpulse1,this.m_limitImpulse1=i.Max(0,this.m_limitImpulse1+x),x=this.m_limitImpulse1-v,f=-x*this.m_u1.x,d=-x*this.m_u1.y,e.m_linearVelocity.x+=e.m_invMass*f,e.m_linearVelocity.y+=e.m_invMass*d,e.m_angularVelocity+=e.m_invI*(o*d-s*f)),this.m_limitState2==m.e_atUpperLimit&&(h=n.m_linearVelocity.x+-n.m_angularVelocity*l,p=n.m_linearVelocity.y+n.m_angularVelocity*a,g=-(this.m_u2.x*h+this.m_u2.y*p),x=-this.m_limitMass2*g,v=this.m_limitImpulse2,this.m_limitImpulse2=i.Max(0,this.m_limitImpulse2+x),x=this.m_limitImpulse2-v,y=-x*this.m_u2.x,_=-x*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*y,n.m_linearVelocity.y+=n.m_invMass*_,n.m_angularVelocity+=n.m_invI*(a*_-l*y))},w.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var n,o=this.m_bodyA,s=this.m_bodyB,r=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,a=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,l=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,c=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,u=0,h=0,p=0,f=0,d=0,y=0,_=0,g=0,x=0,v=0,b=0,w=0,C=0,S=0;return this.m_state==m.e_atUpperLimit&&(n=o.m_xf.R,u=this.m_localAnchor1.x-o.m_sweep.localCenter.x,h=this.m_localAnchor1.y-o.m_sweep.localCenter.y,C=n.col1.x*u+n.col2.x*h,h=n.col1.y*u+n.col2.y*h,u=C,n=s.m_xf.R,p=this.m_localAnchor2.x-s.m_sweep.localCenter.x,f=this.m_localAnchor2.y-s.m_sweep.localCenter.y,C=n.col1.x*p+n.col2.x*f,f=n.col1.y*p+n.col2.y*f,p=C,d=o.m_sweep.c.x+u,y=o.m_sweep.c.y+h,_=s.m_sweep.c.x+p,g=s.m_sweep.c.y+f,this.m_u1.Set(d-r,y-a),this.m_u2.Set(_-l,g-c),x=this.m_u1.Length(),v=this.m_u2.Length(),x>t.b2_linearSlop?this.m_u1.Multiply(1/x):this.m_u1.SetZero(),v>t.b2_linearSlop?this.m_u2.Multiply(1/v):this.m_u2.SetZero(),b=this.m_constant-x-this.m_ratio*v,S=i.Max(S,-b),b=i.Clamp(b+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_pulleyMass*b,d=-w*this.m_u1.x,y=-w*this.m_u1.y,_=-this.m_ratio*w*this.m_u2.x,g=-this.m_ratio*w*this.m_u2.y,o.m_sweep.c.x+=o.m_invMass*d,o.m_sweep.c.y+=o.m_invMass*y,o.m_sweep.a+=o.m_invI*(u*y-h*d),s.m_sweep.c.x+=s.m_invMass*_,s.m_sweep.c.y+=s.m_invMass*g,s.m_sweep.a+=s.m_invI*(p*g-f*_),o.SynchronizeTransform(),s.SynchronizeTransform()),this.m_limitState1==m.e_atUpperLimit&&(n=o.m_xf.R,u=this.m_localAnchor1.x-o.m_sweep.localCenter.x,h=this.m_localAnchor1.y-o.m_sweep.localCenter.y,C=n.col1.x*u+n.col2.x*h,h=n.col1.y*u+n.col2.y*h,u=C,d=o.m_sweep.c.x+u,y=o.m_sweep.c.y+h,this.m_u1.Set(d-r,y-a),x=this.m_u1.Length(),x>t.b2_linearSlop?(this.m_u1.x*=1/x,this.m_u1.y*=1/x):this.m_u1.SetZero(),b=this.m_maxLength1-x,S=i.Max(S,-b),b=i.Clamp(b+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_limitMass1*b,d=-w*this.m_u1.x,y=-w*this.m_u1.y,o.m_sweep.c.x+=o.m_invMass*d,o.m_sweep.c.y+=o.m_invMass*y,o.m_sweep.a+=o.m_invI*(u*y-h*d),o.SynchronizeTransform()),this.m_limitState2==m.e_atUpperLimit&&(n=s.m_xf.R,p=this.m_localAnchor2.x-s.m_sweep.localCenter.x,f=this.m_localAnchor2.y-s.m_sweep.localCenter.y,C=n.col1.x*p+n.col2.x*f,f=n.col1.y*p+n.col2.y*f,p=C,_=s.m_sweep.c.x+p,g=s.m_sweep.c.y+f,this.m_u2.Set(_-l,g-c),v=this.m_u2.Length(),v>t.b2_linearSlop?(this.m_u2.x*=1/v,this.m_u2.y*=1/v):this.m_u2.SetZero(),b=this.m_maxLength2-v,S=i.Max(S,-b),b=i.Clamp(b+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),w=-this.m_limitMass2*b,_=-w*this.m_u2.x,g=-w*this.m_u2.y,s.m_sweep.c.x+=s.m_invMass*_,s.m_sweep.c.y+=s.m_invMass*g,s.m_sweep.a+=s.m_invI*(p*g-f*_),s.SynchronizeTransform()),t.b2_linearSlop>S},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),Box2D.inherit(C,Box2D.Dynamics.Joints.b2JointDef),C.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,C.b2PulleyJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new o,this.groundAnchorB=new o,this.localAnchorA=new o,this.localAnchorB=new o},C.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},C.prototype.Initialize=function(t,e,n,i,o,s,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(n),this.groundAnchorB.SetV(i),this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(s);var a=o.x-n.x,l=o.y-n.y;this.lengthA=Math.sqrt(a*a+l*l);var c=s.x-i.x,u=s.y-i.y;this.lengthB=Math.sqrt(c*c+u*u),this.ratio=r;var h=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=h-this.ratio*w.b2_minPulleyLength,this.maxLengthB=(h-w.b2_minPulleyLength)/this.ratio},Box2D.inherit(S,Box2D.Dynamics.Joints.b2Joint),S.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,S.b2RevoluteJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new s,this.impulse2=new o,this.reduced=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_impulse=new s,this.m_mass=new n},S.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},S.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},S.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},S.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},S.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},S.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},S.prototype.IsLimitEnabled=function(){return this.m_enableLimit},S.prototype.EnableLimit=function(t){this.m_enableLimit=t},S.prototype.GetLowerLimit=function(){return this.m_lowerAngle},S.prototype.GetUpperLimit=function(){return this.m_upperAngle},S.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},S.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},S.prototype.EnableMotor=function(t){this.m_enableMotor=t},S.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},S.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},S.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},S.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},S.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=m.e_inactiveLimit},S.prototype.InitVelocityConstraints=function(e){var n,o=this.m_bodyA,s=this.m_bodyB,r=0;this.m_enableMotor||this.m_enableLimit,n=o.m_xf.R;var a=this.m_localAnchor1.x-o.m_sweep.localCenter.x,l=this.m_localAnchor1.y-o.m_sweep.localCenter.y;r=n.col1.x*a+n.col2.x*l,l=n.col1.y*a+n.col2.y*l,a=r,n=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,u=this.m_localAnchor2.y-s.m_sweep.localCenter.y;r=n.col1.x*c+n.col2.x*u,u=n.col1.y*c+n.col2.y*u,c=r;var h=o.m_invMass,p=s.m_invMass,f=o.m_invI,d=s.m_invI;if(this.m_mass.col1.x=h+p+l*l*f+u*u*d,this.m_mass.col2.x=-l*a*f-u*c*d,this.m_mass.col3.x=-l*f-u*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=h+p+a*a*f+c*c*d,this.m_mass.col3.y=a*f+c*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=f+d,this.m_motorMass=1/(f+d),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var y=s.m_sweep.a-o.m_sweep.a-this.m_referenceAngle;i.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=m.e_equalLimits:this.m_lowerAngle>=y?(this.m_limitState!=m.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=m.e_atLowerLimit):y>=this.m_upperAngle?(this.m_limitState!=m.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=m.e_atUpperLimit):(this.m_limitState=m.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=m.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var _=this.m_impulse.x,g=this.m_impulse.y;o.m_linearVelocity.x-=h*_,o.m_linearVelocity.y-=h*g,o.m_angularVelocity-=f*(a*g-l*_+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=p*_,s.m_linearVelocity.y+=p*g,s.m_angularVelocity+=d*(c*g-u*_+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},S.prototype.SolveVelocityConstraints=function(t){var e,n=this.m_bodyA,o=this.m_bodyB,s=0,r=0,a=0,l=0,c=0,u=0,h=n.m_linearVelocity,p=n.m_angularVelocity,f=o.m_linearVelocity,d=o.m_angularVelocity,y=n.m_invMass,_=o.m_invMass,g=n.m_invI,x=o.m_invI;if(this.m_enableMotor&&this.m_limitState!=m.e_equalLimits){var v=d-p-this.m_motorSpeed,b=this.m_motorMass*-v,w=this.m_motorImpulse,C=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=i.Clamp(this.m_motorImpulse+b,-C,C),b=this.m_motorImpulse-w,p-=g*b,d+=x*b}if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){e=n.m_xf.R,a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y,s=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=s,e=o.m_xf.R,c=this.m_localAnchor2.x-o.m_sweep.localCenter.x,u=this.m_localAnchor2.y-o.m_sweep.localCenter.y,s=e.col1.x*c+e.col2.x*u,u=e.col1.y*c+e.col2.y*u,c=s;var S=f.x+-d*u-h.x- -p*l,A=f.y+d*c-h.y-p*a,D=d-p;this.m_mass.Solve33(this.impulse3,-S,-A,-D),this.m_limitState==m.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==m.e_atLowerLimit?(r=this.m_impulse.z+this.impulse3.z,0>r&&(this.m_mass.Solve22(this.reduced,-S,-A),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==m.e_atUpperLimit&&(r=this.m_impulse.z+this.impulse3.z,r>0&&(this.m_mass.Solve22(this.reduced,-S,-A),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),h.x-=y*this.impulse3.x,h.y-=y*this.impulse3.y,p-=g*(a*this.impulse3.y-l*this.impulse3.x+this.impulse3.z),f.x+=_*this.impulse3.x,f.y+=_*this.impulse3.y,d+=x*(c*this.impulse3.y-u*this.impulse3.x+this.impulse3.z)}else{e=n.m_xf.R,a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y,s=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=s,e=o.m_xf.R,c=this.m_localAnchor2.x-o.m_sweep.localCenter.x,u=this.m_localAnchor2.y-o.m_sweep.localCenter.y,s=e.col1.x*c+e.col2.x*u,u=e.col1.y*c+e.col2.y*u,c=s;var B=f.x+-d*u-h.x- -p*l,E=f.y+d*c-h.y-p*a;this.m_mass.Solve22(this.impulse2,-B,-E),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,h.x-=y*this.impulse2.x,h.y-=y*this.impulse2.y,p-=g*(a*this.impulse2.y-l*this.impulse2.x),f.x+=_*this.impulse2.x,f.y+=_*this.impulse2.y,d+=x*(c*this.impulse2.y-u*this.impulse2.x)}n.m_linearVelocity.SetV(h),n.m_angularVelocity=p,o.m_linearVelocity.SetV(f),o.m_angularVelocity=d},S.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var n,o=0,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,u=0,h=0;if(this.m_enableLimit&&this.m_limitState!=m.e_inactiveLimit){var p=r.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,f=0;this.m_limitState==m.e_equalLimits?(o=i.Clamp(p-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),f=-this.m_motorMass*o,a=i.Abs(o)):this.m_limitState==m.e_atLowerLimit?(o=p-this.m_lowerAngle,a=-o,o=i.Clamp(o+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),f=-this.m_motorMass*o):this.m_limitState==m.e_atUpperLimit&&(o=p-this.m_upperAngle,a=o,o=i.Clamp(o-t.b2_angularSlop,0,t.b2_maxAngularCorrection),f=-this.m_motorMass*o),s.m_sweep.a-=s.m_invI*f,r.m_sweep.a+=r.m_invI*f,s.SynchronizeTransform(),r.SynchronizeTransform()}n=s.m_xf.R;var d=this.m_localAnchor1.x-s.m_sweep.localCenter.x,y=this.m_localAnchor1.y-s.m_sweep.localCenter.y;c=n.col1.x*d+n.col2.x*y,y=n.col1.y*d+n.col2.y*y,d=c,n=r.m_xf.R;var _=this.m_localAnchor2.x-r.m_sweep.localCenter.x,g=this.m_localAnchor2.y-r.m_sweep.localCenter.y;c=n.col1.x*_+n.col2.x*g,g=n.col1.y*_+n.col2.y*g,_=c;var x=r.m_sweep.c.x+_-s.m_sweep.c.x-d,v=r.m_sweep.c.y+g-s.m_sweep.c.y-y,b=x*x+v*v,w=Math.sqrt(b);l=w;var C=s.m_invMass,A=r.m_invMass,D=s.m_invI,B=r.m_invI,E=10*t.b2_linearSlop;if(b>E*E){var k=C+A,T=1/k;u=T*-x,h=T*-v;var M=.5;s.m_sweep.c.x-=M*C*u,s.m_sweep.c.y-=M*C*h,r.m_sweep.c.x+=M*A*u,r.m_sweep.c.y+=M*A*h,x=r.m_sweep.c.x+_-s.m_sweep.c.x-d,v=r.m_sweep.c.y+g-s.m_sweep.c.y-y}return this.K1.col1.x=C+A,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=C+A,this.K2.col1.x=D*y*y,this.K2.col2.x=-D*d*y,this.K2.col1.y=-D*d*y,this.K2.col2.y=D*d*d,this.K3.col1.x=B*g*g,this.K3.col2.x=-B*_*g,this.K3.col1.y=-B*_*g,this.K3.col2.y=B*_*_,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(S.tImpulse,-x,-v),u=S.tImpulse.x,h=S.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*u,s.m_sweep.c.y-=s.m_invMass*h,s.m_sweep.a-=s.m_invI*(d*h-y*u),r.m_sweep.c.x+=r.m_invMass*u,r.m_sweep.c.y+=r.m_invMass*h,r.m_sweep.a+=r.m_invI*(_*h-g*u),s.SynchronizeTransform(),r.SynchronizeTransform(),t.b2_linearSlop>=l&&t.b2_angularSlop>=a},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse=new o}),Box2D.inherit(A,Box2D.Dynamics.Joints.b2JointDef),A.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,A.b2RevoluteJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},A.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},A.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(D,Box2D.Dynamics.Joints.b2Joint),D.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,D.b2WeldJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_impulse=new s,this.m_mass=new n},D.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},D.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},D.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},D.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},D.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new n},D.prototype.InitVelocityConstraints=function(t){var e,n=0,i=this.m_bodyA,o=this.m_bodyB;e=i.m_xf.R;var s=this.m_localAnchorA.x-i.m_sweep.localCenter.x,r=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=n,e=o.m_xf.R;var a=this.m_localAnchorB.x-o.m_sweep.localCenter.x,l=this.m_localAnchorB.y-o.m_sweep.localCenter.y;n=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=n;var c=i.m_invMass,u=o.m_invMass,h=i.m_invI,p=o.m_invI;this.m_mass.col1.x=c+u+r*r*h+l*l*p,this.m_mass.col2.x=-r*s*h-l*a*p,this.m_mass.col3.x=-r*h-l*p,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+u+s*s*h+a*a*p,this.m_mass.col3.y=s*h+a*p,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=h+p,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,i.m_linearVelocity.x-=c*this.m_impulse.x,i.m_linearVelocity.y-=c*this.m_impulse.y,i.m_angularVelocity-=h*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),o.m_linearVelocity.x+=u*this.m_impulse.x,o.m_linearVelocity.y+=u*this.m_impulse.y,o.m_angularVelocity+=p*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},D.prototype.SolveVelocityConstraints=function(){var t,e=0,n=this.m_bodyA,i=this.m_bodyB,o=n.m_linearVelocity,r=n.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=n.m_invMass,u=i.m_invMass,h=n.m_invI,p=i.m_invI;t=n.m_xf.R;var m=this.m_localAnchorA.x-n.m_sweep.localCenter.x,f=this.m_localAnchorA.y-n.m_sweep.localCenter.y;e=t.col1.x*m+t.col2.x*f,f=t.col1.y*m+t.col2.y*f,m=e,t=i.m_xf.R;var d=this.m_localAnchorB.x-i.m_sweep.localCenter.x,y=this.m_localAnchorB.y-i.m_sweep.localCenter.y;e=t.col1.x*d+t.col2.x*y,y=t.col1.y*d+t.col2.y*y,d=e;var _=a.x-l*y-o.x+r*f,g=a.y+l*d-o.y-r*m,x=l-r,v=new s;this.m_mass.Solve33(v,-_,-g,-x),this.m_impulse.Add(v),o.x-=c*v.x,o.y-=c*v.y,r-=h*(m*v.y-f*v.x+v.z),a.x+=u*v.x,a.y+=u*v.y,l+=p*(d*v.y-y*v.x+v.z),n.m_angularVelocity=r,i.m_angularVelocity=l},D.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var n,o=0,r=this.m_bodyA,a=this.m_bodyB;n=r.m_xf.R;var l=this.m_localAnchorA.x-r.m_sweep.localCenter.x,c=this.m_localAnchorA.y-r.m_sweep.localCenter.y;o=n.col1.x*l+n.col2.x*c,c=n.col1.y*l+n.col2.y*c,l=o,n=a.m_xf.R;var u=this.m_localAnchorB.x-a.m_sweep.localCenter.x,h=this.m_localAnchorB.y-a.m_sweep.localCenter.y;o=n.col1.x*u+n.col2.x*h,h=n.col1.y*u+n.col2.y*h,u=o;var p=r.m_invMass,m=a.m_invMass,f=r.m_invI,d=a.m_invI,y=a.m_sweep.c.x+u-r.m_sweep.c.x-l,_=a.m_sweep.c.y+h-r.m_sweep.c.y-c,g=a.m_sweep.a-r.m_sweep.a-this.m_referenceAngle,x=10*t.b2_linearSlop,v=Math.sqrt(y*y+_*_),b=i.Abs(g);v>x&&(f*=1,d*=1),this.m_mass.col1.x=p+m+c*c*f+h*h*d,this.m_mass.col2.x=-c*l*f-h*u*d,this.m_mass.col3.x=-c*f-h*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=p+m+l*l*f+u*u*d,this.m_mass.col3.y=l*f+u*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=f+d;var w=new s;return this.m_mass.Solve33(w,-y,-_,-g),r.m_sweep.c.x-=p*w.x,r.m_sweep.c.y-=p*w.y,r.m_sweep.a-=f*(l*w.y-c*w.x+w.z),a.m_sweep.c.x+=m*w.x,a.m_sweep.c.y+=m*w.y,a.m_sweep.a+=d*(u*w.y-h*w.x+w.z),r.SynchronizeTransform(),a.SynchronizeTransform(),t.b2_linearSlop>=v&&t.b2_angularSlop>=b},Box2D.inherit(B,Box2D.Dynamics.Joints.b2JointDef),B.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,B.b2WeldJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},B.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=m.e_weldJoint,this.referenceAngle=0},B.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=Box2D.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness
},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,n){if(e){var i=this.m_ctx,o=this.m_drawScale;i.beginPath(),i.strokeStyle=this._color(n.color,this.m_alpha),i.moveTo(t[0].x*o,t[0].y*o);for(var s=1;e>s;s++)i.lineTo(t[s].x*o,t[s].y*o);i.lineTo(t[0].x*o,t[0].y*o),i.closePath(),i.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,n){if(e){var i=this.m_ctx,o=this.m_drawScale;i.beginPath(),i.strokeStyle=this._color(n.color,this.m_alpha),i.fillStyle=this._color(n.color,this.m_fillAlpha),i.moveTo(t[0].x*o,t[0].y*o);for(var s=1;e>s;s++)i.lineTo(t[s].x*o,t[s].y*o);i.lineTo(t[0].x*o,t[0].y*o),i.closePath(),i.fill(),i.stroke()}},t.prototype.DrawCircle=function(t,e,n){if(e){var i=this.m_ctx,o=this.m_drawScale;i.beginPath(),i.strokeStyle=this._color(n.color,this.m_alpha),i.arc(t.x*o,t.y*o,e*o,0,2*Math.PI,!0),i.closePath(),i.stroke()}},t.prototype.DrawSolidCircle=function(t,e,n,i){if(e){var o=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;o.moveTo(0,0),o.beginPath(),o.strokeStyle=this._color(i.color,this.m_alpha),o.fillStyle=this._color(i.color,this.m_fillAlpha),o.arc(r,a,e*s,0,2*Math.PI,!0),o.moveTo(r,a),o.lineTo((t.x+n.x*e)*s,(t.y+n.y*e)*s),o.closePath(),o.fill(),o.stroke()}},t.prototype.DrawSegment=function(t,e,n){var i=this.m_ctx,o=this.m_drawScale;i.strokeStyle=this._color(n.color,this.m_alpha),i.beginPath(),i.moveTo(t.x*o,t.y*o),i.lineTo(e.x*o,e.y*o),i.closePath(),i.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,n=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*n,t.position.y*n),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*n,(t.position.y+this.m_xformScale*t.R.col1.y)*n),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*n,t.position.y*n),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*n,(t.position.y+this.m_xformScale*t.R.col2.y)*n),e.closePath(),e.stroke()}}();var i;for(i=0;Box2D.postDefs.length>i;++i)Box2D.postDefs[i]();delete Box2D.postDefs,window.Box2D=Box2D;var dat=window.dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(t,e){e=e||document;var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),dat.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var o=0,s=e.length;s>o;o++)if(o in e&&n.call(i,e[o],o)===this.BREAK)return}else for(var o in e)if(n.call(i,e[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),dat.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(dat.utils.common),dat.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(o);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};t.each(n,function(e,n){t.each(e,function(t){i[t]=n})});var o=/(\d+(\.\d+)?)px/,s={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,i){t.isUndefined(n)&&(n=!0),t.isUndefined(i)&&(i=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,o,s){o=o||{};var r=i[n];if(!r)throw Error("Event type "+n+" not supported.");var a=document.createEvent(r);switch(r){case"MouseEvents":var l=o.x||o.clientX||0,c=o.y||o.clientY||0;a.initMouseEvent(n,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;t.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(n,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(n,o.bubbles||!1,o.cancelable||!0)}t.defaults(a,s),e.dispatchEvent(a)},bind:function(t,e,n,i){return i=i||!1,t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),s},unbind:function(t,e,n,i){return i=i||!1,t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),s},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!=i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return s},hasClass:function(t,e){return RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return s}(dat.utils.common),dat.controllers.OptionController=function(t,e,n){var i=function(t,o,s){i.superclass.call(this,t,o);var r=this;if(this.__select=document.createElement("select"),n.isArray(s)){var a={};n.each(s,function(t){a[t]=t}),s=a}n.each(s,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),r.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;r.setValue(t)}),this.domElement.appendChild(this.__select)};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(t,e){function n(t){return t=""+t,t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var i=function(t,o,s){i.superclass.call(this,t,o),s=s||{},this.__min=s.min,this.__max=s.max,this.__step=s.step,this.__impliedStep=e.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=n(this.__impliedStep)};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&this.__min>t?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&0!=t%this.__step&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(t,e,n){function i(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var o=function(t,i,s){function r(){var t=parseFloat(p.__input.value);n.isNaN(t)||p.setValue(t)}function a(){r(),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}function l(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",u),h=t.clientY}function c(t){var e=h-t.clientY;p.setValue(p.getValue()+e*p.__impliedStep),h=t.clientY}function u(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",u)}this.__truncationSuspended=!1,o.superclass.call(this,t,i,s);var h,p=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",r),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",l),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(p.__truncationSuspended=!0,this.blur(),p.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=t,n.extend(o.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():i(this.getValue(),this.__precision),o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(t,e,n,i,o){function s(t,e,n,i,o){return i+(o-i)*((t-e)/(n-e))}var r=function(t,n,i,o,a){function l(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",u),c(t)}function c(t){t.preventDefault();var n=e.getOffset(h.__background),i=e.getWidth(h.__background);return h.setValue(s(t.clientX,n.left,n.left+i,h.__min,h.__max)),!1}function u(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",u),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}r.superclass.call(this,t,n,{min:i,max:o,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",l),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return r.superclass=t,r.useDefaultStyles=function(){n.inject(o)},i.extend(r.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(t,e,n){var i=function(t,n,o){i.superclass.call(this,t,n);var s=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,e.bind(this.__button,"click",function(t){return t.preventDefault(),s.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=t,n.extend(i.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(t,e,n){var i=function(t,n){function o(){s.setValue(!s.__prev)}i.superclass.call(this,t,n);var s=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",o,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);6>n.length;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(dat.utils.common),dat.color.interpret=function(t,e){var n,i,o=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(s,function(o){return o.litmus(t)?(e.each(o.conversions,function(o,s){return n=o.read(t),i===!1&&n!==!1?(i=n,n.conversionName=s,n.conversion=o,e.BREAK):void 0}),e.BREAK):void 0}),i},s=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+(""+e[1])+(""+e[1])+(""+e[2])+(""+e[2])+(""+e[3])+(""+e[3]))}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null===e?!1:{space:"HEX",hex:parseInt("0x"+(""+e[1]))}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===e?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4!=t.length?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return o}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(t,e,n,i,o,s,r,a,l,c,u,h,p,m,f){function d(t,e,n,s){if(void 0===e[n])throw Error("Object "+e+' has no property "'+n+'"');var r;if(s.color)r=new u(e,n);else{var a=[e,n].concat(s.factoryArgs);r=i.apply(t,a)}s.before instanceof o&&(s.before=s.before.__li),g(t,r),m.addClass(r.domElement,"c");var l=document.createElement("span");m.addClass(l,"property-name"),l.innerHTML=r.property;var c=document.createElement("div");c.appendChild(l),c.appendChild(r.domElement);var h=y(t,c,s.before);return m.addClass(h,N.CLASS_CONTROLLER_ROW),m.addClass(h,typeof r.getValue()),_(t,h,r),t.__controllers.push(r),r}function y(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,params.before):t.__ul.appendChild(i),t.onResize(),i}function _(t,e,n){if(n.__li=e,n.__gui=t,f.extend(n,{options:function(e){return arguments.length>1?(n.remove(),d(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(n.remove(),d(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var i=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],o=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),o.apply(i,t)}}),m.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var o=function(e){return f.isNumber(n.__min)&&f.isNumber(n.__max)?(n.remove(),d(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=f.compose(o,n.min),n.max=f.compose(o,n.max)}else n instanceof s?(m.bind(e,"click",function(){m.fakeEvent(n.__checkbox,"click")}),m.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof r?(m.bind(e,"click",function(){m.fakeEvent(n.__button,"click")}),m.bind(e,"mouseover",function(){m.addClass(n.__button,"hover")}),m.bind(e,"mouseout",function(){m.removeClass(n.__button,"hover")})):n instanceof u&&(m.addClass(e,"color"),n.updateDisplay=f.compose(function(t){return e.style.borderLeftColor=""+n.__color,t},n.updateDisplay),n.updateDisplay());n.setValue=f.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&D(t.getRoot(),!0),e},n.setValue)}function g(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!=i){var o=n.__rememberedObjectIndecesToControllers[i];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[i]=o),o[e.property]=e,n.load&&n.load.remembered){var s,r=n.load.remembered;if(r[t.preset])s=r[t.preset];else{if(!r[I])return;s=r[I]}if(s[i]&&void 0!==s[i][e.property]){var a=s[i][e.property];e.initialValue=a,e.setValue(a)}}}}function x(t,e){return document.location.href+"."+e}function v(t){function e(){c.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");m.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),m.addClass(n,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",m.addClass(i,"button gears");var o=document.createElement("span");o.innerHTML="Save",m.addClass(o,"button"),m.addClass(o,"save");var s=document.createElement("span");s.innerHTML="New",m.addClass(s,"button"),m.addClass(s,"save-as");var r=document.createElement("span");r.innerHTML="Revert",m.addClass(r,"button"),m.addClass(r,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?f.each(t.load.remembered,function(e,n){S(t,n,n==t.preset)}):S(t,I,!1),m.bind(a,"change",function(){for(var e=0;t.__preset_select.length>e;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(s),n.appendChild(r),j){var l=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");l.style.display="block";var u=document.getElementById("dg-local-storage");"true"===localStorage.getItem(x(t,"isLocal"))&&u.setAttribute("checked","checked"),e(),m.bind(u,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var h=document.getElementById("dg-new-constructor");m.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||E.hide()}),m.bind(i,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),E.show(),h.focus(),h.select()}),m.bind(o,"click",function(){t.save()}),m.bind(s,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),m.bind(r,"click",function(){t.revert()})}function b(t){function e(e){return e.preventDefault(),o=e.clientX,m.addClass(t.__closeButton,N.CLASS_DRAG),m.bind(window,"mousemove",n),m.bind(window,"mouseup",i),!1}function n(e){return e.preventDefault(),t.width+=o-e.clientX,t.onResize(),o=e.clientX,!1}function i(){m.removeClass(t.__closeButton,N.CLASS_DRAG),m.unbind(window,"mousemove",n),m.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),f.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var o;m.bind(t.__resize_handle,"mousedown",e),m.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function w(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function C(t,e){var n={};return f.each(t.__rememberedObjects,function(i,o){var s={},r=t.__rememberedObjectIndecesToControllers[o];f.each(r,function(t,n){s[n]=e?t.initialValue:t.getValue()}),n[o]=s}),n}function S(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function A(t){for(var e=0;t.__preset_select.length>e;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function D(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function B(t){0!=t.length&&h(function(){B(t)}),f.each(t,function(t){t.updateDisplay()})}t.inject(n);var E,k,T="dg",M=72,L=20,I="Default",j=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),P=!0,V=!1,R=[],N=function(t){function e(){localStorage.setItem(x(i,"gui"),JSON.stringify(i.getSaveObject()))}function n(){var t=i.getRoot();t.width+=1,f.defer(function(){t.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),m.addClass(this.domElement,T),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=f.defaults(t,{autoPlace:!0,width:N.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:I}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&R.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var o=j&&"true"===localStorage.getItem(x(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){i.parent?i.getRoot().preset=e:t.load.preset=e,A(this),i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,w(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,r&&(r.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?m.addClass(i.__ul,N.CLASS_CLOSED):m.removeClass(i.__ul,N.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?N.TEXT_OPEN:N.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return o},set:function(t){j&&(o=t,t?m.bind(window,"unload",e):m.unbind(window,"unload",e),localStorage.setItem(x(i,"isLocal"),t))}}}),f.isUndefined(t.parent)){if(t.closed=!1,m.addClass(this.domElement,N.CLASS_MAIN),m.makeSelectable(this.domElement,!1),j&&o){i.useLocalStorage=!0;var s=localStorage.getItem(x(this,"gui"));s&&(t.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=N.TEXT_CLOSED,m.addClass(this.__closeButton,N.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),m.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var r=document.createTextNode(t.name);m.addClass(r,"controller-name");var a=y(i,r),l=function(t){return t.preventDefault(),i.closed=!i.closed,!1};m.addClass(this.__ul,N.CLASS_CLOSED),m.addClass(a,"title"),m.bind(a,"click",l),t.closed||(this.closed=!1)}t.autoPlace&&(f.isUndefined(t.parent)&&(P&&(k=document.createElement("div"),m.addClass(k,T),m.addClass(k,N.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(k),P=!1),k.appendChild(this.domElement),m.addClass(this.domElement,N.CLASS_AUTO_PLACE)),this.parent||w(i,t.width)),m.bind(window,"resize",function(){i.onResize()}),m.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),m.bind(this.__ul,"transitionend",function(){i.onResize()}),m.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&b(this),i.getRoot(),t.parent||n()};return N.toggleHide=function(){V=!V,f.each(R,function(t){t.domElement.style.zIndex=V?-999:999,t.domElement.style.opacity=V?0:1})},N.CLASS_AUTO_PLACE="a",N.CLASS_AUTO_PLACE_CONTAINER="ac",N.CLASS_MAIN="main",N.CLASS_CONTROLLER_ROW="cr",N.CLASS_TOO_TALL="taller-than-window",N.CLASS_CLOSED="closed",N.CLASS_CLOSE_BUTTON="close-button",N.CLASS_DRAG="drag",N.DEFAULT_WIDTH=245,N.TEXT_CLOSED="Close Controls",N.TEXT_OPEN="Open Controls",m.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==M&&t.keyCode!=M||N.toggleHide()},!1),f.extend(N.prototype,{add:function(t,e){return d(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return d(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&k.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new N(e);this.__folders[t]=n;var i=y(this,n.domElement);return m.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=m.getOffset(t.__ul).top,n=0;f.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=m.getHeight(e))}),n>window.innerHeight-e-L?(m.addClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-L+"px"):(m.removeClass(t.domElement,N.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&f.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(f.isUndefined(E)&&(E=new p,E.domElement.innerHTML=e),this.parent)throw Error("You can only call remember on a top level GUI.");var t=this;f.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&v(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=C(this)),t.folders={},f.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=C(this),D(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[I]=C(this,!0)),this.load.remembered[t]=C(this),this.preset=t,S(this,t,!0)},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?g(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),t||D(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&B(this.__listening)}}),N}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",dat.controllers.factory=function(t,e,n,i,o,s,r){return function(a,l){var c=a[l];
return r.isArray(arguments[2])||r.isObject(arguments[2])?new t(a,l,arguments[2]):r.isNumber(c)?r.isNumber(arguments[2])&&r.isNumber(arguments[3])?new n(a,l,arguments[2],arguments[3]):new e(a,l,{min:arguments[2],max:arguments[3]}):r.isString(c)?new i(a,l):r.isFunction(c)?new o(a,l,""):r.isBoolean(c)?new s(a,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(t,e,n){var i=function(t,n){function o(){r.setValue(r.__input.value)}function s(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}i.superclass.call(this,t,n);var r=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",o),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",s),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(t,e,n,i,o){function s(t,e,n,i){t.style.background="",o.each(l,function(o){t.style.cssText+="background: "+o+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "})}function r(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,l){function c(t){m(t),e.bind(window,"mousemove",m),e.bind(window,"mouseup",u)}function u(){e.unbind(window,"mousemove",m),e.unbind(window,"mouseup",u)}function h(){var t=i(this.value);t!==!1?(d.__color.__state=t,d.setValue(d.__color.toOriginal())):this.value=""+d.__color}function p(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",p)}function m(t){t.preventDefault();var n=e.getWidth(d.__saturation_field),i=e.getOffset(d.__saturation_field),o=(t.clientX-i.left+document.body.scrollLeft)/n,s=1-(t.clientY-i.top+document.body.scrollTop)/n;return s>1?s=1:0>s&&(s=0),o>1?o=1:0>o&&(o=0),d.__color.v=s,d.__color.s=o,d.setValue(d.__color.toOriginal()),!1}function f(t){t.preventDefault();var n=e.getHeight(d.__hue_field),i=e.getOffset(d.__hue_field),o=1-(t.clientY-i.top+document.body.scrollTop)/n;return o>1?o=1:0>o&&(o=0),d.__color.h=360*o,d.setValue(d.__color.toOriginal()),!1}a.superclass.call(this,t,l),this.__color=new n(this.getValue()),this.__temp=new n(0);var d=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(){e.addClass(this,"drag").bind(window,"mouseup",function(){e.removeClass(d.__selector,"drag")})});var y=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(y.style,{width:"100%",height:"100%",background:"none"}),s(y,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),r(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",c),e.bind(this.__field_knob,"mousedown",c),e.bind(this.__hue_field,"mousedown",function(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",p)}),this.__saturation_field.appendChild(y),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,o.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=i(this.getValue());if(t!==!1){var e=!1;o.each(n.COMPONENTS,function(n){return o.isUndefined(t[n])||o.isUndefined(this.__color.__state[n])||t[n]===this.__color.__state[n]?void 0:(e=!0,{})},this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var r=.5>this.__color.v||this.__color.s>.5?255:0,a=255-r;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:""+this.__temp,border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",""+this.__temp),o.extend(this.__input.style,{backgroundColor:this.__input.value=""+this.__color,color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(t,e,n,i){function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(r(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(r(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function s(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function r(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var l=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(l.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(l.prototype,"r",2),o(l.prototype,"g",1),o(l.prototype,"b",0),s(l.prototype,"h"),s(l.prototype,"s"),s(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),l}(dat.color.interpret,dat.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),s=n*(1-e),r=n*(1-o*e),a=n*(1-(1-o)*e),l=[[n,a,s],[r,n,s],[s,n,a],[s,r,n],[a,s,n],[n,s,r]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,n){var i,o,s=Math.min(t,e,n),r=Math.max(t,e,n),a=r-s;return 0==r?{h:0/0,s:0,v:0}:(o=a/r,i=t==r?(e-n)/a:e==r?2+(n-t)/a:4+(t-e)/a,i/=6,0>i&&(i+=1),{h:360*i,s:o,v:r/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return 255&t>>8*e},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),dat.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),function(){var t=this.createjs=this.createjs||{},t=t.PreloadJS=t.PreloadJS||{};t.version="0.3.1",t.buildDate="Thu, 09 May 2013 22:04:32 GMT"}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.removeEventListener=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent},e._listeners=null,e.initialize=function(){},e.addEventListener=function(t,e){var n=this._listeners;n?this.removeEventListener(t,e):n=this._listeners={};var i=n[t];return i||(i=n[t]=[]),i.push(e),e},e.removeEventListener=function(t,e){var n=this._listeners;if(n){var i=n[t];if(i)for(var o=0,s=i.length;s>o;o++)if(i[o]==e){1==s?delete n[t]:i.splice(o,1);break}}},e.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},e.dispatchEvent=function(t,e){var n=!1,i=this._listeners;if(t&&i){if("string"==typeof t&&(t={type:t}),i=i[t.type],!i)return n;t.target=e||this;for(var i=i.slice(),o=0,s=i.length;s>o;o++)var r=i[o],n=r.handleEvent?n||r.handleEvent(t):n||r(t)}return!!n},e.hasEventListener=function(t){var e=this._listeners;return!(!e||!e[t])},e.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.init()};t.prototype={};var e=t.prototype;t.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.loaded=!1,e.canceled=!1,e.progress=0,e._item=null,e._basePath=null,e.onProgress=null,e.onLoadStart=null,e.onComplete=null,e.onError=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e.getItem=function(){return this._item},e.init=function(){},e.load=function(){},e.close=function(){},e._sendLoadStart=function(){this._isCanceled()||(this.onLoadStart&&this.onLoadStart({target:this}),this.dispatchEvent("loadStart"),this.dispatchEvent("loadstart"))},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e={loaded:this.progress,total:1}):(e=t,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),e.target=this,e.type="progress",e.progress=this.progress,this.onProgress&&this.onProgress(e),this.dispatchEvent(e)}},e._sendComplete=function(){this._isCanceled()||(this.onComplete&&this.onComplete({target:this}),this.dispatchEvent("complete"))},e._sendError=function(t){this._isCanceled()||(null==t&&(t={}),t.target=this,t.type="error",this.onError&&this.onError(t),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e._parseURI=function(e){return e?e.match(t.FILE_PATTERN):null},e._formatQueryString=function(t,e){if(null==t)throw Error("You must specify data.");var n,i=[];for(n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},e.buildPath=function(t,e,n){if(null!=e){var i=this._parseURI(t);(null==i[1]||""==i[1])&&(t=e+t)}if(null==n)return t;if(e=[],i=t.indexOf("?"),-1!=i)var o=t.slice(i+1),e=e.concat(o.split("&"));return-1!=i?t.slice(0,i)+"?"+this._formatQueryString(n,e):t+"?"+this._formatQueryString(n,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;t.LOAD_TIMEOUT=8e3,t.BINARY="binary",t.CSS="css",t.IMAGE="image",t.JAVASCRIPT="javascript",t.JSON="json",t.JSONP="jsonp",t.SOUND="sound",t.SVG="svg",t.TEXT="text",t.XML="xml",t.POST="POST",t.GET="GET",e.useXHR=!0,e.stopOnError=!1,e.maintainScriptOrder=!0,e.next=null,e.onFileLoad=null,e.onFileProgress=null,e._typeCallbacks=null,e._extensionCallbacks=null,e._loadStartWasDispatched=!1,e._maxConnections=1,e._currentlyLoadingScript=null,e._currentLoads=null,e._loadQueue=null,e._loadQueueBackup=null,e._loadItemsById=null,e._loadItemsBySrc=null,e._loadedResults=null,e._loadedRawResults=null,e._numItems=0,e._numItemsLoaded=0,e._scriptOrder=null,e._loadedScripts=null,e.init=function(t,e){this._numItems=this._numItemsLoaded=0,this._loadStartWasDispatched=this._paused=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=e,this.setUseXHR(t)},e.setUseXHR=function(t){return this.useXHR=0!=t&&null!=window.XMLHttpRequest},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array?t&&(e=t):e=[t],t=!1,e){for(;e.length;){for(var n=e.pop(),i=this.getResult(n),o=this._loadQueue.length-1;o>=0;o--)if(s=this._loadQueue[o].getItem(),s.id==n||s.src==n){this._loadQueue.splice(o,1)[0].cancel();break}for(o=this._loadQueueBackup.length-1;o>=0;o--)if(s=this._loadQueueBackup[o].getItem(),s.id==n||s.src==n){this._loadQueueBackup.splice(o,1)[0].cancel();break}if(i)delete this._loadItemsById[i.id],delete this._loadItemsBySrc[i.src],this._disposeItem(i);else for(var o=this._currentLoads.length-1;o>=0;o--){var s=this._currentLoads[o].getItem();if(s.id==n||s.src==n){this._currentLoads.splice(o,1)[0].cancel(),t=!0;break}}}t&&this._loadNext()}else{this.close();for(n in this._loadItemsById)this._disposeItem(this._loadItemsById[n]);this.init(this.useXHR)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(t=[],i=0,l=this._loadQueueBackup.length;l>i;i++)t.push(this._loadQueueBackup[i].getItem());this.loadManifest(t,!1)},t.isBinary=function(t){switch(t){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){if(t=t.getPreloadHandlers(),null!=t.types)for(var e=0,n=t.types.length;n>e;e++)this._typeCallbacks[t.types[e]]=t.callback;if(null!=t.extensions)for(e=0,n=t.extensions.length;n>e;e++)this._extensionCallbacks[t.extensions[e]]=t.callback}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,n){null==t?this._sendError({text:"PRELOAD_NO_FILE"}):(this._addItem(t,n),e!==!1?this.setPaused(!1):this.setPaused(!0))},e.loadManifest=function(t,e,n){var i=null;if(t instanceof Array){if(0==t.length)return this._sendError({text:"PRELOAD_MANIFEST_EMPTY"}),void 0;i=t}else{if(null==t)return this._sendError({text:"PRELOAD_MANIFEST_NULL"}),void 0;i=[t]}for(var t=0,o=i.length;o>t;t++)this._addItem(i[t],n);e!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var n=this._loadItemsById[t]||this._loadItemsBySrc[t];return null==n?null:(n=n.id,e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n])},e.setPaused=function(t){(this._paused=t)||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},e._addItem=function(t,e){var n=this._createLoadItem(t);if(null!=n){var i=this._createLoader(n,e);null!=i&&(this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT&&i instanceof createjs.XHRLoader&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t){var e=null;switch(typeof t){case"string":e={src:t};break;case"object":e=window.HTMLAudioElement&&t instanceof HTMLAudioElement?{tag:t,src:e.tag.src,type:createjs.LoadQueue.SOUND}:t}if(t=this._parseURI(e.src),null!=t&&(e.ext=t[5]),null==e.type&&(e.type=this._getTypeByExtension(e.ext)),e.type==createjs.LoadQueue.JSON&&null!=e.callback&&(e.type=createjs.LoadQueue.JSONP),e.type==createjs.LoadQueue.JSONP&&null==e.callback)throw Error("callback is required for loading JSONP requests.");if(null==e.tag&&(e.tag=this._createTag(e.type)),(null==e.id||""==e.id)&&(e.id=e.src),t=this._typeCallbacks[e.type]||this._extensionCallbacks[e.ext]){if(t=t(e.src,e.type,e.id,e.data),t===!1)return null;t!==!0&&(null!=t.src&&(e.src=t.src),null!=t.id&&(e.id=t.id),null!=t.tag&&t.tag.load instanceof Function&&(e.tag=t.tag),null!=t.completeHandler&&(e.completeHandler=t.completeHandler)),t.type&&(e.type=t.type),t=this._parseURI(e.src),null!=t&&null!=t[5]&&(e.ext=t[5].toLowerCase())}return this._loadItemsById[e.id]=e,this._loadItemsBySrc[e.src]=e},e._createLoader=function(t,e){var n=this.useXHR;switch(t.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:n=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:n=!1}return null==e&&(e=this._basePath),n?new createjs.XHRLoader(t,e):new createjs.TagLoader(t,e)},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded&&(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load());for(var t=0,e=this._loadQueue.length;e>t&&!(this._currentLoads.length>=this._maxConnections);t++){var n=this._loadQueue[t];if(this.maintainScriptOrder&&n instanceof createjs.TagLoader&&n.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(t,1),t--,e--,this._loadItem(n)}}},e._loadItem=function(t){t.addEventListener("progress",createjs.proxy(this._handleProgress,this)),t.addEventListener("complete",createjs.proxy(this._handleFileComplete,this)),t.addEventListener("error",createjs.proxy(this._handleFileError,this)),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileError=function(t){var e=t.target;this._numItemsLoaded++,this._updateProgress(),t={item:e.getItem()},this._sendError(t),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var t=t.target,e=t.getItem();if(this._loadedResults[e.id]=t.getResult(),t instanceof createjs.XHRLoader&&(this._loadedRawResults[e.id]=t.getResult(!0)),this._removeLoadItem(t),this.maintainScriptOrder&&e.type==createjs.LoadQueue.JAVASCRIPT){if(!(t instanceof createjs.TagLoader))return this._loadedScripts[this._scriptOrder.indexOf(e)]=e,this._checkScriptLoadOrder(t),void 0;this._currentlyLoadingScript=!1}this._processFinishedLoad(e,t)},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var n=this._loadedScripts[e];if(null===n)break;n!==!0&&(this._processFinishedLoad(n),this._loadedScripts[e]=!0,e--,t--)}},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,n=0;e>n;n++)if(this._currentLoads[n]==t){this._currentLoads.splice(n,1);break}},e._handleProgress=function(t){t=t.target,this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var n=0,i=0,o=this._currentLoads.length;o>i;i++)n+=this._currentLoads[i].progress;t+=n/e*(e/this._numItems)}this._sendProgress(t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._createTag=function(t){var e=null;switch(t){case createjs.LoadQueue.IMAGE:return document.createElement("img");case createjs.LoadQueue.SOUND:return e=document.createElement("audio"),e.autoplay=!1,e;case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.type="text/javascript",e;case createjs.LoadQueue.CSS:return e=this.useXHR?document.createElement("style"):document.createElement("link"),e.rel="stylesheet",e.type="text/css",e;case createjs.LoadQueue.SVG:return this.useXHR?e=document.createElement("svg"):(e=document.createElement("object"),e.type="image/svg+xml"),e}return null},e._getTypeByExtension=function(t){switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},e._sendFileProgress=function(t,e){if(this._isCanceled())this._cleanUp();else{var n={target:this,type:"fileprogress",progress:e,loaded:e,total:1,item:t};this.onFileProgress&&this.onFileProgress(n),this.dispatchEvent(n)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var n={target:this,type:"fileload",loader:e,item:t,result:this._loadedResults[t.id],rawResult:this._loadedRawResults[t.id]};t.completeHandler&&t.completeHandler(n),this.onFileLoad&&this.onFileLoad(n),this.dispatchEvent(n)}},e._sendFileStart=function(t){this.dispatchEvent({target:this,type:"filestart",item:t})},e.toString=function(){return"[PreloadJS LoadQueue]"},t.proxy=function(t,e){return function(){return t.apply(e,arguments)}},createjs.LoadQueue=t,createjs.proxy||(createjs.proxy=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(n))}});var n=function(){};n.init=function(){var t=navigator.userAgent;n.isFirefox=t.indexOf("Firefox")>-1,n.isOpera=null!=window.opera,n.isChrome=t.indexOf("Chrome")>-1,n.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1},n.init(),createjs.LoadQueue.BrowserDetect=n,Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(i=i>=0?i:Math.max(n-Math.abs(i),0);n>i;i++)if(i in e&&e[i]===t)return i;return-1})}(),this.createjs=this.createjs||{},function(){var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._loadTimeout=null,e._tagCompleteProxy=null,e._isAudio=!1,e._tag=null,e._jsonResult=null,e.init=function(t,e){this._item=t,this._basePath=e,this._tag=t.tag,this._isAudio=window.HTMLAudioElement&&t.tag instanceof HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},e.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP?this._jsonResult:this._tag},e.cancel=function(){this.canceled=!0,this._clean(),this.getItem()},e.load=function(){var t=this._item,e=this._tag;clearTimeout(this._loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT),this._isAudio&&(e.src=null,e.preload="auto"),e.onerror=createjs.proxy(this._handleError,this),this._isAudio?(e.onstalled=createjs.proxy(this._handleStalled,this),e.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(e.onload=createjs.proxy(this._handleLoad,this),e.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var n=this.buildPath(t.src,this._basePath,t.values);switch(t.type){case createjs.LoadQueue.CSS:e.href=n;break;case createjs.LoadQueue.SVG:e.data=n;break;default:e.src=n}if(t.type==createjs.LoadQueue.JSONP){if(null==t.callback)throw Error("callback is required for loading JSONP requests.");if(null!=window[t.callback])throw Error('JSONP callback "'+t.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[t.callback]=createjs.proxy(this._handleJSONPLoad,this)}(t.type==createjs.LoadQueue.SVG||t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.JAVASCRIPT||t.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=e.style.visibility,e.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(e)),null!=e.load&&e.load()},e._handleJSONPLoad=function(t){this._jsonResult=t},e._handleTimeout=function(){this._clean(),this._sendError({reason:"PRELOAD_TIMEOUT"})},e._handleStalled=function(){},e._handleError=function(){this._clean(),this._sendError()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleLoad()},e._handleLoad=function(){if(!this._isCanceled()){var t=this.getItem(),e=t.tag;if(!(this.loaded||this.isAudio&&4!==e.readyState)){switch(this.loaded=!0,t.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSONP:e.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(e)}this._clean(),this._sendComplete()}}},e._clean=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;t.onload=null,t.removeEventListener&&t.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),t.onstalled=null,t.onprogress=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t),t=this.getItem(),t.type==createjs.LoadQueue.JSONP&&(window[t.callback]=null)},e.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=t}(),this.createjs=this.createjs||{},function(){var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._request=null,e._loadTimeout=null,e._xhrLevel=1,e._response=null,e._rawResponse=null,e.init=function(t,e){this._item=t,this._basePath=e,this._createXHR(t)},e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)this._handleError();else{this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT)),this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(t){this._sendError({source:t})}}},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){t.loaded>0&&0==t.total||this._sendProgress({loaded:t.loaded,total:t.total})},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},e._handleAbort=function(){this._clean(),this._sendError()},e._handleError=function(){this._clean(),this._sendError()},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._response=this._getResponse(),this._clean(),this._generateTag()&&this._sendComplete()):this._handleError())},e._handleTimeout=function(){this._clean(),this._sendError({reason:"PRELOAD_TIMEOUT"})},e._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}return!0},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},e._createXHR=function(t){var e=document.createElement("a");e.href=this.buildPath(t.src,this._basePath);var n=document.createElement("a");if(n.href=location.href,e=""!=e.hostname&&(e.port!=n.port||e.protocol!=n.protocol||e.hostname!=n.hostname),n=null,e&&window.XDomainRequest)n=new XDomainRequest;
else if(window.XMLHttpRequest)n=new XMLHttpRequest;else try{n=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(i){try{n=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(o){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(s){return!1}}}t.type==createjs.LoadQueue.TEXT&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),this._xhrLevel="string"==typeof n.responseType?2:1;var r=null,r=t.method==createjs.LoadQueue.GET?this.buildPath(t.src,this._basePath,t.values):this.buildPath(t.src,this._basePath);return n.open(t.method||createjs.LoadQueue.GET,r,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&n.setRequestHeader("Origin",location.origin),t.values&&t.method==createjs.LoadQueue.POST&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(t.type)&&(n.responseType="arraybuffer"),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout);var t=this._request;t.onloadstart=null,t.onprogress=null,t.onabort=null,t.onerror=null,t.onload=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null},e._generateTag=function(){var t=this._item.tag;switch(this._item.type){case createjs.LoadQueue.IMAGE:return t.onload=createjs.proxy(this._handleTagReady,this),t.src=this.buildPath(this._item.src,this._basePath,this._item.values),this._rawResponse=this._response,this._response=t,!1;case createjs.LoadQueue.JAVASCRIPT:t=document.createElement("script"),this._rawResponse=t.text=this._response,this._response=t;break;case createjs.LoadQueue.CSS:if(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.cssText=this._response;else{var e=document.createTextNode(this._response);t.appendChild(e)}this._rawResponse=this._response,this._response=t;break;case createjs.LoadQueue.XML:this._response=e=this._parseXML(this._response,"text/xml");break;case createjs.LoadQueue.SVG:e=this._parseXML(this._response,"image/svg+xml"),this._rawResponse=this._response,null!=e.documentElement?(t.appendChild(e.documentElement),this._response=t):this._response=e;break;case createjs.LoadQueue.JSON:t={};try{t=JSON.parse(this._response)}catch(n){t=n}this._rawResponse=this._response,this._response=t}return!0},e._parseXML=function(t,e){var n=null;return window.DOMParser?n=(new DOMParser).parseFromString(t,e):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)),n},e._handleTagReady=function(){this._sendComplete()},e.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=t}(),"object"!=typeof JSON&&(JSON={}),function(){function c(t){return 10>t?"0"+t:t}function a(t){return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function d(t,e){var n,i,o,s,r,l=j,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof h&&(c=h.call(e,t,c)),typeof c){case"string":return a(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(j+=f,r=[],"[object Array]"===Object.prototype.toString.apply(c)){for(s=c.length,n=0;s>n;n+=1)r[n]=d(n,c)||"null";return o=0===r.length?"[]":j?"[\n"+j+r.join(",\n"+j)+"\n"+l+"]":"["+r.join(",")+"]",j=l,o}if(h&&"object"==typeof h)for(s=h.length,n=0;s>n;n+=1)"string"==typeof h[n]&&(i=h[n],(o=d(i,c))&&r.push(a(i)+(j?": ":":")+o));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o=d(i,c))&&r.push(a(i)+(j?": ":":")+o);return o=0===r.length?"{}":j?"{\n"+j+r.join(",\n"+j)+"\n"+l+"}":"{"+r.join(",")+"}",j=l,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,f,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(f=j="","number"==typeof n)for(i=0;n>i;i+=1)f+=" ";else"string"==typeof n&&(f=n);if((h=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return d("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(a,c){function d(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=d(o,n),void 0!==i?o[n]=i:delete o[n]);return c.call(t,e,o)}var e,a=a+"";if(b.lastIndex=0,b.test(a)&&(a=a.replace(b,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"==typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse")})}(),function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function t(t){return function(){return X.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===ie(t)||t instanceof z}function i(t,e){if(J&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(se)){for(var n=[],i=e;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(t.stack);var s=n.join("\n"+se+"\n");t.stack=o(s)}}function o(t){for(var e=t.split("\n"),n=[],i=0;e.length>i;++i){var o=e[i];a(o)||s(o)||!o||n.push(o)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function r(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function a(t){var e=r(t);if(!e)return!1;var n=e[0],i=e[1];return n===H&&i>=U&&ue>=i}function l(){if(J)try{throw Error()}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],i=r(n);if(!i)return;return H=i[0],i[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",Error("").stack),t.apply(t,arguments)}}function u(t){return _(t)?t:g(t)?k(t):E(t)}function h(){function t(t){e=t,s.source=t,K(n,function(e,n){W(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,i=void 0}var e,n=[],i=[],o=te(h.prototype),s=te(f.prototype);if(s.promiseDispatch=function(t,o,s){var r=Q(arguments);n?(n.push(r),"when"===o&&s[1]&&i.push(s[1])):W(function(){e.promiseDispatch.apply(e,r)})},s.valueOf=c(function(){if(n)return s;var t=y(e);return _(t)&&(e=t),t},"valueOf","inspect"),s.inspect=function(){return e?e.inspect():{state:"pending"}},u.longStackSupport&&J)try{throw Error()}catch(r){s.stack=r.stack.substring(r.stack.indexOf("\n")+1)}return o.promise=s,o.resolve=function(n){e||t(u(n))},o.fulfill=function(n){e||t(E(n))},o.reject=function(n){e||t(B(n))},o.notify=function(t){e||K(i,function(e,n){W(function(){n(t)})},void 0)},o}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function m(t){return p(function(e,n){for(var i=0,o=t.length;o>i;i++)u(t[i]).then(e,n)})}function f(t,e,n){void 0===e&&(e=function(t){return B(Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=te(f.prototype);if(i.promiseDispatch=function(n,o,s){var r;try{r=t[o]?t[o].apply(i,s):e.call(i,o,s)}catch(a){r=B(a)}n&&n(r)},i.inspect=n,n){var o=n();"rejected"===o.state&&(i.exception=o.reason),i.valueOf=c(function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value})}return i}function d(t,e,n,i){return u(t).then(e,n,i)}function y(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return e(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function g(t){return e(t)&&"function"==typeof t.then}function x(t){return _(t)&&"pending"===t.inspect().state}function v(t){return!_(t)||"fulfilled"===t.inspect().state}function b(t){return _(t)&&"rejected"===t.inspect().state}function w(){le||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",re),le=!0}function C(){for(var t=0;re.length>t;t++){var e=re[t];e&&e.stack!==void 0?console.warn("Unhandled rejection reason:",e.stack):console.warn("Unhandled rejection reason (no stack):",e)}}function S(){re.length=0,ae.length=0,le=!1,ce||(ce=!0,"undefined"!=typeof process&&process.on&&process.on("exit",C))}function A(t,e){ce&&(ae.push(t),re.push(e),w())}function D(t){if(ce){var e=Y(ae,t);-1!==e&&(ae.splice(e,1),re.splice(e,1))}}function B(t){var e=f({when:function(e){return e&&D(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return A(e,t),e}function E(t){return f({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return ne(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function k(t){var e=h();return W(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function T(t){return f({isDef:function(){}},function(e,n){return V(t,e,n)},function(){return u(t).inspect()})}function M(t,e,n){return u(t).spread(e,n)}function L(t){return function(){function e(t,e){var r;if(oe){try{r=i[t](e)}catch(a){return B(a)}return r.done?r.value:d(r.value,o,s)}try{r=i[t](e)}catch(a){return n(a)?a.value:B(a)}return d(r,o,s)}var i=t.apply(this,arguments),o=e.bind(e,"next"),s=e.bind(e,"throw");return o()}}function I(t){u.done(u.async(t)())}function j(t){throw new z(t)}function P(t){return function(){return M([this,R(arguments)],function(e,n){return t.apply(e,n)})}}function V(t,e,n){return u(t).dispatch(e,n)}function R(t){return d(t,function(t){var e=0,n=h();return K(t,function(i,o,s){var r;_(o)&&"fulfilled"===(r=o.inspect()).state?t[s]=r.value:(++e,d(o,function(i){t[s]=i,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:s,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function N(t){return d(t,function(t){return t=Z(t,u),d(R(Z(t,function(t){return d(t,$,$)})),function(){return t})})}function O(t){return u(t).allSettled()}function F(t,e){return u(t).then(void 0,void 0,e)}function G(t,e){return u(t).nodeify(e)}var J=!1;try{throw Error()}catch(q){J=!!q.stack}var H,z,U=l(),$=function(){},W=function(){function t(){for(;e.next;){e=e.next;var n=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{n()}catch(r){if(s)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),r;setTimeout(function(){throw r},0)}o&&o.exit()}i=!1}var e={task:void 0,next:null},n=e,i=!1,o=void 0,s=!1;if(W=function(t){n=n.next={task:t,domain:s&&process.domain,next:null},i||(i=!0,o())},"undefined"!=typeof process&&process.nextTick)s=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var r=new MessageChannel;r.port1.onmessage=t,o=function(){r.port2.postMessage(0)}}else o=function(){setTimeout(t,0)};return W}(),X=Function.call,Q=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(e=t(e,this[n],n));return e}),Y=t(Array.prototype.indexOf||function(t){for(var e=0;this.length>e;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var n=this,i=[];return K(n,function(o,s,r){i.push(t.call(e,s,r,n))},void 0),i}),te=Object.create||function(t){function e(){}return e.prototype=t,new e},ee=t(Object.prototype.hasOwnProperty),ne=Object.keys||function(t){var e=[];for(var n in t)ee(t,n)&&e.push(n);return e},ie=t(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var oe;try{Function("(function* (){ yield 1; })"),oe=!0}catch(q){oe=!1}var se="From previous event:";u.resolve=u,u.nextTick=W,u.longStackSupport=!1,u.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Q(arguments,1)):t.resolve(n)}},u.promise=p,u.passByCopy=function(t){return t},f.prototype.passByCopy=function(){return this},u.join=function(t,e){return u(t).join(e)},f.prototype.join=function(t){return u([this,t]).spread(function(t,e){if(t===e)return t;throw Error("Can't join: not the same: "+t+" "+e)})},u.race=m,f.prototype.race=function(){return this.then(u.race)},u.makePromise=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(n){return B(n)}}function s(t){if("function"==typeof e){i(t,a);try{return e(t)}catch(n){return B(n)}}return B(t)}function r(t){return"function"==typeof n?n(t):t}var a=this,l=h(),c=!1;return W(function(){a.promiseDispatch(function(t){c||(c=!0,l.resolve(o(t)))},"when",[function(t){c||(c=!0,l.resolve(s(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=r(t)}catch(i){if(n=!0,!u.onerror)throw i;u.onerror(i)}n||l.notify(e)}]),l.promise},u.when=d,f.prototype.thenResolve=function(t){return this.then(function(){return t})},u.thenResolve=function(t,e){return u(t).thenResolve(e)},f.prototype.thenReject=function(t){return this.then(function(){throw t})},u.thenReject=function(t,e){return u(t).thenReject(e)},u.nearer=y,u.isPromise=_,u.isPromiseAlike=g,u.isPending=x,f.prototype.isPending=function(){return"pending"===this.inspect().state},u.isFulfilled=v,f.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},u.isRejected=b,f.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],ae=[],le=!1,ce=!0;u.resetUnhandledRejections=S,u.getUnhandledReasons=function(){return re.slice()},u.stopUnhandledRejectionTracking=function(){S(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",C),ce=!1},S(),u.reject=B,u.fulfill=E,u.master=T,u.spread=M,f.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},u.async=L,u.spawn=I,u["return"]=j,u.promised=P,u.dispatch=V,f.prototype.dispatch=function(t,e){var n=this,i=h();return W(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},u.get=function(t,e){return u(t).dispatch("get",[e])},f.prototype.get=function(t){return this.dispatch("get",[t])},u.set=function(t,e,n){return u(t).dispatch("set",[e,n])},f.prototype.set=function(t,e){return this.dispatch("set",[t,e])},u.del=u["delete"]=function(t,e){return u(t).dispatch("delete",[e])},f.prototype.del=f.prototype["delete"]=function(t){return this.dispatch("delete",[t])},u.mapply=u.post=function(t,e,n){return u(t).dispatch("post",[e,n])},f.prototype.mapply=f.prototype.post=function(t,e){return this.dispatch("post",[t,e])},u.send=u.mcall=u.invoke=function(t,e){return u(t).dispatch("post",[e,Q(arguments,2)])},f.prototype.send=f.prototype.mcall=f.prototype.invoke=function(t){return this.dispatch("post",[t,Q(arguments,1)])},u.fapply=function(t,e){return u(t).dispatch("apply",[void 0,e])},f.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},u["try"]=u.fcall=function(t){return u(t).dispatch("apply",[void 0,Q(arguments,1)])},f.prototype.fcall=function(){return this.dispatch("apply",[void 0,Q(arguments)])},u.fbind=function(t){var e=u(t),n=Q(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Q(arguments))])}},f.prototype.fbind=function(){var t=this,e=Q(arguments);return function(){return t.dispatch("apply",[this,e.concat(Q(arguments))])}},u.keys=function(t){return u(t).dispatch("keys",[])},f.prototype.keys=function(){return this.dispatch("keys",[])},u.all=R,f.prototype.all=function(){return R(this)},u.allResolved=c(N,"allResolved","allSettled"),f.prototype.allResolved=function(){return N(this)},u.allSettled=O,f.prototype.allSettled=function(){return this.then(function(t){return R(Z(t,function(t){function e(){return t.inspect()}return t=u(t),t.then(e,e)}))})},u.fail=u["catch"]=function(t,e){return u(t).then(void 0,e)},f.prototype.fail=f.prototype["catch"]=function(t){return this.then(void 0,t)},u.progress=F,f.prototype.progress=function(t){return this.then(void 0,void 0,t)},u.fin=u["finally"]=function(t,e){return u(t)["finally"](e)},f.prototype.fin=f.prototype["finally"]=function(t){return t=u(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},u.done=function(t,e,n,i){return u(t).done(e,n,i)},f.prototype.done=function(t,e,n){var o=function(t){W(function(){if(i(t,s),!u.onerror)throw t;u.onerror(t)})},s=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),s.then(void 0,o)},u.timeout=function(t,e,n){return u(t).timeout(e,n)},f.prototype.timeout=function(t,e){var n=h(),i=setTimeout(function(){n.reject(Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},u.delay=function(t,e){return void 0===e&&(e=t,t=void 0),u(t).delay(e)},f.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},u.nfapply=function(t,e){return u(t).nfapply(e)},f.prototype.nfapply=function(t){var e=h(),n=Q(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},u.nfcall=function(t){var e=Q(arguments,1);return u(t).nfapply(e)},f.prototype.nfcall=function(){var t=Q(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},u.nfbind=u.denodeify=function(t){var e=Q(arguments,1);return function(){var n=e.concat(Q(arguments)),i=h();return n.push(i.makeNodeResolver()),u(t).fapply(n).fail(i.reject),i.promise}},f.prototype.nfbind=f.prototype.denodeify=function(){var t=Q(arguments);return t.unshift(this),u.denodeify.apply(void 0,t)},u.nbind=function(t,e){var n=Q(arguments,2);return function(){function i(){return t.apply(e,arguments)}var o=n.concat(Q(arguments)),s=h();return o.push(s.makeNodeResolver()),u(i).fapply(o).fail(s.reject),s.promise}},f.prototype.nbind=function(){var t=Q(arguments,0);return t.unshift(this),u.nbind.apply(void 0,t)},u.nmapply=u.npost=function(t,e,n){return u(t).npost(e,n)},f.prototype.nmapply=f.prototype.npost=function(t,e){var n=Q(e||[]),i=h();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},u.nsend=u.nmcall=u.ninvoke=function(t,e){var n=Q(arguments,2),i=h();return n.push(i.makeNodeResolver()),u(t).dispatch("post",[e,n]).fail(i.reject),i.promise},f.prototype.nsend=f.prototype.nmcall=f.prototype.ninvoke=function(t){var e=Q(arguments,1),n=h();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},u.nodeify=G,f.prototype.nodeify=function(t){return t?(this.then(function(e){W(function(){t(null,e)})},function(e){W(function(){t(e)})}),void 0):this};var ue=l();return u}),require.register("test/models/Entity-test",function(t,e){var n;n=e("models/Entity"),describe("Entity",function(){return beforeEach(function(){return this.model=new n})})}),require.register("test/models/InputManager-test",function(t,e){var n;n=e("models/InputManager"),describe("InputManager",function(){return beforeEach(function(){return this.model=new n})})}),require.register("test/models/Player-test",function(t,e){var n;n=e("models/Player"),describe("Player",function(){return beforeEach(function(){return this.model=new n})})}),require.register("test/models/TILEDMap-test",function(t,e){var n;n=e("models/TILEDMap"),describe("TILEDMap",function(){return beforeEach(function(){return this.model=new n})})}),require.register("test/models/home-test",function(t,e){var n;n=e("models/home"),describe("Home",function(){return beforeEach(function(){return this.model=new n})})}),require.register("test/test-helpers",function(t,e,n){var i,o;i=e("chai"),o=e("sinon-chai"),i.use(o),n.exports={expect:i.expect,sinon:e("sinon")}}),require.register("test/views/home-page-view-test",function(t,e){var n;n=e("views/home-page-view"),describe("HomePageView",function(){return beforeEach(function(){return this.view=new n}),afterEach(function(){return this.view.dispose()}),it("should auto-render",function(){return expect(this.view.$el.find("img")).to.have.length(1)})})});